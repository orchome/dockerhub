webpackJsonp([16],{"8bJ4":function(t,e,s){t.exports=s.p+"static/img/search-null-girl.2dfcc13.png"},LUXO:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),r=s.n(a),n=s("exGp"),i=s.n(n),c=s("Dd8w"),o=s.n(c),l=s("688b"),h=s("SJI6"),u=s("qERK"),p=s("GQaK"),g={components:{BookInfo:l.a,loading:u.a},name:"searchResult",computed:o()({},Object(h.mapGetters)({searchResult:"searchResult",sex:"sex",searchResultPagination:"searchResultPagination",searchKey:"searchKey"}),{haveResult:function(){return 0==this.searchResult.length}}),watch:{searchKey:function(t){this.searchResultPagination.current_page=1,this.scroll&&this.scroll.scrollTo(0,0),""!=t&&this.getSearchFn()}},data:function(){return{scroll:"",pullingUpStart:!1,isHaveData:!0}},methods:{goHomeFn:function(){this.$router.push("/")},getSearchFn:function(){var t=i()(r.a.mark(function t(){var e,s=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("getSearch",{page:this.searchResultPagination.current_page,keyword:this.searchKey||"",sex:this.sex});case 2:e=t.sent,this.pullingUpStart=!1,this.$nextTick(function(){200==e.code&&(e.pagination.current_page>=e.pagination.total_pages?(s.isHaveData=!1,s.scroll&&(s.scroll.closePullUp(),s.scroll.refresh())):(s.isHaveData=!0,s.scroll&&(s.scroll.finishPullUp(),s.scroll.refresh())))}),this.addSearchFn();case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addSearchFn:function(){this.$store.dispatch("postHotWords",{keywords:this.searchKey||""})},initBScroll:function(){var t=this;""==this.scroll?this.$nextTick(function(){t.scroll=new p.a(t.$refs.wrapper,{click:!0,pullUpLoad:{threshold:0}}),t.scroll.on("pullingUp",function(){t.isHaveData&&(t.pullingUpStart=!0,t.getSearchFn())})}):this.scroll.refresh()}},created:function(){this.searchKey&&this.getSearchFn()},mounted:function(){this.initBScroll()},beforeDestroy:function(){this.scroll&&this.scroll.destroy(),this.$store.dispatch("clearSearch")}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"wrapper",staticClass:"searchResult"},[t.haveResult?a("div",{staticClass:"no-result"},[a("div",{staticClass:"avatar"},[1==t.sex?a("img",{attrs:{src:s("nxpC"),alt:""}}):t._e(),t._v(" "),2==t.sex?a("img",{attrs:{src:s("8bJ4"),alt:""}}):t._e()]),t._v(" "),a("p",[t._v("亲，啥也没有哦～")]),t._v(" "),a("span",{on:{click:t.goHomeFn}},[t._v("去首页看看")])]):a("div",{staticClass:"result"},[t._l(t.searchResult,function(t){return[a("book-info",{key:t.id,attrs:{book:t}})]}),t._v(" "),a("div",{staticClass:"bottom-top"},[t.pullingUpStart?a("loading"):t._e(),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.pullingUpStart&&t.isHaveData,expression:"!pullingUpStart&&isHaveData"}],staticClass:"loading-hook"},[t._v("加载更多")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.searchResultPagination.current_page>2&&!t.pullingUpStart&&!t.isHaveData,expression:"searchResultPagination.current_page>2&&(!pullingUpStart&&!isHaveData)"}],staticClass:"loading-hook"},[t._v("没有更多书籍了")])],1)],2)])},staticRenderFns:[]};var d=s("VU/8")(g,v,!1,function(t){s("i20E")},"data-v-5eb2af52",null);e.default=d.exports},i20E:function(t,e){},nxpC:function(t,e,s){t.exports=s.p+"static/img/search-null-boy.b598e31.png"}});