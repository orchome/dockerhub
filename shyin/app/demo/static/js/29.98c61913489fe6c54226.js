webpackJsonp([29],{"9sFp":function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=s("Xxa5"),a=s.n(n),e=s("exGp"),o=s.n(e),r=s("Dd8w"),l=s.n(r),c=s("SJI6"),p=s("cS7h"),u=s("688b"),h=s("GQaK"),f=s("qERK"),d={name:"finish",components:{Navigation:p.a,BookInfo:u.a,loading:f.a},computed:l()({},Object(c.mapGetters)({sex:"sex",finishBook:"finishBook",finishBookPagination:"finishBookPagination"})),data:function(){return{scroll:"",pullingUpStart:!1,isHaveData:!0,params:{sex:1}}},methods:{getBooksFinishedFn:function(){var t=o()(a.a.mark(function t(){var i,s,n=this;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(i={}).sex=this.sex,i.page=this.finishBookPagination.current_page,t.next=5,this.$store.dispatch("getBooksFinished",i);case 5:s=t.sent,this.pullingUpStart=!1,this.$nextTick(function(){200==s.code&&(s.pagination.current_page>=s.pagination.total_pages?(n.isHaveData=!1,n.scroll&&(n.scroll.closePullUp(),n.scroll.refresh())):(n.isHaveData=!0,n.scroll&&(n.scroll.finishPullUp(),n.scroll.refresh())))});case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),initBScroll:function(){var t=this;""==this.scroll?this.$nextTick(function(){t.scroll=new h.a(t.$refs.wrapper,{click:!0,pullUpLoad:{threshold:0}}),t.scroll.on("pullingUp",function(){t.isHaveData&&(t.pullingUpStart=!0,t.getBooksFinishedFn())})}):this.scroll.refresh()}},created:function(){this.getBooksFinishedFn(),console.log(this.finishBook)},mounted:function(){this.initBScroll()},beforeDestroy:function(){this.scroll&&this.scroll.destroy()}},v={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"finish"},[s("navigation",[t._v("完本")]),t._v(" "),s("div",{ref:"wrapper",staticClass:"book-container"},[s("div",{staticClass:"wrapper"},[t._l(t.finishBook,function(i){return[i.book_id?s("book-info",{key:i.book_id,attrs:{book:i}}):t._e()]}),t._v(" "),s("div",{staticClass:"bottom-top"},[t.pullingUpStart?s("loading"):t._e(),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.pullingUpStart&&t.isHaveData,expression:"!pullingUpStart&&isHaveData"}],staticClass:"loading-hook"},[t._v("加载更多")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.pullingUpStart&&!t.isHaveData,expression:"!pullingUpStart&&!isHaveData"}],staticClass:"loading-hook"},[t._v("没有更多书籍了")])],1)],2)])],1)},staticRenderFns:[]};var g=s("VU/8")(d,v,!1,function(t){s("yqQd")},"data-v-3ca9dcee",null);i.default=g.exports},yqQd:function(t,i){}});