webpackJsonp([5],{"6oK6":function(t,s,e){t.exports=e.p+"static/img/give-btn.2892d35.png"},FWUX:function(t,s,e){t.exports=e.p+"static/img/trumpet.d833e00.png"},PrUr:function(t,s,e){t.exports=e.p+"static/img/arrow-right.bc257a5.png"},PzE1:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Xxa5"),a=e.n(i),o=e("exGp"),r=e.n(o),n=e("Dd8w"),c=e.n(n),l=e("yDE+"),u=e("cS7h"),h=e("8hr+"),p=e("kTGp"),d={props:{height:{default:.56,type:Number},lineNum:{default:0,type:Number},contentArr:{type:Array,default:[]}},data:function(){return{num:0}},computed:{transform:function(){return"translateY(-"+this.num*this.height+"rem)"}},created:function(){var t=this;setInterval(function(){t.num!==t.contentArr.length?t.num++:t.num=0},2300)}},_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"trumpet-box"},[e("div",{staticClass:"rollScreen_container",style:{height:t.height*t.lineNum+"rem"},attrs:{id:"rollScreen_container"}},[e("ul",{staticClass:"rollScreen_list",class:{rollScreen_list_unanim:0===t.num},style:{transform:t.transform}},[t._l(t.contentArr,function(s,i){return e("li",{key:i+100,staticClass:"rollScreen_once",style:{height:t.height+"rem"}},[e("img",{attrs:{src:s.avatar,alt:""}}),t._v(" "),e("span",[t._v(t._s(s._nickname)+"打赏了"+t._s(s.amount)+"书币,在此叩谢!")])])}),t._v(" "),t._l(t.contentArr,function(s,i){return e("li",{key:i,staticClass:"rollScreen_once",style:{height:t.height+"rem"}},[e("img",{attrs:{src:s.avatar,alt:""}}),t._v(" "),e("span",[t._v(t._s(s._nickname)+"打赏了"+t._s(s.amount)+"书币,在此叩谢!")])])})],2),t._v("s\n  ")])])},staticRenderFns:[]};var f=e("VU/8")(d,_,!1,function(t){e("j83I")},"data-v-01b7b2c0",null).exports,v=e("SJI6"),k=e("0xDb"),m={mixins:[e("Izdj").a],name:"index",components:{Navigation:u.a,TitlePanel:h.a,CoverTitle:p.a,worldSwiper:f,givePopup:l.a},computed:c()({},Object(v.mapGetters)({sex:"sex",bookInfo:"bookInfo",bookLike:"bookLike"}),{newChapter:function(){var t={};return this.bookInfo&&this.bookInfo.new_chapter&&(t=this.bookInfo.new_chapter),t._created_at=t.created_at?Object(k.b)(Number(new Date(t.created_at))):"",t.book_id=this.$route.params.id,t},chapters:function(){var t=[];return this.bookInfo&&this.bookInfo.two_chapters_book_ad&&this.bookInfo.two_chapters_book_ad&&(t=this.bookInfo.two_chapters_book_ad),t}}),data:function(){return{clip:!0,is_automatic:1,params:{book_id:this.$route.params.id||1},rewardScrollArr:[],rewardList:[]}},methods:{goToDirectoryFn:function(){var t=r()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.$router.push("/directory/"+this.params.book_id);case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),goToMoreGiveFn:function(){var t=r()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.$router.push("/giveList/"+this.params.book_id);case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getBookDetailsFn:function(){var t=r()(a.a.mark(function t(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("getBookDetails",this.params);case 2:200==(s=t.sent).code&&localStorage.setItem("is_automatic",s.is_automatic);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getBookLikesFn:function(){var t=r()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("getBookLikes",{sex:this.sex});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),readFn:function(){var t=r()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.$router.push("/read/"+this.bookInfo.book_id+"/"+this.bookInfo.first_chapter_id),0==this.bookInfo.record?this.$router.push("/read/"+this.bookInfo.book_id+"/"+this.bookInfo.first_chapter_id):Number(this.bookInfo.sort_record)>=Number(this.bookInfo.concern_chapter)&&2==this.bookInfo.follow_type&&0==this.bookInfo.is_focus?this.$store.dispatch("setConcernVisible",{show:!0,hidden:!1}):this.$router.push("/read/"+this.bookInfo.book_id+"/"+this.bookInfo.record);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),postBookshelfAddFn:function(){var t=r()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1==this.bookInfo.bookshelf_status){t.next=5;break}return t.next=3,this.$store.dispatch("postBookshelfAdd",this.params);case 3:200==t.sent.code&&(this.$Toast({message:"已加入书架",duration:1500}),this.bookInfo.bookshelf_status=1);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),goToChapterFn:function(t){t.sort>=this.bookInfo.concern_chapter&&2==this.bookInfo.follow_type&&0==this.bookInfo.is_focus?this.$store.dispatch("setConcernVisible",{show:!0,hidden:!1}):this.$router.push({path:"/read/"+t.book_id+"/"+t.chapter_id})},getRewardScrollBar:function(){var t=this;this.$store.dispatch("getRewardScrollBar",this.params).then(function(s){200==s.code&&(s.data.forEach(function(t){if(0==t.nickname.length)t._nickname="*";else if(1==t.nickname.length)t._nickname="*"+t.nickname;else{var s=t.nickname.split("");t._nickname="*"+s[s.length-1]}}),t.rewardScrollArr=s.data)})},getRewardList:function(){var t=this;this.$store.dispatch("getRewardList",this.params).then(function(s){200==s.code&&(t.rewardList=s.data)})},getGiveList:function(){this.getRewardScrollBar(),this.getRewardList()},showGivePop:function(){this.$refs.givePop.popupVisible=!0}},created:function(){this.getBookLikesFn(),this.getGiveList(),this.getQrcodeNewFn()},mounted:function(){this.bookInfo.book_id!=this.$route.params.id&&this.getBookDetailsFn()},beforeDestroy:function(){}},g={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"book"}},[i("navigation",[t._v(t._s(t.bookInfo.name))]),t._v(" "),i("div",{staticClass:"book-info"},[i("div",{staticClass:"cover"},[i("img",{attrs:{src:t.bookInfo.img,alt:""}})]),t._v(" "),i("div",{staticClass:"info"},[i("h3",[t._v(t._s(t.bookInfo.name))]),t._v(" "),i("p",[t._v(t._s(t.bookInfo.pen_name)+" | "+t._s(t.bookInfo._word_count)+"字")]),t._v(" "),i("div",{staticClass:"tags"},[i("span",{class:{"serial-no":1==t.bookInfo.serial_status}},[t._v(t._s(t.bookInfo._serial_status))]),t._v(" "),i("span",[t._v(t._s(t.bookInfo.cat_name))])])])]),t._v(" "),i("div",{staticClass:"book-introduce"},[t._m(0),t._v(" "),i("div",{staticClass:"text",class:{clip:t.clip}},[i("p",{staticClass:"summary"},[t._v(t._s(t.bookInfo.summary))]),t._v(" "),i("span",{staticClass:"more",on:{click:function(s){t.clip=!1}}})])]),t._v(" "),i("div",{staticClass:"book-directory"},[i("div",{staticClass:"title",on:{click:t.goToDirectoryFn}},[i("p",[t._v("目录")]),t._v(" "),i("span",{staticClass:"arrow-right"})]),t._v(" "),i("div",{staticClass:"chapter"},[i("ul",{staticClass:"all"},[i("li",{staticClass:"update-chapter",on:{click:function(s){t.goToChapterFn(t.newChapter)}}},[i("span",[t._v("更新章节：")]),t._v(" "),i("span",{staticClass:"update-name"},[t._v(t._s(t.newChapter.name))]),t._v(" "),i("span",{staticClass:"time"},[t._v(t._s(t.newChapter._created_at))])]),t._v(" "),t._l(t.chapters,function(s){return i("li",{key:s.chapter_id,on:{click:function(e){t.goToChapterFn(s)}}},[t._v(t._s(s.name))])})],2)])]),t._v(" "),i("div",{staticClass:"book-give"},[t.rewardScrollArr.length>0?i("div",{staticClass:"book-give-inform"},[i("img",{staticClass:"trumpet",attrs:{src:e("FWUX"),alt:""}}),t._v(" "),i("worldSwiper",{attrs:{contentArr:t.rewardScrollArr,lineNum:t.rewardScrollArr.length}})],1):t._e(),t._v(" "),i("div",{staticClass:"book-give-inform-img-box"},[i("img",{staticClass:"book-give-inform-bg-img",attrs:{src:e("6oK6"),alt:""},on:{click:t.showGivePop}}),t._v(" "),i("img",{staticClass:"book-give-inform-btn-img",attrs:{src:e("pKub"),alt:""},on:{click:t.showGivePop}})]),t._v(" "),t.rewardList.length>0?i("div",{staticClass:"book-give-rank"},[i("div",{staticClass:"title",on:{click:t.goToMoreGiveFn}},[i("p",[t._v("打赏榜单")]),t._v(" "),t._m(1)]),t._v(" "),i("div",{staticClass:"rank-list"},t._l(3,function(s,a){return i("div",{key:a,staticClass:"rank-li"},[t.rewardList[a]?i("img",{staticClass:"rank-li-img",attrs:{src:t.rewardList[a].avatar,alt:""}}):i("img",{staticClass:"rank-li-img",attrs:{src:e("keqg"),alt:""}}),t._v(" "),0==a?i("img",{staticClass:"rank-li-num",attrs:{src:e("rVrT"),alt:""}}):t._e(),t._v(" "),1==a?i("img",{staticClass:"rank-li-num",attrs:{src:e("tUeK"),alt:""}}):t._e(),t._v(" "),2==a?i("img",{staticClass:"rank-li-num",attrs:{src:e("Zgrq"),alt:""}}):t._e(),t._v(" "),i("div",{staticClass:"rank-li-name singleClip"},[t._v(t._s(t.rewardList[a]?t.rewardList[a].nickname:"暂无昵称"))]),t._v(" "),i("div",{staticClass:"rank-li-coin singleClip"},[t._v(t._s(t.rewardList[a]?t.rewardList[a].total_amount:"0")+"书币")])])}))]):t._e()]),t._v(" "),i("div",{staticClass:"recommend"},[i("title-panel",{staticStyle:{"padding-left":"0"}},[t._v("猜你喜欢")]),t._v(" "),i("div",{staticClass:"books"},[i("cover-title",{attrs:{three:"",books:t.bookLike}})],1)],1),t._v(" "),i("div",{staticClass:"read"},[i("div",{staticClass:"add-shelf",on:{click:t.postBookshelfAddFn}},[i("span"),t._v("\n      "+t._s(1==t.bookInfo.bookshelf_status?"已加入":"加入书架")+"\n    ")]),t._v(" "),i("div",{staticClass:"read-btn",on:{click:t.readFn}},[t._v(t._s(t.bookInfo.record>0?"继续阅读":"开始阅读"))])]),t._v(" "),i("givePopup",{ref:"givePop",attrs:{book_id:t.params.book_id},on:{getGiveList:t.getGiveList}})],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"title"},[s("p",[this._v("简介")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"arrow-right"},[this._v("\n          更多榜单\n          "),s("img",{attrs:{src:e("PrUr"),alt:""}})])}]};var b=e("VU/8")(m,g,!1,function(t){e("apF2")},"data-v-989c8e5a",null);s.default=b.exports},Zgrq:function(t,s,e){t.exports=e.p+"static/img/medal-3.f0cad93.png"},apF2:function(t,s){},j83I:function(t,s){},keqg:function(t,s,e){t.exports=e.p+"static/img/default-user-img.85c3001.png"},pKub:function(t,s,e){t.exports=e.p+"static/img/give-img-btn.4ee3072.png"},rVrT:function(t,s,e){t.exports=e.p+"static/img/medal-1.b893148.png"},tUeK:function(t,s,e){t.exports=e.p+"static/img/medal-2.42fa7b1.png"}});