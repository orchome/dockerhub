webpackJsonp([11],{G7Gw:function(t,s,n){t.exports=n.p+"static/img/sign.6f7df05.png"},"H+Ec":function(t,s){},T73w:function(t,s){},eHTn:function(t,s,n){t.exports=n.p+"static/img/pop-close.1b399c7.png"},fMiT:function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=n("Xxa5"),o=n.n(i),e=n("exGp"),a=n.n(e),c=n("Dd8w"),r=n.n(c),p=n("SJI6"),u=n("cS7h"),d={render:function(){var t=this.$createElement,s=this._self._c||t;return this.showPop?s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"Popup",attrs:{id:"Popup"}},[s("div",{staticClass:"pop-box pop-box-in"},[this._t("default")],2)])]):this._e()},staticRenderFns:[]};var v=n("VU/8")({name:"Popup",data:function(){return{showPop:!1}},watch:{},mounted:function(){},methods:{popStatusFn:function(t){this.showPop=t}}},d,!1,function(t){n("H+Ec")},"data-v-665707d0",null).exports,l=n("TIfe"),h=n("Izdj"),_={components:{Navigation:u.a,Popup:v},mixins:[h.a],computed:r()({},Object(p.mapGetters)({sex:"sex",userList:"userList"}),{already:function(){return 2==this.userList.is_sign},title:function(){return this.already?"今日已签到，明天再来吧":"点击签到"},canAcquireCoin:function(){return this.userList.can_get_coupon}}),data:function(){return{isShow:!1,signShow:!1,signSuccess:"",day:0,coin:0,coupon:0,success:!1,isLoad:!1,isJoinBook:!1,randomBookArr:[{},{}]}},methods:{goBackHome:function(){this.$router.push("/")},show:function(){this.isShow=!0,this.postUsersignFn()},none:function(){this.isShow=!1},signshowa:function(){this.signShow=!0},closePop:function(){var t=this;return a()(o.a.mark(function s(){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.$refs.popSignBook.popStatusFn(!1),s.next=3,t.$store.dispatch("postUserList");case 3:case"end":return s.stop()}},s,t)}))()},signnonea:function(){this.signShow=!1},postSignFn:function(){this.postUsersignFn()},postAddRandom:function(){var t=this;return a()(o.a.mark(function s(){var n,i,e;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n="",2==(i=t.randomBookArr).length&&(n=i[0].book_id+","+i[1].book_id),e={id:n},s.next=6,t.$store.dispatch("postAddRandom",e);case 6:200==s.sent.code&&(t.isJoinBook=!0);case 8:case"end":return s.stop()}},s,t)}))()},goBook:function(t){this.getBookDetailFn(t)},postUsersignFn:function(){var t=a()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.already){t.next=5;break}return t.next=3,this.$store.dispatch("postUsersign");case 3:200==(s=t.sent).code?(this.coin=s.data.coin,this.coupon=Number(s.data.coupon)||0,this.success=!0,this.$refs.popSignBook.popStatusFn(!0)):21005==s.code&&this.$Toast({message:s.message,duration:1500});case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getUpdateSignFn:function(){var t=a()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.$store.dispatch("getUpdateSign"));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},created:function(){var t=a()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("postUserList");case 2:if(1!=this.userList.yesterday_is_sign){t.next=5;break}return t.next=5,this.getUpdateSignFn();case 5:this.isLoad=!0;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),mounted:function(){var t=this,s=Object(l.b)()||1;this.$store.dispatch("getPoolBook",{sex:s}).then(function(s){200==s.code&&(s.data.forEach(function(t){t._img="https://res.shiyin.net/"+t.img}),t.randomBookArr=s.data)})}},f={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoad,expression:"isLoad"}],staticClass:"signlist"},[i("navigation",{attrs:{"direct-path":"/my"}},[t._v("签到送书券")]),t._v(" "),i("div",{staticClass:"flex"},[i("div",{staticClass:"text"},[t._v("\n      已经连续签到\n      "),i("span",[t._v(t._s(t.userList.sign_number))]),t._v("天\n    ")]),t._v(" "),i("div",{staticClass:"signbotton",on:{click:t.signshowa}},[t._v("签到规则")])]),t._v(" "),i("div",{staticClass:"pic-wrap"},[t._m(0),t._v(" "),i("p",{staticClass:"remind"},[t._v("每天连续签到，书券送不断")]),t._v(" "),i("p",{staticClass:"button",class:{already:2==t.userList.is_sign},on:{click:t.postSignFn}},[t._v(t._s(t.already?"今日已签到，明天再来吧":"点击签到得"+t.canAcquireCoin+"书券"))]),t._v(" "),2==t.userList.is_sign?i("p",{staticClass:"button gobackhome",on:{click:t.goBackHome}},[t._v("回到首页")]):t._e()]),t._v(" "),t.signShow?i("div",[i("div",{staticClass:"background"}),t._v(" "),i("div",{staticClass:"signSuccess"},[i("div",{staticClass:"title"},[t._v("签到规则")]),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"bule",on:{click:t.signnonea}},[t._v("知道了")])])]):t._e(),t._v(" "),i("Popup",{ref:"popSignBook"},[i("div",{staticClass:"pop-box"},[i("div",{staticClass:"sign-success-box"},[i("div",{staticClass:"pop-title"},[t._v("成功领取"+t._s(t.canAcquireCoin)+"书券")]),t._v(" "),i("div",{staticClass:"pop-content"},t._l(t.randomBookArr,function(s,n){return i("div",{key:n,staticClass:"pop-content-li",on:{click:function(n){t.goBook(s.book_id)}}},[i("img",{attrs:{src:s._img,alt:""}}),t._v(" "),i("div",[t._v(t._s(s.name))])])})),t._v(" "),t.isJoinBook?i("div",{staticClass:"pop-bottom-btn pop-bottom-btn-success"},[t._v("已加入书架")]):i("div",{staticClass:"pop-bottom-btn",on:{click:t.postAddRandom}},[t._v("一键加入书架")])]),t._v(" "),i("img",{staticClass:"pop-close",attrs:{src:n("eHTn"),alt:""},on:{click:t.closePop}})])])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"pic"},[s("img",{attrs:{src:n("G7Gw"),alt:""}})])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"felx"},[n("div",{staticClass:"popup-text1"},[t._v("1、本签到为累计签到，用户若中断签到,签到记录将自动重新开始")]),t._v(" "),n("div",{staticClass:"popup-text1"},[t._v("2、签到1天得30书券，连续签到第2天得35书券，连续第3天得40书券... 连续第7天及以上每天得60书券；")]),t._v(" "),n("div",{staticClass:"popup-text1"},[t._v("3、额外奖励：")]),t._v(" "),n("div",{staticClass:"popup-text1"},[t._v("连续签到10天，可额外奖励50书券")]),t._v(" "),n("div",{staticClass:"popup-text1"},[t._v("连续签到20天，可额外奖励100书券")]),t._v(" "),n("div",{staticClass:"popup-text1"},[t._v("连续签到30天，可额外奖励200书券")]),t._v(" "),n("div",{staticClass:"popup-text1"},[t._v("连续签到30天后，每过10天可额外奖励80书券")])])}]};var g=n("VU/8")(_,f,!1,function(t){n("T73w")},null,null);s.default=g.exports}});