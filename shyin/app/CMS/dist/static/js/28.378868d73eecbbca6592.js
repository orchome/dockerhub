webpackJsonp([28],{"7W8m":function(n,e,t){var r=t("NbCs");"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);t("rjj0")("59af3a0d",r,!0)},NbCs:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},kxZi:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("Xxa5"),a=t.n(r),o=t("exGp"),l=t.n(o),i=t("Dd8w"),s=t.n(i),u=t("NYxO"),c={components:{},mixins:[t("msXN").a],computed:s()({},Object(u.b)({}),{isEdit:function(){return!!this.$route.meta.edit}}),watch:{},data:function(){return{kefu:{},ruleForm:{id:"",domain:"",affiliation:1,type:2,product_type:1,pool_type:1,flag:""},rules:{domain:[{required:!0,validator:function(n,e,t){""==e?t(new Error("请输入域名")):/^(?=^.{3,255}$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$/.test(e)?t():t(new Error("请输入正确的域名"))},trigger:"blur"}],affiliation:[{required:!0,message:"请选择域名分类",trigger:"change"}]}}},created:function(){this.isEdit&&this.getEarlyWarningInfo(this.$route.params.id)},methods:{submitForm:function(){var n=this;this.$refs.ruleForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;var t=n._.cloneDeep(n.ruleForm);n.isEdit?n.putEarlyWarningUpdate(t):3==t.pool_type||3!=t.affiliation||t.flag?n.getDomainPoolIsUnique(t):n.$message({message:"请选择标记",type:"error"})})},putEarlyWarningUpdate:function(){var n=l()(a.a.mark(function n(e){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.triggerActionsFn("putEarlyWarningUpdate",e);case 2:200==n.sent.code&&(this.successMsgFn("修改成功"),this.resetForm());case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),getDomainPoolIsUnique:function(n){var e=this;this.$store.dispatch("getDomainPoolIsUnique",{domain:n.domain}).then(function(t){200==t.code&&e.postDomainCreate(n)})},postDomainCreate:function(){var n=l()(a.a.mark(function n(e){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.flag=e.flag||0,n.next=3,this.$store.dispatch("postDomainCreate",e);case 3:200==n.sent.code&&(this.successMsgFn("添加成功"),this.resetForm());case 5:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),resetForm:function(){this.$refs.ruleForm.resetFields(),this.closeSelectedTag("/domain/list")},getEarlyWarningInfo:function(){var n=l()(a.a.mark(function n(e){var t;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.triggerActionsFn("getEarlyWarningInfo",{id:e});case 2:200==(t=n.sent).code&&(this.ruleForm=t.data);case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),affiliationChange:function(n){5==n&&(this.ruleForm.type=2),3!=n&&(this.ruleForm.flag="")},poolTypeChange:function(n){3==n?(this.ruleForm.flag="",this.ruleForm.affiliation=""):this.ruleForm.affiliation=1}}},p={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:n.ruleForm,rules:n.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"域名",prop:"domain",required:""}},[t("el-input",{staticStyle:{width:"200px"},model:{value:n.ruleForm.domain,callback:function(e){n.$set(n.ruleForm,"domain",e)},expression:"ruleForm.domain"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"使用位置",prop:"pool_type"}},[t("div",[t("el-radio-group",{on:{change:n.poolTypeChange},model:{value:n.ruleForm.pool_type,callback:function(e){n.$set(n.ruleForm,"pool_type",e)},expression:"ruleForm.pool_type"}},[t("el-radio",{attrs:{label:1}},[n._v("通用域名池")]),n._v(" "),t("el-radio",{attrs:{label:3}},[n._v("灾备域名池")])],1)],1)]),n._v(" "),t("el-form-item",{attrs:{label:"域名类型"}},[t("el-radio-group",{model:{value:n.ruleForm.type,callback:function(e){n.$set(n.ruleForm,"type",e)},expression:"ruleForm.type"}},[t("el-radio",{attrs:{disabled:5==n.ruleForm.affiliation,label:1,value:1}},[n._v("中转域名")]),n._v(" "),t("el-radio",{attrs:{label:2,value:2}},[n._v("落地域名")])],1)],1),n._v(" "),3!=n.ruleForm.pool_type?t("el-form-item",{attrs:{label:"域名用途"}},[t("div",[t("el-radio-group",{on:{change:n.affiliationChange},model:{value:n.ruleForm.affiliation,callback:function(e){n.$set(n.ruleForm,"affiliation",e)},expression:"ruleForm.affiliation"}},[t("el-radio",{attrs:{label:1}},[n._v("微信菜单")]),n._v(" "),t("el-radio",{attrs:{label:2}},[n._v("推广链接")]),n._v(" "),t("el-radio",{attrs:{label:3}},[n._v("消息推送")]),n._v(" "),t("el-radio",{attrs:{label:4}},[n._v("平台活动")]),n._v(" "),t("el-radio",{attrs:{label:5}},[n._v("充值支付")])],1)],1)]):n._e(),n._v(" "),3!=n.ruleForm.pool_type&&3==n.ruleForm.affiliation?t("el-form-item",{attrs:{label:"标记"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:n.ruleForm.flag,callback:function(e){n.$set(n.ruleForm,"flag",e)},expression:"ruleForm.flag"}},[t("el-option",{attrs:{label:"其它交互触发",value:1}}),n._v(" "),t("el-option",{attrs:{label:"继续阅读",value:2}}),n._v(" "),t("el-option",{attrs:{label:"章节更新",value:3}}),n._v(" "),t("el-option",{attrs:{label:"智能托管",value:4}}),n._v(" "),t("el-option",{attrs:{label:"关注图文推送",value:5}}),n._v(" "),t("el-option",{attrs:{label:"群发推广",value:6}})],1)],1):n._e(),n._v(" "),t("el-form-item",{attrs:{label:"产品种类"}},[t("el-radio-group",{model:{value:n.ruleForm.product_type,callback:function(e){n.$set(n.ruleForm,"product_type",e)},expression:"ruleForm.product_type"}},[t("el-radio",{attrs:{label:1}},[n._v("小说")]),n._v(" "),t("el-radio",{attrs:{label:2}},[n._v("美图")])],1)],1),n._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(e){n.submitForm()}}},[n._v("添加")]),n._v(" "),t("el-button",{on:{click:function(e){n.resetForm()}}},[n._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var m=t("VU/8")(c,p,!1,function(n){t("7W8m")},null,null);e.default=m.exports}});