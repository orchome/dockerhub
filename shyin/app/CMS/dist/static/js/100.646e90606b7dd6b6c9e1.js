webpackJsonp([100],{"8GTd":function(n,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=a("Dd8w"),i=a.n(e),o=a("NYxO"),l=a("0xDb"),r=a("E4LH"),s={computed:i()({},Object(o.b)({tableData:"cmchannelBookIncome"})),watch:{},data:function(){return{loading:!1,id:"",params:{page:1},dialogParam:{dialogShow:!1,book_id:"",income:""}}},created:function(){this.$route.params&&this.$route.params.id&&(this.id=this.$route.params.id),this.getTableData()},methods:{getTableData:function(){var n=this,t=this.$route.params.id,a=this.$route.params.month,e=this._.cloneDeep(this.params);e.channel_id=t,e.year_month=a,this.loading=!0,this.$store.dispatch("cmChannelSetIncomeList",e).then(function(){n.loading=!1})},deleteItem:function(n){var t=this,a={id:n.id};Object(l.d)("确定要删除吗？").then(function(){t.$store.dispatch("cmChannleDeleteIncomeList",a).then(function(){Object(l.i)("删除成功"),t.getTableData()})}).catch(function(){t.getTableData()})},addItem:function(){var n=this;if(Object(r.b)(this.dialogParam.income)){var t=this._.cloneDeep(this.dialogParam);delete t.dialogShow,t.year_month=this.$route.params.month,t.channel_id=this.$route.params.id,this.$store.dispatch("cmChannelAddIncomeList",t).then(function(){Object(l.i)("添加成功"),n.dialogParam.dialogShow=!1,n.dialogParam.book_id="",n.dialogParam.income="",setTimeout(function(){n.getTableData()},1e3)})}else Object(l.i)("金额格式不对")},handleCurrentChange:function(n){this.params.page=n,this.getTableData()}}},c={render:function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"bar flex float-right"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(t){n.dialogParam.dialogShow=!0}}},[n._v("新增")])],1),n._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticStyle:{width:"100%","text-align":"center"},attrs:{data:n.tableData.data,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"book.book_id",label:"书籍Id","min-width":"80",fixed:"",align:"center"},scopedSlots:n._u([{key:"default",fn:function(t){return[a("div",[n._v(n._s(t.row.book_id))])]}}])}),n._v(" "),a("el-table-column",{attrs:{prop:"name",label:"书籍名称","min-width":"150","show-overflow-tooltip":"",align:"center"},scopedSlots:n._u([{key:"default",fn:function(t){return[a("div",[n._v(n._s(t.row.book?t.row.book.name:"-"))])]}}])}),n._v(" "),a("el-table-column",{attrs:{prop:"income",label:"销售收入","min-width":"120",align:"center"}}),n._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:n._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){n.deleteItem(t.row)}}},[n._v("删除")])]}}])})],1),n._v(" "),a("div",{staticClass:"pagination-container clearfix"},[a("div",{staticClass:"float-left"},[a("global-pagination",{attrs:{"current-page":n.params.page,"page-size":n.params.per_page,layout:"total, sizes, prev, pager, next, jumper",total:n.tableData.total},on:{"current-change":n.handleCurrentChange,"size-change":n.handleSizeChange}})],1)]),n._v(" "),a("el-dialog",{attrs:{title:"新增书籍",visible:n.dialogParam.dialogShow,center:"",top:"12%"},on:{"update:visible":function(t){n.$set(n.dialogParam,"dialogShow",t)}}},[a("el-form",{staticStyle:{width:"60%",height:"200px"}},[a("el-form-item",{attrs:{label:"书籍ID:"}},[a("el-input",{staticStyle:{width:"280px"},model:{value:n.dialogParam.book_id,callback:function(t){n.$set(n.dialogParam,"book_id",t)},expression:"dialogParam.book_id"}})],1),n._v(" "),a("el-form-item",{attrs:{label:"销售收入:"}},[a("el-input",{staticStyle:{width:"280px"},model:{value:n.dialogParam.income,callback:function(t){n.$set(n.dialogParam,"income",t)},expression:"dialogParam.income"}})],1)],1),n._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){n.dialogParam.dialogShow=!1}}},[n._v("取消")]),n._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:n.addItem}},[n._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(s,c,!1,function(n){a("PYOw")},null,null);t.default=d.exports},CMVw:function(n,t,a){(n.exports=a("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},PYOw:function(n,t,a){var e=a("CMVw");"string"==typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);a("rjj0")("6c9a1bc2",e,!0)}});