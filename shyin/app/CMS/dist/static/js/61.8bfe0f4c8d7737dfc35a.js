webpackJsonp([61],{"D/eL":function(n,e,t){var a=t("xpI0");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("775aeb0a",a,!0)},RPXf:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("mvHQ"),l=t.n(a),i=t("Xxa5"),r=t.n(i),s=t("exGp"),o=t.n(s),c=t("Dd8w"),p=t.n(c),u=t("NYxO"),d={props:{value:{type:String,default:"0"}},data:function(){return{val:""}},created:function(){this.val=this.value},methods:{selectChange:function(n){var e={arr:[],type:n};this.$emit("changeFn",e)}}},h={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"client-box"},[t("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0"}},[n._v("客户端：")]),n._v(" "),t("el-select",{attrs:{placeholder:"请选择"},on:{change:n.selectChange},model:{value:n.val,callback:function(e){n.val=e},expression:"val"}},[t("el-option",{attrs:{label:"全部",value:"0"}}),n._v(" "),t("el-option",{attrs:{label:"CPS分销",value:"5"}}),n._v(" "),t("el-option",{attrs:{label:"趣撸小程序",value:"8"}}),n._v(" "),t("el-option",{attrs:{label:"小优圈小程序",value:"9"}})],1)],1)},staticRenderFns:[]};var v={name:"operationBanner",components:{clientType:t("VU/8")(d,h,!1,function(n){t("u7EJ")},null,null).exports},computed:p()({},Object(u.b)({operationBannerList:"operationBannerList"}),{multipleDeleteVisible:function(){return 0==this.multipleSelect.length&&(this.multipleDelete=!1),0===this.multipleSelect.length}}),watch:{},data:function(){return{banner_select_show:!1,typeParams:{type:"0",value:"1",options:[{value:"1",label:"十音书城"},{value:"2",label:"免费小说"}]},selectedOptions:["0"],options:[{value:"0",label:"全部"},{value:"1",label:"PC",children:[{value:"1",label:"首页"},{value:"2",label:"男频"},{value:"3",label:"女频"}]},{value:"2",label:"APP",children:[{value:"4",label:"男频"},{value:"5",label:"女频"},{value:"6",label:"完本"},{value:"7",label:"免费"}]},{value:"3",label:"H5",children:[{value:"8",label:"精选"},{value:"9",label:"男生"},{value:"10",label:"女生"},{value:"11",label:"推荐"}]},{value:"4",label:"小程序",children:[{value:"22",label:"男频"},{value:"23",label:"女频"}]},{value:"5",label:"美图C端H5",children:[{value:"16",label:"美图首页"}]},{value:"8",label:"美图小程序",children:[{value:"16",label:"美图首页"}]}],data:[{id:1}],loading:!1,sendType:[{id:0,name:"全部"},{id:1,name:"读者"},{id:2,name:"作者"},{id:3,name:"CPS账号"}],params:{client:"",adhibition:1,page:1,to_page:"",is_mt_miniprogram:1},total:0,size:20,multipleSelect:[],multipleDelete:!1,page:1,catchParams:{}}},created:function(){this.getBannerList(this.params)},activated:function(){this.getBannerList(this.catchParams)},deactivated:function(){},methods:{deleteBannerDelFn:function(){var n=o()(r.a.mark(function n(e){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("deleteBannerDel",{id:e});case 2:200==n.sent.code&&(this.$message({duration:1500,message:"删除成功",type:"success"}),this.getBannerList(this.params));case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),handleChange:function(n){var e={client:"",page:1,to_page:"",adhibition:this.params.adhibition};"0"!=n[0]&&(e.client=n[0],1==n.length?e.to_page="":e.to_page=n[1]),0==this.typeParams.type?(e.is_mt_miniprogram=1,delete e.client):(e.is_mt_miniprogram=1,e.client=this.typeParams.type),this.catchParams=e,this.params=e,this.getBannerList(e)},getBannerList:function(){var n=o()(r.a.mark(function n(e){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.loading=!0,n.next=3,this.$store.dispatch("getBannerList",e);case 3:this.loading=!1;case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),handleSelectionChange:function(n){var e=[];n.forEach(function(n){e.push(n.id)}),this.multipleSelect=e},multipleDeleteFn:function(){var n=this.multipleSelect.toString();this.deleteBannerDelFn(n)},handleCurrentChange:function(n){var e=l()(this.params),t=JSON.parse(e);t.page=n,0==this.typeParams.type?(t.is_mt_miniprogram=1,delete t.client):(t.is_mt_miniprogram=1,t.client=this.typeParams.type),this.getBannerList(t)},changeType:function(n){var e=n.type;this.typeParams.type=e,this.handleChange(this.selectedOptions)}}},m={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"bar flex"},[t("div",{staticClass:"flex-left"},[t("client-type",{attrs:{value:n.typeParams.type},on:{changeFn:n.changeType}}),n._v(" "),n.banner_select_show?t("label",{staticClass:"radio-label"},[n._v("banner位置:")]):n._e(),n._v(" "),n.banner_select_show?t("el-cascader",{attrs:{"change-on-select":"",options:n.options},on:{change:n.handleChange},model:{value:n.selectedOptions,callback:function(e){n.selectedOptions=e},expression:"selectedOptions"}}):n._e()],1),n._v(" "),t("div",{staticClass:"flex-right"},[t("router-link",{attrs:{to:"/pictureShop/banner_management/index/add"}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"}},[n._v("新增")])],1)],1)]),n._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticStyle:{width:"100%","text-align":"center"},attrs:{data:n.operationBannerList.data,border:"",stripe:"",multipleTable:""},on:{"selection-change":n.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),n._v(" "),t("el-table-column",{attrs:{prop:"id",label:"序号","min-width":"80",fixed:""}}),n._v(" "),t("el-table-column",{attrs:{prop:"_client",label:"客户端","min-width":"120","show-overflow-tooltip":"",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{prop:"_page",label:"页面","min-width":"120","show-overflow-tooltip":"",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{prop:"pv",label:"总点击数(PV)","min-width":"120","show-overflow-tooltip":"",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"120","show-overflow-tooltip":"",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{prop:"created_at",label:"创建时间","min-width":"120","show-overflow-tooltip":"",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("router-link",{attrs:{to:"/pictureShop/banner_management/index/edit/"+e.row.id}},[t("el-button",{attrs:{size:"mini",type:"primary"}},[n._v("编辑")])],1),n._v(" "),t("el-popover",{attrs:{placement:"top",width:"100"},model:{value:e.row.delete,callback:function(t){n.$set(e.row,"delete",t)},expression:"scope.row.delete"}},[t("p",[n._v("确认删除选择的banner？")]),n._v(" "),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){e.row.delete=!1}}},[n._v("取消")]),n._v(" "),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){n.deleteBannerDelFn(e.row.id),e.row.delete=!1}}},[n._v("确定")])],1),n._v(" "),t("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(n){e.row.delete=!0}},slot:"reference"},[n._v("删除")])],1)]}}])})],1),n._v(" "),t("div",{staticClass:"pagination-container clearfix"},[t("div",{staticClass:"float-left mr-30"},[t("el-popover",{attrs:{placement:"top",width:"100"},model:{value:n.multipleDelete,callback:function(e){n.multipleDelete=e},expression:"multipleDelete"}},[t("p",[n._v("确认删除选择的banner？")]),n._v(" "),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){n.multipleDelete=!1}}},[n._v("取消")]),n._v(" "),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){n.multipleDeleteFn(),n.multipleDelete=!1}}},[n._v("确定")])],1),n._v(" "),t("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",disabled:n.multipleDeleteVisible},on:{click:function(e){n.multipleDelete=!0}},slot:"reference"},[n._v("删除")])],1)],1),n._v(" "),t("div",{staticClass:"float-left"},[t("global-pagination",{attrs:{"current-page":n.params.page,"page-size":n.params.per_page,layout:"total, sizes, prev, pager, next, jumper",total:n.operationBannerList.total},on:{"current-change":n.handleCurrentChange,"size-change":n.handleSizeChange}})],1)])],1)},staticRenderFns:[]};var b=t("VU/8")(v,m,!1,function(n){t("D/eL")},null,null);e.default=b.exports},qhmT:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n.client-box {\n  display: inline-block;\n}\n",""])},u7EJ:function(n,e,t){var a=t("qhmT");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("f48c49a6",a,!0)},xpI0:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});