webpackJsonp([161],{"/IDf":function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=r("Xxa5"),a=r.n(t),l=r("woOf"),o=r.n(l),i=r("exGp"),s=r.n(i),u=r("Dd8w"),m=r.n(u),c=r("NYxO"),d=r("5Vl1"),p=r("E4LH"),b={components:{UploadImg:d.a},computed:m()({},Object(c.b)({}),{pageType:function(){return this.$route.meta.type}}),watch:{},data:function(){var e=function(e,n,r){if(!Object(p.f)(n))return r(new Error("请输入正确的手机号码"));r()};return{data:[],userid:"",loading:!1,ruleForm:{},rules:{pen_name:[{required:!0,message:"请输入笔名",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:e,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{validator:function(e,n,r){if(!Object(p.d)(n))return r(new Error("请输入正确的邮箱地址"));r()},trigger:"blur"}],qq:[{required:!0,message:"请输入qq",trigger:"blur"}],real_name:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],id_card:[{required:!0,message:"请输入身份证",trigger:"blur"},{validator:function(e,n,r){if(!Object(p.a)(n))return r(new Error("请输入正确的身份证号"));r()},trigger:"blur"}],card_address:[{required:!0,message:"请输入身份证住址",trigger:"blur"}],bank:[{required:!0,message:"请输入开户银行",trigger:"blur"}],branchcard_address:[{required:!0,message:"请输入分行名称",trigger:"blur"}],sub_branch:[{required:!0,message:"请输入支行名称",trigger:"blur"}],name:[{required:!0,message:"请输入开户人",trigger:"blur"}],bank_mobile:[{required:!0,message:"请输入预留手机号",trigger:"blur"},{validator:e,trigger:"blur"}],bank_card:[{required:!0,message:"请输入银行卡号",trigger:"blur"},{validator:function(e,n,r){if(!/^[0-9]{15,20}$/.test(n))return r(new Error("请输入正确的银行卡号"));r()},trigger:"blur"}],address:[{required:!0,message:"请输入现今居住地址",trigger:"blur"}]}}},created:function(){this.$route.params&&this.$route.params.id&&this.getAuthorSignShowFn(this.$route.params.id)},methods:{submitForm:function(e){var n=this,r=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;r.postAuthorSignUpdate(n._.cloneDeep(n.ruleForm))})},resetForm:function(e){this.$refs[e].resetFields(),this.$router.push("/authorManage/signed")},getAuthorSignShowFn:function(){var e=s()(a.a.mark(function e(n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("getAuthorSignShow",{id:n});case 2:200==(r=e.sent).code&&(this.data=r.data.record.map(function(e){return e.admin_name=e.admin?e.admin.name:"-",e}),this.userid=r.data.user?r.data.user.id:"",this.ruleForm=o()(r.data.bank,r.data.apply_author,r.data.user),delete this.ruleForm.id,this.ruleForm.photo&&(this.ruleForm.photo=this.ruleForm.photo.getImgHash()),this.ruleForm.photo_face&&(this.ruleForm.photo_face=this.ruleForm.photo_face.getImgHash()));case 4:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}(),postAuthorSignUpdate:function(){var e=s()(a.a.mark(function e(n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=this.$route.params.id,n.user_id=this.userid,n.photo="http://res.shiyin.net/"+n.photo,n.photo_face="http://res.shiyin.net/"+n.photo_face,e.next=6,this.$store.dispatch("postAuthorSignUpdate",n);case 6:200==e.sent.code&&(this.$message({duration:1500,message:"修改成功！",type:"success"}),this.resetForm("ruleForm"));case 8:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}()}},f={render:function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"app-container"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"笔名",prop:"pen_name"}},[r("el-input",{model:{value:e.ruleForm.pen_name,callback:function(n){e.$set(e.ruleForm,"pen_name",n)},expression:"ruleForm.pen_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[r("el-input",{model:{value:e.ruleForm.mobile,callback:function(n){e.$set(e.ruleForm,"mobile",n)},expression:"ruleForm.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"性别"}},[r("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.ruleForm.sex,callback:function(n){e.$set(e.ruleForm,"sex",n)},expression:"ruleForm.sex"}},[r("el-option",{attrs:{label:"保密",value:0}}),e._v(" "),r("el-option",{attrs:{label:"男",value:1}}),e._v(" "),r("el-option",{attrs:{label:"女",value:2}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"常用邮箱",prop:"email"}},[r("el-input",{model:{value:e.ruleForm.email,callback:function(n){e.$set(e.ruleForm,"email",n)},expression:"ruleForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"QQ号",prop:"qq"}},[r("el-input",{model:{value:e.ruleForm.qq,callback:function(n){e.$set(e.ruleForm,"qq",n)},expression:"ruleForm.qq"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"真实姓名",prop:"real_name"}},[r("el-input",{model:{value:e.ruleForm.real_name,callback:function(n){e.$set(e.ruleForm,"real_name",n)},expression:"ruleForm.real_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"身份证",prop:"id_card"}},[r("el-input",{model:{value:e.ruleForm.id_card,callback:function(n){e.$set(e.ruleForm,"id_card",n)},expression:"ruleForm.id_card"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"身份证住址",prop:"card_address"}},[r("el-input",{model:{value:e.ruleForm.card_address,callback:function(n){e.$set(e.ruleForm,"card_address",n)},expression:"ruleForm.card_address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"开户银行",prop:"bank"}},[r("el-input",{model:{value:e.ruleForm.bank,callback:function(n){e.$set(e.ruleForm,"bank",n)},expression:"ruleForm.bank"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"分行名称",prop:"branch"}},[r("el-input",{model:{value:e.ruleForm.branch,callback:function(n){e.$set(e.ruleForm,"branch",n)},expression:"ruleForm.branch"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"支行名称",prop:"sub_branch"}},[r("el-input",{model:{value:e.ruleForm.sub_branch,callback:function(n){e.$set(e.ruleForm,"sub_branch",n)},expression:"ruleForm.sub_branch"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"开户人",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(n){e.$set(e.ruleForm,"name",n)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"预留手机号",prop:"bank_mobile"}},[r("el-input",{model:{value:e.ruleForm.bank_mobile,callback:function(n){e.$set(e.ruleForm,"bank_mobile",n)},expression:"ruleForm.bank_mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"银行卡号",prop:"bank_card"}},[r("el-input",{model:{value:e.ruleForm.bank_card,callback:function(n){e.$set(e.ruleForm,"bank_card",n)},expression:"ruleForm.bank_card"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"现今居住地址",prop:"address"}},[r("el-input",{model:{value:e.ruleForm.address,callback:function(n){e.$set(e.ruleForm,"address",n)},expression:"ruleForm.address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"身份证上传",required:""}},[r("upload-img",{attrs:{picture:e.ruleForm.photo_face},on:{"update:picture":function(n){e.$set(e.ruleForm,"photo_face",n)}}},[e._v("上传正面")]),e._v(" "),r("upload-img",{attrs:{picture:e.ruleForm.photo},on:{"update:picture":function(n){e.$set(e.ruleForm,"photo",n)}}},[e._v("上传反面")])],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(n){e.submitForm("ruleForm")}}},[e._v("修改并重传合同")]),e._v(" "),r("el-button",{on:{click:function(n){e.resetForm("ruleForm")}}},[e._v("返回")])],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:11,offset:1}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.data,border:"",stripe:""}},[r("el-table-column",{attrs:{prop:"created_at",label:"时间","min-width":"80",fixed:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"content",label:"操作","min-width":"150","show-overflow-tooltip":"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"mark",label:"理由","min-width":"120","show-overflow-tooltip":"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"admin_name",label:"审批人","min-width":"120","show-overflow-tooltip":"",align:"center"}})],1)],1)],1)],1)},staticRenderFns:[]};var h=r("VU/8")(b,f,!1,function(e){r("0XYv")},null,null);n.default=h.exports},"0XYv":function(e,n,r){var t=r("dwQk");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);r("rjj0")("2ab1f25e",t,!0)},dwQk:function(e,n,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});