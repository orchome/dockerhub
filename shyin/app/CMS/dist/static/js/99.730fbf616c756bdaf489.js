webpackJsonp([99],{"9AeH":function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"\n.el-tag + .el-tag {\r\n  margin-left: 10px;\n}\n.button-new-tag {\r\n  margin-left: 10px;\r\n  height: 24px;\r\n  line-height: 24px;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  -webkit-transform: translateY(2px);\r\n          transform: translateY(2px);\n}\n.zeroSensitive {\r\n  margin-left: 0px;\n}\n.input-new-tag {\r\n  width: 90px;\r\n  margin-left: 10px;\r\n  vertical-align: bottom;\n}\n.sensitiveTagsWrap .el-tag {\r\n  margin-bottom: 10px;\n}\r\n",""])},MC1X:function(e,t,i){var n=i("9AeH");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("a1854f02",n,!0)},blSz:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Xxa5"),a=i.n(n),s=i("exGp"),l=i.n(s),r=i("Dd8w"),o=i.n(r),u=i("NYxO"),c={name:"novelManageSensitiveList",computed:o()({multipleDeleteVisible:function(){return 0===this.multipleSelect.length}},Object(u.b)({wordList:"wordList"})),watch:{},data:function(){return{isEdit:!1,dialogTableVisible:!1,level:"0",loading:!1,visible2:!1,params:{page:1},multipleDelete:!1,multipleSelect:[],ruleForm:{name:"",type:"1"},sensitiveTags:[],inputVisible:!1,inputValue:"",editTag:{}}},created:function(){this.getWordListFn()},methods:{editFn:function(){var e=l()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.editTag=t,this.ruleForm={name:t.name,type:t.type},this.dialogTableVisible=!0,this.isEdit=!0;case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getWordListFn:function(){var e=l()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,(t=this._.cloneDeep(this.params)).type=this.level,e.next=5,this.$store.dispatch("getWordList",t);case 5:this.loading=!1;case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleSelectionChange:function(e){this.multipleSelect=e},deleteWordDelFn:function(){var e=l()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("deleteWordDel",{id:t});case 2:200==e.sent.code&&(this.$message({duration:1500,message:"删除成功！",type:"success"}),this.getWordListFn());case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),multipleDeleteFn:function(){var e=[];this.multipleSelect.forEach(function(t){e.push(t.id)}),this.deleteWordDelFn(e.toString())},submitForm:function(){var e=l()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEdit||0!==this.sensitiveTags.length){e.next=4;break}this.$message({duration:1500,message:"敏感词名称不能为空！",type:"warning"}),e.next=17;break;case 4:if(!this.isEdit){e.next=12;break}return t={name:this.ruleForm.name,type:this.ruleForm.type,id:this.editTag.id},e.next=8,this.$store.dispatch("postWordUpdate",t);case 8:200==e.sent.code&&(this.getWordListFn(),this.$message({duration:1500,message:"修改敏感词成功！",type:"success"}),this.dialogTableVisible=!1),e.next=17;break;case 12:return this.ruleForm.name=this.sensitiveTags.toString(),e.next=15,this.$store.dispatch("postWordCreate",this.ruleForm);case 15:200==e.sent.code&&(this.params.page=1,this.getWordListFn(),this.$message({duration:1500,message:"添加敏感词成功！",type:"success"}),this.sensitiveTags=[],this.dialogTableVisible=!1);case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleCurrentChange:function(e){this.params.page=e,this.getWordListFn()},handleClose:function(e){this.sensitiveTags.splice(this.sensitiveTags.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(){e.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=this.inputValue;e?-1==this.sensitiveTags.indexOf(e)?(this.sensitiveTags.push(e),this.inputVisible=!1,this.inputValue=""):this.$message({duration:1500,message:"敏感词重复！",type:"warning"}):(this.inputVisible=!1,this.inputValue="")}}},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"bar flex"},[i("div",{staticClass:"flex-left"},[i("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0"}},[e._v("敏感词级别")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择敏感词级别"},on:{change:e.getWordListFn},model:{value:e.level,callback:function(t){e.level=t},expression:"level"}},[i("el-option",{attrs:{label:"全部",value:"0"}}),e._v(" "),i("el-option",{attrs:{label:"一级敏感词",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"二级敏感词",value:"2"}})],1)],1),e._v(" "),i("div",{staticClass:"flex-right"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(t){e.dialogTableVisible=!0,e.isEdit=!1}}},[e._v("新增")])],1)]),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.wordList.data,border:"",stripe:"",multipleTable:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"敏感词","min-width":"80",fixed:""}}),e._v(" "),i("el-table-column",{attrs:{prop:"type",label:"敏感词级别","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.type?i("el-tag",{attrs:{type:"danger"}},[e._v("一级敏感词")]):i("el-tag",{attrs:{type:"warning"}},[e._v("二级敏感词")])]}}])}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){e.editFn(t.row)}}},[e._v("编辑")]),e._v(" "),i("el-popover",{attrs:{placement:"top",width:"100"},model:{value:t.row.delete,callback:function(i){e.$set(t.row,"delete",i)},expression:"scope.row.delete"}},[i("p",[e._v("确认删除选择的敏感词？")]),e._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delete=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){t.row.delete=!1,e.deleteWordDelFn(t.row.id)}}},[e._v("确定")])],1),e._v(" "),i("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(e){t.row.delete=!0}},slot:"reference"},[e._v("删除")])],1)]}}])})],1),e._v(" "),i("div",{staticClass:"pagination-container clearfix"},[i("div",{staticClass:"float-left mr-30"},[i("el-popover",{attrs:{placement:"top",width:"100"},model:{value:e.multipleDelete,callback:function(t){e.multipleDelete=t},expression:"multipleDelete"}},[i("p",[e._v("确认删除选择的敏感词？")]),e._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.multipleDelete=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.multipleDelete=!1,e.multipleDeleteFn()}}},[e._v("确定")])],1),e._v(" "),i("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",disabled:e.multipleDeleteVisible},on:{click:function(t){e.multipleDelete=!0}},slot:"reference"},[e._v("删除")])],1)],1),e._v(" "),i("div",{staticClass:"float-left"},[i("global-pagination",{attrs:{"current-page":e.params.page,"page-size":e.params.per_page,layout:"total, sizes, prev, pager, next, jumper",total:e.wordList.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)]),e._v(" "),i("el-dialog",{attrs:{title:"新增敏感词",visible:e.dialogTableVisible,width:"500px"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"敏感词名称"}},[e.isEdit?i("el-input",{attrs:{placeholder:"请输入敏感词"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}}):i("div",{staticClass:"sensitiveTagsWrap"},[e._l(e.sensitiveTags,function(t){return i("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1,size:"small"},on:{close:function(i){e.handleClose(t)}}},[e._v("\n              "+e._s(t)+"\n            ")])}),e._v(" "),e.inputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):i("el-button",{staticClass:"button-new-tag",class:{zeroSensitive:0===e.sensitiveTags.length},attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 敏感词")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"敏感词级别",prop:"type"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择活动区域"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[i("el-option",{attrs:{label:"一级敏感词",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"二级敏感词",value:"2"}})],1)],1),e._v(" "),i("el-form-item",[[i("div",{attrs:{right:""}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm()}}},[e._v("提交")]),e._v(" "),i("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取消")])],1)]],2)],1)],1)],1)},staticRenderFns:[]};var d=i("VU/8")(c,p,!1,function(e){i("MC1X")},null,null);t.default=d.exports}});