webpackJsonp([160],{"//Nu":function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},Nsbr:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("Xxa5"),i=t.n(a),o=t("exGp"),l=t.n(o),r=t("Dd8w"),s=t.n(r),c=t("NYxO"),p={name:"operationBooklist",computed:s()({},Object(c.b)({operationBookbarList:"operationBookbarList"}),{multipleDeleteVisible:function(){return 0==this.multipleSelect.length&&(this.multipleDelete=!1),0===this.multipleSelect.length}}),watch:{},data:function(){return{radio:"id",loading:!1,options:[{id:0,name:"全部"},{id:1,name:"男频书单"},{id:2,name:"女频书单"}],params:{sex:0,title:1,id:"",page:1},total:0,size:20,multipleSelect:[],multipleDelete:!1}},created:function(){console.log("created"),this.getBookbarListFn()},methods:{putBookbarUpdateFn:function(){var n=l()(i.a.mark(function n(e){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.sort.isNumber()){n.next=7;break}return n.next=3,this.$store.dispatch("putBookbarUpdate",{id:e.id,sort:e.sort});case 3:200==n.sent.code?this.$message({duration:1500,message:"修改成功！",type:"success"}):this.getBookbarListFn(),n.next=9;break;case 7:this.$message({duration:1500,message:"请输入正确的排序",type:"warning"}),this.getBookbarListFn();case 9:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),deleteBookbarDelFn:function(){var n=l()(i.a.mark(function n(e){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("deleteBookbarDel",{id:e});case 2:200==n.sent.code&&(this.$message({duration:1500,message:"删除成功！",type:"success"}),this.getBookbarListFn());case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),getBookbarListFn:function(){var n=l()(i.a.mark(function n(){var e;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return"id"==this.radio?this.params.title="":this.params.id="",this.loading=!0,0==(e=this._.cloneDeep(this.params)).sex&&delete e.sex,n.next=6,this.$store.dispatch("getBookbarList",e);case 6:this.loading=!1;case 7:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}(),handleSelectionChange:function(n){var e=[];n.forEach(function(n){e.push(n.id)}),this.multipleSelect=e},multipleDeleteFn:function(){var n=this.multipleSelect.toString();this.deleteBookbarDelFn(n)},handleCurrentChange:function(n){this.params.page=n,this.getBookbarListFn()},fuzzyQueryFn:function(){this.params.page=1,this.getBookbarListFn()}}},u={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"bar flex"},[t("div",{staticClass:"flex-left"},[t("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0"}},[n._v("书单性别")]),n._v(" "),t("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择书单性别"},on:{change:n.fuzzyQueryFn},model:{value:n.params.sex,callback:function(e){n.$set(n.params,"sex",e)},expression:"params.sex"}},n._l(n.options,function(n){return t("el-option",{key:n.id,attrs:{label:n.name,value:n.id}})}))],1),n._v(" "),t("div",{staticClass:"flex-right"},[t("label",{staticClass:"radio-label"},[t("el-radio",{attrs:{label:"id"},model:{value:n.radio,callback:function(e){n.radio=e},expression:"radio"}},[n._v("书单ID")]),n._v(" "),t("el-radio",{attrs:{label:"title"},model:{value:n.radio,callback:function(e){n.radio=e},expression:"radio"}},[n._v("书单名称")])],1),n._v(" "),t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"输入搜索内容",size:"mini","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(e){if(!("button"in e)&&n._k(e.keyCode,"enter",13,e.key))return null;n.fuzzyQueryFn(e)}},model:{value:n.params[n.radio],callback:function(e){n.$set(n.params,n.radio,e)},expression:"params[radio]"}}),n._v(" "),t("el-button",{staticClass:"search",attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:n.fuzzyQueryFn}},[n._v("搜索")]),n._v(" "),t("router-link",{attrs:{to:"/operationManage/booklist/add"}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"}},[n._v("新增")])],1)],1)]),n._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticStyle:{width:"100%","text-align":"center"},attrs:{data:n.operationBookbarList.data,border:"",stripe:"",multipleTable:""},on:{"selection-change":n.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),n._v(" "),t("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"80",fixed:""}}),n._v(" "),t("el-table-column",{attrs:{prop:"title",label:"书单名称","min-width":"150","show-overflow-tooltip":"",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{prop:"look_num",label:"查看数","min-width":"120",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{prop:"share_num",label:"分享数","min-width":"120","show-overflow-tooltip":"",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"120","show-overflow-tooltip":"",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"输入序号",type:"tel"},on:{change:function(t){n.putBookbarUpdateFn(e.row)}},model:{value:e.row.sort,callback:function(t){n.$set(e.row,"sort",t)},expression:"scope.row.sort"}})]}}])}),n._v(" "),t("el-table-column",{attrs:{prop:"sex",label:"书单性别","min-width":"120","show-overflow-tooltip":"",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return[1==e.row.sex?t("el-tag",[n._v("男频书单")]):2==e.row.sex?t("el-tag",{attrs:{type:"danger"}},[n._v("女频书单")]):t("span",[n._v("-")])]}}])}),n._v(" "),t("el-table-column",{attrs:{prop:"created_at",label:"创建时间","min-width":"120","show-overflow-tooltip":"",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("router-link",{attrs:{to:"/operationManage/booklist/edit/"+e.row.id}},[t("el-button",{attrs:{size:"mini",type:"primary"}},[n._v("编辑")])],1),n._v(" "),t("el-popover",{attrs:{placement:"top",width:"100"},model:{value:e.row.delete,callback:function(t){n.$set(e.row,"delete",t)},expression:"scope.row.delete"}},[t("p",[n._v("确认删除选择的书单？")]),n._v(" "),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){e.row.delete=!1}}},[n._v("取消")]),n._v(" "),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){n.deleteBookbarDelFn(e.row.id),e.row.delete=!1}}},[n._v("确定")])],1),n._v(" "),t("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(n){e.row.delete=!0}},slot:"reference"},[n._v("删除")])],1),n._v(" "),t("router-link",{attrs:{to:"/operationManage/booklist/binding/"+e.row.id}},[t("el-button",{attrs:{size:"mini",type:"warning"}},[n._v("绑定书籍")])],1)]}}])})],1),n._v(" "),t("div",{staticClass:"pagination-container clearfix"},[t("div",{staticClass:"float-left mr-30"},[t("el-popover",{attrs:{placement:"top",width:"100"},model:{value:n.multipleDelete,callback:function(e){n.multipleDelete=e},expression:"multipleDelete"}},[t("p",[n._v("确认删除选择的书单？")]),n._v(" "),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){n.multipleDelete=!1}}},[n._v("取消")]),n._v(" "),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){n.multipleDeleteFn(),n.multipleDelete=!1}}},[n._v("确定")])],1),n._v(" "),t("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",disabled:n.multipleDeleteVisible},on:{click:function(e){n.multipleDelete=!0}},slot:"reference"},[n._v("删除")])],1)],1),n._v(" "),t("div",{staticClass:"float-left"},[t("global-pagination",{attrs:{"current-page":n.params.page,"page-size":n.params.per_page,layout:"total, sizes, prev, pager, next, jumper",total:n.operationBookbarList.total},on:{"current-change":n.handleCurrentChange,"size-change":n.handleSizeChange}})],1)])],1)},staticRenderFns:[]};var d=t("VU/8")(p,u,!1,function(n){t("tooY")},null,null);e.default=d.exports},tooY:function(n,e,t){var a=t("//Nu");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("5b40835d",a,!0)}});