webpackJsonp([92],{grUA:function(n,t,e){var i=e("hfJI");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);e("rjj0")("8dcb0314",i,!0)},hfJI:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},nov9:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("Xxa5"),o=e.n(i),a=e("exGp"),r=e.n(a),l=e("RRo+"),s=e.n(l),c=e("Dd8w"),d=e.n(c),u=e("NYxO"),p={components:{GetAllBooks:e("qcO4").a},computed:d()({},Object(u.b)({operationBookbarBindList:"operationBookbarBindList",allBook:"allBook"}),{multipleDeleteVisible:function(){return 0==this.multipleSelect.length&&(this.multipleDelete=!1),0===this.multipleSelect.length},dialogTitle:function(){return"add"==this.dialogType?"新增书单书籍":"编辑书单书籍"}}),watch:{},data:function(){return{rules:{sort:[{validator:function(n,t,e){t||t+""=="0"||e(new Error("序号不能为空")),setTimeout(function(){s()(Number(t))?e():e(new Error("请输入数字值"))},1e3)},trigger:"blur"}]},dialogType:"add",dialogFormVisible:!1,form:{id:"",sort:"",book_id:""},loading:!1,params:{page:1,bl_id:""},size:20,multipleSelect:[],multipleDelete:!1,bookname:""}},created:function(){this.$store.dispatch("getAjaxGetBook"),this.params.bl_id=this.$route.params.id,this.getBookbarBindListFn()},methods:{addFn:function(){this.dialogType="add",this.form={id:"",sort:"",book_id:""},this.dialogFormVisible=!0},editFn:function(n){this.dialogType="edit",this.form={id:n.id,sort:n.sort,book_id:n.book_id},this.bookname=n.name,this.dialogFormVisible=!0},submitForm:function(n){var t=this,e=this;this.$refs[n].validate(function(n){if(!n)return console.log("error submit!!"),!1;if(""==t.form.book_id)t.$message({duration:1500,message:"请选择小说",type:"warning"});else{var i=e._.cloneDeep(e.form);i.bl_id=e.params.bl_id,"add"==e.dialogType?(delete i.id,t.putBookbarBindFn(i)):t.putBookbarBindUpdateFn(i)}})},putBookbarBindFn:function(){var n=r()(o.a.mark(function n(t){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("putBookbarBind",t);case 2:200==n.sent.code&&(this.$message({duration:1500,message:"添加成功",type:"success"}),this.goBackFn(),this.getBookbarBindListFn());case 4:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}(),putBookbarBindUpdateFn:function(){var n=r()(o.a.mark(function n(t){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("putBookbarBindUpdate",t);case 2:200==n.sent.code&&(this.$message({duration:1500,message:"修改成功",type:"success"}),this.goBackFn(),this.getBookbarBindListFn());case 4:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}(),resetForm:function(n){this.$refs[n].resetFields()},goBackFn:function(){this.resetForm("ruleForm"),this.dialogFormVisible=!1},getBookbarBindListFn:function(){var n=r()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.loading=!0,n.next=3,this.$store.dispatch("getBookbarBindList",this.params);case 3:this.loading=!1;case 4:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}(),handleSelectionChange:function(n){var t=[];n.forEach(function(n){t.push(n.id)}),this.multipleSelect=t},multipleDeleteFn:function(){var n=this.multipleSelect.toString();this.deleteBookbarBindDelFn(n)},deleteBookbarBindDelFn:function(){var n=r()(o.a.mark(function n(t){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("deleteBookbarBindDel",{id:t});case 2:200==n.sent.code&&(this.$message({duration:1500,message:"删除成功！",type:"success"}),this.getBookbarBindListFn());case 4:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}(),handleCurrentChange:function(n){this.params.page=n,this.getBookbarBindListFn()},fuzzyQueryFn:function(){this.params.page=1,this.getBookbarBindListFn()}}},m={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"app-container accounts-container"},[e("div",{staticClass:"bar clearfix"},[e("div",{staticClass:"float-right"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:n.addFn}},[n._v("新增")])],1)]),n._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticStyle:{width:"100%","text-align":"center"},attrs:{data:n.operationBookbarBindList.data,border:"",stripe:"",multipleTable:""},on:{"selection-change":n.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),n._v(" "),e("el-table-column",{attrs:{prop:"id",label:"序号","min-width":"80",fixed:""}}),n._v(" "),e("el-table-column",{attrs:{prop:"bookbarname",label:"书单名称","min-width":"150","show-overflow-tooltip":"",align:"center"}}),n._v(" "),e("el-table-column",{attrs:{prop:"bookbarsex",label:"书单性别","min-width":"120",align:"center"},scopedSlots:n._u([{key:"default",fn:function(t){return[1==t.row.bookbarsex?e("el-tag",[n._v("男频书单")]):2==t.row.bookbarsex?e("el-tag",{attrs:{type:"danger"}},[n._v("女频书单")]):e("span",[n._v("-")])]}}])}),n._v(" "),e("el-table-column",{attrs:{prop:"book_id",label:"小说ID","min-width":"120","show-overflow-tooltip":"",align:"center"}}),n._v(" "),e("el-table-column",{attrs:{prop:"name",label:"小说名称","min-width":"120","show-overflow-tooltip":"",align:"center"}}),n._v(" "),e("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"120","show-overflow-tooltip":"",align:"center"}}),n._v(" "),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){n.editFn(t.row)}}},[n._v("编辑")]),n._v(" "),e("el-popover",{attrs:{placement:"top",width:"100"},model:{value:t.row.delete,callback:function(e){n.$set(t.row,"delete",e)},expression:"scope.row.delete"}},[e("p",[n._v("确认删除选择的书籍？")]),n._v(" "),e("div",{staticStyle:{"text-align":"right",margin:"0"}},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){t.row.delete=!1}}},[n._v("取消")]),n._v(" "),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){n.deleteBookbarBindDelFn(t.row.id),t.row.delete=!1}}},[n._v("确定")])],1),n._v(" "),e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(n){t.row.delete=!0}},slot:"reference"},[n._v("删除")])],1)]}}])})],1),n._v(" "),e("div",{staticClass:"pagination-container clearfix"},[e("div",{staticClass:"float-left mr-30"},[e("el-popover",{attrs:{placement:"top",width:"100"},model:{value:n.multipleDelete,callback:function(t){n.multipleDelete=t},expression:"multipleDelete"}},[e("p",[n._v("确认删除选择的书籍？")]),n._v(" "),e("div",{staticStyle:{"text-align":"right",margin:"0"}},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){n.multipleDelete=!1}}},[n._v("取消")]),n._v(" "),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){n.multipleDeleteFn(),n.multipleDelete=!1}}},[n._v("确定")])],1),n._v(" "),e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",disabled:n.multipleDeleteVisible},on:{click:function(t){n.multipleDelete=!0}},slot:"reference"},[n._v("删除")])],1)],1),n._v(" "),e("div",{staticClass:"float-left"},[e("global-pagination",{attrs:{"current-page":n.params.page,"page-size":n.params.per_page,layout:"total, sizes, prev, pager, next, jumper",total:n.operationBookbarBindList.total},on:{"current-change":n.handleCurrentChange,"size-change":n.handleSizeChange}})],1)]),n._v(" "),e("el-dialog",{attrs:{title:n.dialogTitle,visible:n.dialogFormVisible},on:{"update:visible":function(t){n.dialogFormVisible=t}}},[e("el-form",{ref:"ruleForm",attrs:{model:n.form,"label-width":"120px",rules:n.rules}},[e("el-form-item",{attrs:{label:"小说名称"}},[e("get-all-books",{attrs:{visible:n.dialogFormVisible,"book-list":n.allBook,bookid:n.form.book_id,bookname:n.bookname},on:{"update:bookid":function(t){n.$set(n.form,"book_id",t)}}})],1),n._v(" "),e("el-form-item",{attrs:{label:"排序",prop:"sort"}},[e("el-input",{attrs:{autocomplete:"off",placeholder:"请输入序号"},model:{value:n.form.sort,callback:function(t){n.$set(n.form,"sort",t)},expression:"form.sort"}})],1)],1),n._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:n.goBackFn}},[n._v("取消")]),n._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(t){n.submitForm("ruleForm")}}},[n._v("提交")])],1)],1)],1)},staticRenderFns:[]};var f=e("VU/8")(p,m,!1,function(n){e("grUA")},null,null);t.default=f.exports}});