webpackJsonp([36],{Wz6V:function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,"\n.el-upload-list--picture-card .el-upload-list__item-status-label {\n  display: block !important;\n  right: -30px;\n  top: -12px;\n  width: 80px;\n  height: 48px;\n}\n.el-upload-list--picture-card .el-upload-list__item-status-label i {\n    font-size: 24px;\n    margin-top: 22px;\n}\n.el-upload-list--picture-card .el-upload-list__item-status-label .pay-icon {\n    top: 18px;\n    left: -2px;\n    font-size: 16px;\n    font-style: inherit;\n    position: relative;\n    color: red;\n}\n.el-upload-list--picture-card .el-upload-list__item-status-label .pay-icon.first {\n      color: #ff9900;\n}\n.picture-mark-wrap {\n  position: relative;\n}\n.picture-mark-wrap .mark {\n    position: absolute;\n    right: -10px;\n    z-index: 1000;\n    display: block;\n    width: 300px;\n    -webkit-transform: translate(100%, -100%);\n            transform: translate(100%, -100%);\n    font-size: 12px;\n    color: #606266;\n}\n.location-wrapper li {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  margin-bottom: 10px;\n}\n.location-wrapper li:last-child {\n    margin-bottom: 0;\n}\n.location-wrapper .location-item {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  margin-right: 10px;\n}\n.location-wrapper .location-text {\n  display: inline-block;\n  width: 100px;\n  color: #999999;\n  font-size: 14px;\n}\n.location-wrapper .location-text.sort {\n    width: 50px;\n}\n",""])},"d/nr":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Xxa5"),i=r.n(n),a=r("exGp"),o=r.n(a),s=r("Dd8w"),l=r.n(s),u=r("NYxO"),c=r("5Vl1"),p=r("pQT1"),m=r("msXN"),d=r("qwJR"),f={components:{UploadImg:c.a,MnqUploadImg:p.a,InputNumber:d.a},name:"",mixins:[m.a],computed:l()({},Object(u.b)({})),props:{},data:function(){return{rules:{position:[{required:!0,message:"请选择上架位置",trigger:"change"}],tag:[{type:"array",required:!0,message:"请至少选择一个标签",trigger:"change"}],title:[{required:!0,message:"请选择图册名称",trigger:"blur"}]},ruleForm:{pic:"",album_type:"",sort:"",position:"",tag:[],charge_node:"",title:""},cats:[]}},watch:{},methods:{getAllCat:function(){var t=o()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=void 0,1!=this.$route.meta.status_type){t.next=5;break}return t.next=4,this.triggerActionsFn("getMnqCategory",{is_all:1,status:1,client:1,is_miniprogram:1});case 4:e=t.sent;case 5:if(2!=this.$route.meta.status_type){t.next=9;break}return t.next=8,this.triggerActionsFn("getMnqCategory",{is_all:1,status:1,client:2,is_miniprogram:1});case 8:e=t.sent;case 9:if(this.$route.meta.status_type){t.next=13;break}return t.next=12,this.triggerActionsFn("getMnqCategory",{is_all:1,status:1});case 12:e=t.sent;case 13:200==e.code&&(this.cats=e.data);case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addFn:function(){var t=o()(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.album_type){t.next=3;break}return this.warningMsgFn("请选择CPS图片分类"),t.abrupt("return");case 3:if(""!=e.position){t.next=6;break}return this.warningMsgFn("请选择CPS上传位置"),t.abrupt("return");case 6:e.tag=e.tag.toString(),this.postPhotoFn(e);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),postPhotoFn:function(){var t=o()(i.a.mark(function t(e){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=void 0,t.next=3,this.triggerActionsFn("postLookPicEdit",e);case 3:(r=t.sent)&&200==r.code&&(this.successMsgFn("编辑组图成功"),this.resetForm("ruleForm"));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;if(e.ruleForm.pic.split(",").length<4)e.warningMsgFn("至少上传4张图片");else if(""!==e.ruleForm.pic){var r=e._.cloneDeep(e.ruleForm);r.is_miniprogram="1",e.$nextTick(function(){e.addFn(r)})}else e.warningMsgFn("请上传组图")})},resetForm:function(t){this.$refs[t].resetFields(),1==this.$route.meta.status_type&&this.closeSelectedTag("/pictureShop/boring_lu/picture_management"),2==this.$route.meta.status_type&&this.closeSelectedTag("/pictureShop/xiaoyouquan/picture_management"),this.$route.meta.status_type||this.closeSelectedTag("/pictureShop/content/index/sp")},getLookPicInfo:function(){var t=o()(i.a.mark(function t(e){var r,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("jkljkl"),t.next=3,this.triggerActionsFn("getLookPicInfo",{album_id:e,is_miniprogram:"1"});case 3:r=t.sent,n=[],Array.isArray(r.data.pic)&&r.data.pic.forEach(function(t){n.push(t.pic)}),this.ruleForm={pic:n.toString(),album_type:r.data.album_type,sort:r.data.position_sort,position:r.data.position,tag:r.data.tag,charge_node:Number(r.data.charge_node),title:r.data.title,album_id:r.data.id};case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},created:function(){this.getAllCat()},mounted:function(){this.getLookPicInfo(this.$route.params.id)}},g={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"lookpic-edit-tab"},[r("el-form",{ref:"ruleForm",attrs:{"label-position":"right","label-width":"100px",model:t.ruleForm,size:"small",rules:t.rules}},[r("el-form-item",{staticStyle:{width:"300px"},attrs:{prop:"title",label:"图册名称"}},[r("el-input",{attrs:{placeholder:"输入图册名称"},model:{value:t.ruleForm.title,callback:function(e){t.$set(t.ruleForm,"title",e)},expression:"ruleForm.title"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"上传组图",required:""}},[r("MnqUploadImg",{staticClass:"checkmnq",attrs:{picture:t.ruleForm.pic,"list-type":"picture-card-drag","class-name":"list",mnq:"",multiple:"","edit-visible":!1},on:{"update:picture":function(e){t.$set(t.ruleForm,"pic",e)}}})],1),t._v(" "),r("el-form-item",{attrs:{label:"上架位置"}},[r("el-select",{attrs:{placeholder:"请选择上架位置"},on:{change:function(e){t.ruleForm.sort=1}},model:{value:t.ruleForm.position,callback:function(e){t.$set(t.ruleForm,"position",e)},expression:"ruleForm.position"}},[r("el-option",{attrs:{label:"热门推荐",value:1}}),t._v(" "),r("el-option",{attrs:{label:"图册架",value:2}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"排序"}},[r("input-number",{attrs:{empty:2==t.ruleForm.position,sort:t.ruleForm.sort,min:1,max:1==t.ruleForm.position?6:1e10,text:1==t.ruleForm.position?"数值1-6整数，数字越小越排在前面":"请选择整数，最小为1，数字越小越排在后面"},on:{"update:sort":function(e){t.$set(t.ruleForm,"sort",e)}}})],1),t._v(" "),r("el-form-item",{attrs:{label:"图片分类",required:""}},[r("el-select",{attrs:{placeholder:"请选择图片分类"},model:{value:t.ruleForm.album_type,callback:function(e){t.$set(t.ruleForm,"album_type",e)},expression:"ruleForm.album_type"}},t._l(t.cats,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"开始收费节点"}},[r("input-number",{attrs:{empty:"",sort:t.ruleForm.charge_node,min:1,text:"选填，默认第三张"},on:{"update:sort":function(e){t.$set(t.ruleForm,"charge_node",e)}}})],1),t._v(" "),r("el-form-item",{attrs:{label:"标签",prop:"tag"}},[r("el-checkbox-group",{model:{value:t.ruleForm.tag,callback:function(e){t.$set(t.ruleForm,"tag",e)},expression:"ruleForm.tag"}},[r("el-checkbox",{attrs:{label:"0",name:"type"}},[t._v("普通")]),t._v(" "),r("el-checkbox",{attrs:{label:"1",name:"type"}},[t._v("火爆")])],1)],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),r("el-button",{attrs:{size:"small"},on:{click:function(e){t.resetForm("ruleForm")}}},[t._v("取消")])],1)],1)],1)])},staticRenderFns:[]};var h=r("VU/8")(f,g,!1,function(t){r("rx+X")},null,null);e.default=h.exports},"rx+X":function(t,e,r){var n=r("Wz6V");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);r("rjj0")("4180287c",n,!0)}});