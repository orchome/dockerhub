webpackJsonp([103],{"6uuy":function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},UEKy:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("//Fk"),s=e.n(a),o=e("Xxa5"),r=e.n(o),i=e("exGp"),l=e.n(i),u=e("Dd8w"),c=e.n(u),p=e("NYxO"),d=e("msXN"),h=e("TIfe"),v={name:"authorManageBook",computed:c()({},Object(p.b)({authorBookList:"authorBookList",categorySelect:"categorySelect"})),mixins:[d.a],watch:{},data:function(){return{serials:[{value:"100",label:"全部"},{value:"1",label:"连载中"},{value:"2",label:"暂停"},{value:"3",label:"完本"}],options:[{id:"id",name:"小说ID"},{id:"name",name:"小说名称"},{id:"pen_name",name:"作者笔名"}],signs:[{value:"100",label:"全部"},{value:"1",label:"全勤签约"},{value:"2",label:"保底签约"},{value:"3",label:"买断签约"}],radio:"id",selectedCategoryOptions:[0],states:[{value:"100",label:"全部状态"},{value:"0",label:"下架"},{value:"1",label:"上架"},{value:"2",label:"审核中"},{value:"3",label:"审核未通过"}],loading:!1,page:1,size:20,total:20,params:{page:1,sign:"100",status:"100",serial_status:"100",id:"",name:"",pen_name:"",mobile:"",cat_id:""},userParams:{},role_type:"",admin_id:""}},methods:{exportFn:function(){var n=this._.cloneDeep(this.userParams);n.role_type=this.role_type,n.admin_id=this.admin_id,this.exportExcelFn(n,"/admin/author/book_list_export","书籍列表")},changeGrateFn:function(){var n=l()(r.a.mark(function n(t){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.postAuthorBookGrateEditFn(t.id,t.grate);case 2:if(200!=n.sent.code){n.next=17;break}n.t0=t.grate,n.next="1"===n.t0?7:"2"===n.t0?9:"3"===n.t0?11:"4"===n.t0?13:15;break;case 7:return t.price=15,n.abrupt("break",17);case 9:return t.price=12,n.abrupt("break",17);case 11:return t.price=9,n.abrupt("break",17);case 13:return t.price=6,n.abrupt("break",17);case 15:return t.price=0,n.abrupt("break",17);case 17:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}(),getAuthorBookList:function(){var n=l()(r.a.mark(function n(){var t,e;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(e in this.loading=!0,t=this._.cloneDeep(this.params))100==t[e]&&(t[e]="");return t.role_type=this.role_type,t.admin_id=this.admin_id,n.next=7,this.$store.dispatch("getAuthorBookList",t);case 7:this.userParams=this._.cloneDeep(t),this.loading=!1;case 9:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}(),fuzzyQueryFn:function(){this.params.page=1,this.getAuthorBookList()},changeBookCategoryFn:function(n){this.params.cat_id=Number(n[n.length-1]),this.params.page=1,this.getAuthorBookList()},changeSearchTypeFn:function(n){for(var t in this.params)"id"!=t&&"mobile"!=t&&"pen_name"!=t||this.params[t]+""&&t!=n&&(this.params[t]="")},handleCurrentChange:function(n){this.params.page=n,this.getAuthorBookList()},changeBookStatusFn:function(n,t){var e=this;3==t?this.$prompt("请输入审核未通过原因","提示",{confirmButtonText:"确定",showCancelButton:!1,closeOnClickModal:!1,closeOnPressEscape:!1,showClose:!1}).then(function(a){var s=a.value;e.postAuthorBookStatusEditFn(n,t,s)}).catch(function(){}):this.postAuthorBookStatusEditFn(n,t)},postAuthorBookStatusEditFn:function(){var n=l()(r.a.mark(function n(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("postAuthorBookStatusEdit",{book_id:t,status:e,content:a});case 2:200==n.sent.code?this.$message({duration:1500,message:"修改成功！",type:"success"}):this.getAuthorBookList();case 4:case"end":return n.stop()}},n,this)}));return function(t,e){return n.apply(this,arguments)}}(),postAuthorBookPriceEdit:function(){var n=l()(r.a.mark(function n(t,e){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.isNumber()){n.next=3;break}return this.$message({duration:1500,message:"请输入正确的数值",type:"warning"}),n.abrupt("return");case 3:return n.next=5,this.$store.dispatch("postAuthorBookPriceEdit",{book_id:t,price:e});case 5:200==n.sent.code&&this.$message({duration:1500,message:"修改成功！",type:"success"}),this.getAuthorBookList();case 8:case"end":return n.stop()}},n,this)}));return function(t,e){return n.apply(this,arguments)}}(),postAuthorBookSerialStatusEditFn:function(){var n=l()(r.a.mark(function n(t,e){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("postAuthorBookSerialStatusEdit",{book_id:t,serial_status:e});case 2:200==n.sent.code?this.$message({duration:1500,message:"修改成功！",type:"success"}):this.getAuthorBookList();case 4:case"end":return n.stop()}},n,this)}));return function(t,e){return n.apply(this,arguments)}}(),postAuthorBookGrateEditFn:function(){var n=l()(r.a.mark(function n(t,e){var a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("postAuthorBookGrateEdit",{book_id:t,grate:e});case 2:return 200==(a=n.sent).code?this.$message({duration:1500,message:"修改成功！",type:"success"}):this.getAuthorBookList(),n.abrupt("return",new s.a(function(n){n(a)}));case 5:case"end":return n.stop()}},n,this)}));return function(t,e){return n.apply(this,arguments)}}(),postAuthorBookSignEdit:function(){var n=l()(r.a.mark(function n(t,e){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("postAuthorBookSignEdit",{book_id:t,sign:e});case 2:200==n.sent.code?this.$message({duration:1500,message:"修改成功！",type:"success"}):this.getAuthorBookList();case 4:case"end":return n.stop()}},n,this)}));return function(t,e){return n.apply(this,arguments)}}()},created:function(){var n=l()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.role_type=Object(h.d)().role_type,this.admin_id=Object(h.d)().admin_id,n.next=4,this.$store.dispatch("getCateList");case 4:this.getAuthorBookList();case 5:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}(),mounted:function(){}},m={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"app-container dropdown-container"},[e("div",{staticClass:"bar flex"},[e("div",{staticClass:"flex-left"},[e("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0"}},[n._v("书籍分类")]),n._v(" "),e("el-cascader",{staticStyle:{width:"120px"},attrs:{placeholder:"选择书籍分类",options:n.categorySelect,filterable:"","show-all-levels":!1},on:{change:n.changeBookCategoryFn},model:{value:n.selectedCategoryOptions,callback:function(t){n.selectedCategoryOptions=t},expression:"selectedCategoryOptions"}}),n._v(" "),e("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0"}},[n._v("书籍状态")]),n._v(" "),e("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择书籍状态"},on:{change:n.fuzzyQueryFn},model:{value:n.params.status,callback:function(t){n.$set(n.params,"status",t)},expression:"params['status']"}},n._l(n.states,function(n){return e("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})})),n._v(" "),e("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0"}},[n._v("签约类型")]),n._v(" "),e("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择签约类型"},on:{change:n.fuzzyQueryFn},model:{value:n.params.sign,callback:function(t){n.$set(n.params,"sign",t)},expression:"params['sign']"}},n._l(n.signs,function(n){return e("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})})),n._v(" "),e("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0"}},[n._v("连载状态")]),n._v(" "),e("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择连载状态"},on:{change:n.fuzzyQueryFn},model:{value:n.params.serial_status,callback:function(t){n.$set(n.params,"serial_status",t)},expression:"params['serial_status']"}},n._l(n.serials,function(n){return e("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),e("div",{staticClass:"flex-right"},[e("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择查询内容"},on:{change:n.changeSearchTypeFn},model:{value:n.radio,callback:function(t){n.radio=t},expression:"radio"}},n._l(n.options,function(n){return e("el-option",{key:n.id,attrs:{label:n.name,value:n.id}})})),n._v(" "),e("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入查询内容",size:"mini","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(t){if(!("button"in t)&&n._k(t.keyCode,"enter",13,t.key))return null;n.fuzzyQueryFn(t)}},model:{value:n.params[n.radio],callback:function(t){n.$set(n.params,n.radio,t)},expression:"params[radio]"}}),n._v(" "),e("el-button",{staticClass:"search",attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:n.fuzzyQueryFn}},[n._v("搜索")]),n._v(" "),e("el-button",{attrs:{type:"primary",icon:"el-icon-download",size:"mini"},on:{click:n.exportFn}},[n._v("导出excel")])],1)]),n._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:n.authorBookList.data,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"id",label:"小说ID","min-width":"80",fixed:""}}),n._v(" "),e("el-table-column",{attrs:{prop:"name",label:"小说名称","min-width":"120","show-overflow-tooltip":""}}),n._v(" "),e("el-table-column",{attrs:{prop:"pen_name",label:"作者笔名","min-width":"80","show-overflow-tooltip":""}}),n._v(" "),e("el-table-column",{attrs:{prop:"cat_name",label:"所属分类","min-width":"80"}}),n._v(" "),e("el-table-column",{attrs:{prop:"sign",label:"签约类型","min-width":"80"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){n.postAuthorBookSignEdit(t.row.id,t.row.sign)}},model:{value:t.row.sign,callback:function(e){n.$set(t.row,"sign",e)},expression:"scope.row.sign"}},[e("el-option",{attrs:{label:"无签约",value:0}}),n._v(" "),e("el-option",{attrs:{label:"全勤签约",value:1}}),n._v(" "),e("el-option",{attrs:{label:"保底签约",value:2}}),n._v(" "),e("el-option",{attrs:{label:"买断签约",value:3}})],1)]}}])}),n._v(" "),e("el-table-column",{attrs:{prop:"grate",label:"签约等级","min-width":"80",align:"center"},scopedSlots:n._u([{key:"default",fn:function(t){return[1==t.row.sign?e("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){n.changeGrateFn(t.row)}},model:{value:t.row.grate,callback:function(e){n.$set(t.row,"grate",e)},expression:"scope.row.grate"}},[e("el-option",{attrs:{label:"暂无等级",value:0}}),n._v(" "),e("el-option",{attrs:{label:"SS",value:1}}),n._v(" "),e("el-option",{attrs:{label:"S",value:2}}),n._v(" "),e("el-option",{attrs:{label:"A",value:3}}),n._v(" "),e("el-option",{attrs:{label:"B",value:4}})],1):e("span",[n._v("-")])]}}])}),n._v(" "),e("el-table-column",{attrs:{prop:"price",label:"千字价格","min-width":"80"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("el-input",{attrs:{placeholder:"请输入千字价格"},on:{change:function(e){n.postAuthorBookPriceEdit(t.row.id,t.row.price)}},model:{value:t.row.price,callback:function(e){n.$set(t.row,"price",e)},expression:"scope.row.price"}})]}}])}),n._v(" "),e("el-table-column",{attrs:{prop:"min_words",label:"保底字数","min-width":"80"},scopedSlots:n._u([{key:"default",fn:function(t){return[n._v(n._s(t.row.min_words?t.row.min_words:0))]}}])}),n._v(" "),e("el-table-column",{attrs:{prop:"status",label:"小说状态","min-width":"80"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){n.changeBookStatusFn(t.row.id,t.row.status)}},model:{value:t.row.status,callback:function(e){n.$set(t.row,"status",e)},expression:"scope.row.status"}},[e("el-option",{attrs:{label:"下架",value:0}}),n._v(" "),e("el-option",{attrs:{label:"上架",value:1}}),n._v(" "),e("el-option",{attrs:{label:"审核中",value:2}}),n._v(" "),e("el-option",{attrs:{label:"审核未通过",value:3}})],1)]}}])}),n._v(" "),e("el-table-column",{attrs:{prop:"serial_status",label:"连载状态","min-width":"80"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){n.postAuthorBookSerialStatusEditFn(t.row.id,t.row.serial_status)}},model:{value:t.row.serial_status,callback:function(e){n.$set(t.row,"serial_status",e)},expression:"scope.row.serial_status"}},[e("el-option",{attrs:{label:"连载中",value:1}}),n._v(" "),e("el-option",{attrs:{label:"暂停",value:2}}),n._v(" "),e("el-option",{attrs:{label:"完本",value:3}})],1)]}}])}),n._v(" "),e("el-table-column",{attrs:{prop:"word_count",label:"总字数","min-width":"120"}}),n._v(" "),e("el-table-column",{attrs:{prop:"amount",label:"总收入","min-width":"120"}}),n._v(" "),e("el-table-column",{attrs:{prop:"last_month_amount",label:"上月收入","min-width":"120"}}),n._v(" "),e("el-table-column",{attrs:{prop:"created_at",label:"操作","min-width":"90"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("router-link",{attrs:{to:"/authorManage/book/info/"+t.row.id}},[e("el-button",{attrs:{size:"mini",type:"primary"}},[n._v("书籍详情")])],1)]}}])})],1),n._v(" "),e("div",{staticClass:"pagination-container clearfix"},[e("div",{staticClass:"float-left"},[e("global-pagination",{attrs:{"current-page":n.params.page,"page-size":n.params.per_page,layout:"total, sizes, prev, pager, next, jumper",total:n.authorBookList.total},on:{"current-change":n.handleCurrentChange,"size-change":n.handleSizeChange}})],1)])],1)},staticRenderFns:[]};var f=e("VU/8")(v,m,!1,function(n){e("ryNT")},null,null);t.default=f.exports},ryNT:function(n,t,e){var a=e("6uuy");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("a582a35a",a,!0)}});