webpackJsonp([37],{OIPL:function(n,e,t){var r=t("eVLp");"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);t("rjj0")("77879fc3",r,!0)},XWza:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("Xxa5"),a=t.n(r),o=t("exGp"),l=t.n(o),i=t("RRo+"),u=t.n(i),s=t("Dd8w"),c=t.n(s),p=t("NYxO"),m=t("vU3h"),d=t("5Vl1"),v={components:{PonitTo:m.a,UploadImg:d.a},computed:c()({},Object(p.b)({}),{isEdit:function(){return"edit"==this.$route.meta.type},webPage:function(){var n=[];switch(this.ruleForm.client){case"2":n=[{value:"4",label:"男频"},{value:"5",label:"女频"},{value:"6",label:"完本"},{value:"7",label:"免费"}];break;case"3":n=[{value:"8",label:"精选"},{value:"9",label:"男生"},{value:"10",label:"女生"}];break;case"6":n=[{value:"17",label:"男频"},{value:"18",label:"女频"},{value:"19",label:"完本"}];break;default:n=[]}return n}}),watch:{},data:function(){return{ruleForm:{client:"",page:"",adhibition:"1",point:{to_type:"2",to_value:"",to_img:"",resolution:""},sort:""},client_arr:[{label:"PC",value:"1"},{label:"APP",value:"2"},{label:"H5",value:"3"},{label:"小程序",value:"4"},{label:"美图C端H5",value:"5"}],rules:{name:[{required:!0,message:"请输入功能区名称",trigger:"blur"},{min:1,max:4,message:"请输入4字以内的功能区名称",trigger:"blur"}],adhibition:[{required:!0,message:"请选择应用",trigger:"change"}],client:[{required:!0,message:"请选择客户端",trigger:"change"}],page:[{required:!0,message:"请选择页面",trigger:"change"}],sort:[{validator:function(n,e,t){e||e+""=="0"||t(new Error("序号不能为空")),setTimeout(function(){u()(Number(e))?t():t(new Error("请输入数字值"))},1e3)},trigger:"blur"}]}}},created:function(){this.isEdit&&this.getDomainInfo(this.$route.params.id)},methods:{getResolutionFn:function(n){this.ruleForm.point.resolution=n},changeClientFn:function(){this.ruleForm.page=""},submitForm:function(n){var e=this;this.$refs[n].validate(function(n){if(!n)return console.log("error submit!!"),!1;if(4!=e.ruleForm.point.to_type&&5!=e.ruleForm.point.to_type&&6!=e.ruleForm.point.to_type||""!=e.ruleForm.point.to_value)if(""==e.ruleForm.point.to_img)e.$message({duration:1500,message:"请上传图片",type:"warning"});else{var t=e._.cloneDeep(e.ruleForm);2!=t.point.to_type&&3!=t.point.to_type&&7!=t.point.to_type||delete t.point.to_value,e.isEdit?e.putDomainUpdateFn(t):e.putDomainAddFn(t)}else e.$message({duration:1500,message:"请输入正确的指向目标",type:"warning"})})},resetForm:function(n){this.$refs[n].resetFields()},goBackFn:function(){this.resetForm("ruleForm"),this.$router.push("/operationManage/ribbon")},putDomainUpdateFn:function(){var n=l()(a.a.mark(function n(e){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("putDomainUpdate",e);case 2:200==n.sent.code&&(this.$message({duration:1500,message:"修改成功",type:"success"}),this.goBackFn());case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),putDomainAddFn:function(){var n=l()(a.a.mark(function n(e){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("putDomainAdd",e);case 2:200==n.sent.code&&(this.$message({duration:1500,message:"添加成功",type:"success"}),this.goBackFn());case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),getDomainInfo:function(){var n=l()(a.a.mark(function n(e){var t;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("getDomainInfo",{id:e});case 2:t=n.sent,console.log("res",t),200==t.code&&(this.ruleForm={id:t.data.id,client:t.data.client+"",page:t.data.page+"",adhibition:t.data.adhibition+"",sort:t.data.sort,name:t.data.name,point:t.data.point?{to_type:t.data.point[0].to_type+"",to_value:t.data.point[0].to_value,to_img:t.data.point[0].to_img,resolution:t.data.point[0].resolution||""}:{to_type:"2",to_value:"",to_img:"",resolution:""}},this.client_arr=this.getClientArr());case 5:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),changeType:function(){this.client_arr=this.getClientArr(),this.ruleForm.client="",this.ruleForm.page=""},getClientArr:function(){var n=this.ruleForm.adhibition,e=[];return 1==n?e=[{label:"PC",value:"1"},{label:"APP",value:"2"},{label:"H5",value:"3"},{label:"小程序",value:"4"},{label:"美图C端H5",value:"5"}]:2==n&&(e=[{label:"客户端APP",value:"6"}]),e}}},g={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("div",{staticStyle:{width:"600px"}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:n.ruleForm,rules:n.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"选择应用",prop:"adhibition"}},[t("el-select",{attrs:{placeholder:"请选择应用"},on:{change:n.changeType},model:{value:n.ruleForm.adhibition,callback:function(e){n.$set(n.ruleForm,"adhibition",e)},expression:"ruleForm.adhibition"}},[t("el-option",{attrs:{label:"十音文学",value:"1"}}),n._v(" "),t("el-option",{attrs:{label:"免费小说",value:"2"}})],1)],1),n._v(" "),t("el-form-item",{attrs:{label:"选择客户端",prop:"client"}},[t("el-select",{attrs:{placeholder:"请选择客户端"},on:{change:n.changeClientFn},model:{value:n.ruleForm.client,callback:function(e){n.$set(n.ruleForm,"client",e)},expression:"ruleForm.client"}},n._l(n.client_arr,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{attrs:{label:"选择页面",prop:"page"}},[t("el-select",{attrs:{placeholder:"请选择页面"},model:{value:n.ruleForm.page,callback:function(e){n.$set(n.ruleForm,"page",e)},expression:"ruleForm.page"}},n._l(n.webPage,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{attrs:{label:"功能区名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入功能区名称"},model:{value:n.ruleForm.name,callback:function(e){n.$set(n.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"上传图片",required:""}},[t("upload-img",{attrs:{picture:n.ruleForm.point.to_img},on:{"update:picture":function(e){n.$set(n.ruleForm.point,"to_img",e)},getResolution:n.getResolutionFn}},[n._v("支持JPG、BMP、PNG、建议尺寸 50*50PX")])],1),n._v(" "),t("el-form-item",{attrs:{label:"排序",prop:"sort",required:""}},[t("el-input",{model:{value:n.ruleForm.sort,callback:function(e){n.$set(n.ruleForm,"sort",e)},expression:"ruleForm.sort"}})],1),n._v(" "),t("ponit-to",{attrs:{"to-type":n.ruleForm.point.to_type,"to-value":n.ruleForm.point.to_value,type:[5,2,3,4,6]},on:{"update:toType":function(e){n.$set(n.ruleForm.point,"to_type",e)},"update:toValue":function(e){n.$set(n.ruleForm.point,"to_value",e)}}}),n._v(" "),t("el-form-item",[t("el-button",{on:{click:function(e){n.goBackFn()}}},[n._v("返回")]),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(e){n.submitForm("ruleForm")}}},[n._v("保存")])],1)],1)],1)])},staticRenderFns:[]};var f=t("VU/8")(v,g,!1,function(n){t("OIPL")},null,null);e.default=f.exports},eVLp:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});