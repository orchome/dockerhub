webpackJsonp([45],{"+rzM":function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,"\n.el-upload-list--picture-card .el-upload-list__item-status-label {\n  display: block !important;\n  right: -30px;\n  top: -12px;\n  width: 80px;\n  height: 48px;\n}\n.el-upload-list--picture-card .el-upload-list__item-status-label i {\n    font-size: 24px;\n    margin-top: 22px;\n}\n.el-upload-list--picture-card .el-upload-list__item-status-label .pay-icon {\n    top: 18px;\n    left: -2px;\n    font-size: 16px;\n    font-style: inherit;\n    position: relative;\n    color: red;\n}\n.el-upload-list--picture-card .el-upload-list__item-status-label .pay-icon.first {\n      color: #ff9900;\n}\n.picture-mark-wrap {\n  position: relative;\n}\n.picture-mark-wrap .mark {\n    position: absolute;\n    right: -10px;\n    z-index: 1000;\n    display: block;\n    width: 300px;\n    -webkit-transform: translate(100%, -100%);\n            transform: translate(100%, -100%);\n    font-size: 12px;\n    color: #606266;\n}\n",""])},Ah6E:function(t,e,r){var n=r("+rzM");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);r("rjj0")("82a4bac6",n,!0)},NtL9:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("fZjL"),i=r.n(n),o=r("Xxa5"),s=r.n(o),a=r("exGp"),l=r.n(a),u=r("Dd8w"),c=r.n(u),p=r("NYxO"),d=r("5Vl1"),m=r("pQT1"),f=r("msXN"),h=r("qwJR"),v={components:{UploadImg:d.a,MnqUploadImg:m.a,InputNumber:h.a},name:"",mixins:[f.a],computed:c()({isEdit:function(){return this.$route.meta.edit}},Object(p.b)({})),props:{},data:function(){return{ruleForm:{title:"",cover_url:"",type:"1",sort:1,video_url:"",is_cps:1},rules:{title:[{required:!0,message:"请输入名字",trigger:"blur"}]}}},watch:{},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;if(""!==e.ruleForm.cover_url)if(""!==e.ruleForm.video_url){var r=e._.cloneDeep(e.ruleForm);e.isEdit?e.putPornVideoUpdate(r):e.postPornVideoCreate(r)}else e.warningMsgFn("请上传视频");else e.warningMsgFn("请上传封面")})},postPornVideoCreate:function(){var t=l()(s.a.mark(function t(e){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.is_cps=1,t.next=3,this.triggerActionsFn("postPornVideoCreate",e);case 3:(r=t.sent)&&200==r.code&&(this.successMsgFn("上传视频成功"),this.resetForm("ruleForm"));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),putPornVideoUpdate:function(){var t=l()(s.a.mark(function t(e){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.is_cps=1,t.next=3,this.triggerActionsFn("putPornVideoUpdate",e);case 3:(r=t.sent)&&200==r.code&&(this.successMsgFn("编辑视频成功"),this.resetForm("ruleForm"));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),resetForm:function(t){this.$refs[t].resetFields(),this.closeSelectedTag("/pictureShop/CPS/video")},getPornPicVideoInfo:function(){var t=l()(s.a.mark(function t(e){var r,n=this;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.triggerActionsFn("getPornPicVideoInfo",{id:e,is_cps:1});case 2:(r=t.sent)&&200==r.code&&(i()(this.ruleForm).forEach(function(t){n.ruleForm[t]=r.data[t]}),this.ruleForm.id=r.data.id,this.ruleForm.type=r.data.type+"");case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},created:function(){var t=l()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.isEdit&&this.getPornPicVideoInfo(this.$route.params.id);case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),mounted:function(){}},F={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"lookpic-edit-tab"},[r("el-form",{ref:"ruleForm",attrs:{"label-position":"right","label-width":"100px",model:t.ruleForm,size:"small",rules:t.rules}},[r("el-form-item",{staticStyle:{width:"300px"},attrs:{prop:"title",label:"名称"}},[r("el-input",{attrs:{placeholder:"视频标题"},model:{value:t.ruleForm.title,callback:function(e){t.$set(t.ruleForm,"title",e)},expression:"ruleForm.title"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"上传封面",required:""}},[r("upload-img",{attrs:{picture:t.ruleForm.cover_url,mnq:""},on:{"update:picture":function(e){t.$set(t.ruleForm,"cover_url",e)}}})],1),t._v(" "),r("el-form-item",{attrs:{label:"上传视频",required:""}},[r("upload-img",{attrs:{picture:t.ruleForm.video_url,accept:"audio/mp4, video/mp4",video:"",mnq:""},on:{"update:picture":function(e){t.$set(t.ruleForm,"video_url",e)}}})],1),t._v(" "),r("el-form-item",{attrs:{label:"视频类型"}},[r("el-radio-group",{model:{value:t.ruleForm.type,callback:function(e){t.$set(t.ruleForm,"type",e)},expression:"ruleForm.type"}},[r("el-radio",{attrs:{label:"1"}},[t._v("2D")]),t._v(" "),r("el-radio",{attrs:{label:"2"}},[t._v("VR")])],1)],1),t._v(" "),r("el-form-item",{staticStyle:{width:"250px"},attrs:{label:"排 序"}},[r("input-number",{attrs:{sort:t.ruleForm.sort,min:1,text:"请选择整数，最小为1，数字越小越排在后面"},on:{"update:sort":function(e){t.$set(t.ruleForm,"sort",e)}}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),r("el-button",{attrs:{size:"small"},on:{click:function(e){t.resetForm("ruleForm")}}},[t._v("取消")])],1)],1)],1)])},staticRenderFns:[]};var _=r("VU/8")(v,F,!1,function(t){r("Ah6E")},null,null);e.default=_.exports}});