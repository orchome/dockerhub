webpackJsonp([116],{"IC+k":function(t,e,a){var n=a("jFaP");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("78af08e7",n,!0)},Swlm:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),r=a("exGp"),o=a.n(r),s=a("RRo+"),l=a.n(s),c=a("Dd8w"),d=a.n(c),u=a("NYxO"),p={components:{NumberInput:a("jwbk").a},computed:d()({},Object(u.b)({}),{dialogTitle:function(){return this.add?"新增分类":"编辑分类"}}),watch:{},data:function(){return{disabled:!1,add:!0,booksOptions:[],loading:!1,params:{page:1,channel_id:""},dataList:{data:[],total:0},form:{id:"",cat_name:"",cat_id:""},rules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],cat_id:[{validator:function(t,e,a){if(!e)return a(new Error("分类ID"));setTimeout(function(){l()(Number(e))?Number(e)<0?a(new Error("必须大于0")):a():a(new Error("请输入数字值"))},1e3)},trigger:"blur"}]},dialogShow:!1}},created:function(){this.params.channel_id=this.$route.params.id,this.getListDataFn()},methods:{editFn:function(t){this.form=t,this.add=!1,this.dialogShow=!0},addFn:function(){this.add=!0,this.dialogShow=!0},submitForm:function(t){var e=this;this.disabled=!0,this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),e.disabled=!1,!1;var a=e._.cloneDeep(e.form);a.channel_id=e.params.channel_id,e.add?e.submitDataFn(a):e.submitDataFn(a,"putChannelCategoryUpdate")})},getListDataFn:function(){var t=o()(i.a.mark(function t(){var e,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this).loading=!0,t.next=4,e.triggerActionsFn("getChannelCategoryList",this.params);case 4:(a=t.sent)&&(this.dataList={data:a.data,total:a.total}),e.loading=!1;case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),handleCurrentChange:function(t){this.params.page=t,this.getListDataFn()},resetForm:function(t){this.dialogShow=!1,this.form={name:"",cat_id:""},this.$refs[t].resetFields()},submitDataFn:function(){var t=o()(i.a.mark(function t(e){var a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"putChannelCategoryAdd";return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.triggerActionsFn(n,e);case 2:a=t.sent,this.disabled=!1,200==a.code&&(this.successMsgFn("添加成功！"),this.getListDataFn(),this.resetForm("form"));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),deleteChannelCategoryDel:function(){var t=o()(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.triggerActionsFn("deleteChannelCategoryDel",{id:e});case 2:200==t.sent.code&&(this.successMsgFn("删除成功！"),this.getListDataFn());case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container push-pool"},[a("div",{staticClass:"bar flex"},[a("div",{staticClass:"flex-left"}),t._v(" "),a("div",{staticClass:"flex-right"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:t.addFn}},[t._v("新增")])],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","text-align":"center"},attrs:{data:t.dataList.data,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"cat_id",label:"分类ID",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cat_name",label:"分类名称","min-width":"100","show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:"/channelMana/channelBus/getBook/"+t.params.channel_id+"?cat_id="+e.row.cat_id+"&id="+e.row.id}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("拉取书籍列表")])],1),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.editFn(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-popover",{attrs:{placement:"top",width:"100"},model:{value:e.row.delete,callback:function(a){t.$set(e.row,"delete",a)},expression:"scope.row.delete"}},[a("p",[t._v("确认删除选择的内容？")]),t._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.delete=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.deleteChannelCategoryDel(e.row.id),e.row.delete=!1}}},[t._v("确定")])],1),t._v(" "),a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(t){e.row.delete=!0}},slot:"reference"},[t._v("删除")])],1)]}}])})],1),t._v(" "),a("div",{staticClass:"pagination-container clearfix"},[a("div",{staticClass:"float-left"},[a("global-pagination",{attrs:{"current-page":t.params.page,"page-size":t.params.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.dataList.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)]),t._v(" "),a("el-dialog",{staticClass:"push-pool-dialog dialog-500",attrs:{title:t.dialogTitle,visible:t.dialogShow,"close-on-press-escape":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogShow=e},closed:function(e){t.resetForm("form")}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"分类ID","label-width":"120px;",prop:"cat_id"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入分类ID"},model:{value:t.form.cat_id,callback:function(e){t.$set(t.form,"cat_id",e)},expression:"form.cat_id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分类名称","label-width":"120px;",prop:"cat_name"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入分类名称"},model:{value:t.form.cat_name,callback:function(e){t.$set(t.form,"cat_name",e)},expression:"form.cat_name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{disabled:t.disabled,type:"primary"},on:{click:function(e){t.submitForm("form")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,h,!1,function(t){a("IC+k")},null,null);e.default=f.exports},jFaP:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.push-pool .el-button + a {\n  margin-left: 0;\n}\n.push-pool-dialog .el-dialog {\n  width: 600px;\n}\n.push-pool-dialog .form-title .el-form-item__label {\n  width: 79px;\n}\n.push-pool-dialog .form-title .el-input {\n  width: 240px;\n}\n.push-pool-dialog .el-form-item__error {\n  left: 79px;\n}\n",""])}});