webpackJsonp([2],{"KA+o":function(n,t,e){var i=e("Kecy");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);e("rjj0")("938bdd30",i,!0)},Kecy:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},UkJk:function(n,t,e){var i=e("pcTr");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);e("rjj0")("53d56fca",i,!0)},X6KO:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("d7EF"),a=e.n(i),r=e("Xxa5"),s=e.n(r),o=e("exGp"),l=e.n(o),c=e("Dd8w"),u=e.n(c),d=e("NYxO"),m=e("5Vl1"),f=e("bD8L"),p={components:{UploadImg:m.a,DialogForm:f.a},computed:u()({},Object(d.b)({}),{dialogTitle:function(){return"add"==this.dialogType?"新增默认充值方案":"default-edit"==this.dialogType?"编辑默认充值方案":"编辑活动充值方案"}}),watch:{},data:function(){return{rules:{money:"",first_give:"",unfirst_give:""},dialogForm:{type:this.$route.meta.type,money:"",first_give:"",unfirst_give:""},dialogType:"add",dialogVisible:!1,time:[],defaultForm:{type:this.$route.meta.type,first_banner:"",unfirst_banner:""},activityForm:{type:this.$route.meta.type,act_first_banner:"",act_unfirst_banner:"",act_start:"",act_end:"",is_online:"1"},activeName:"1",data:[],loading:!1}},created:function(){this.getPayConfigList()},methods:{putPayConfigUpdate:function(){var n=l()(s.a.mark(function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"putPayConfigUpdate";return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch(e,t);case 2:200==n.sent.code&&(this.$message({duration:1500,message:"编辑成功",type:"success"}),this.dialogVisible=!1,this.getPayConfigList());case 4:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}(),putPayConfigCreate:function(){var n=l()(s.a.mark(function n(t){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("putPayConfigCreate",t);case 2:200==n.sent.code&&(this.$message({duration:1500,message:"添加方案成功",type:"success"}),this.dialogVisible=!1,this.getPayConfigList());case 4:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}(),submitFn:function(){if("add"==this.dialogType)this.putPayConfigCreate(this.dialogForm);else if("default-edit"==this.dialogType)this.putPayConfigUpdate(this.dialogForm);else{var n={type:this.dialogForm.type,money:this.dialogForm.money,act_first_give:this.dialogForm.first_give,act_unfirst_give:this.dialogForm.unfirst_give,id:this.dialogForm.id};this.putPayConfigUpdate(n,"putPayConfigUpdateAct")}},addFn:function(){this.dialogType="add",this.dialogForm={type:this.$route.meta.type,money:"",first_give:"",unfirst_give:""},this.dialogVisible=!0},editFn:function(n){1==this.activeName?(this.dialogType="default-edit",this.dialogForm={type:this.$route.meta.type,money:n.money?Number(n.money):"",first_give:n.first_give?Number(n.first_give):"",unfirst_give:n.unfirst_give?Number(n.unfirst_give):"",id:n.id},this.dialogVisible=!0):(this.dialogType="activity-edit",this.dialogForm={type:this.$route.meta.type,money:n.money?Number(n.money):"",first_give:n.act_first_give?Number(n.act_first_give):"",unfirst_give:n.act_unfirst_give?Number(n.act_unfirst_give):"",id:n.id},this.dialogVisible=!0)},putPayConfigSaveFn:function(){var n=l()(s.a.mark(function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"putPayConfigSave";return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch(e,t);case 2:200==n.sent.code&&this.$message({duration:1500,message:"保存成功",type:"success"});case 4:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}(),getPayConfigList:function(){var n=l()(s.a.mark(function n(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route.meta.type;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.loading=!0,n.next=3,this.$store.dispatch("getPayConfigList",{type:e});case 3:t=n.sent,this.loading=!1,200==t.code&&(this.data=t.data.give,this.defaultForm={type:t.data.type,first_banner:t.data.first_banner||"",unfirst_banner:t.data.unfirst_banner||""},this.activityForm={type:t.data.type,act_first_banner:t.data.act_first_banner||"",act_unfirst_banner:t.data.act_unfirst_banner||"",act_start:t.data.act_start||"",act_end:t.data.act_end||"",is_online:t.data.is_online+""||""},this.time=t.data.act_start&&t.data.act_end?[t.data.act_start,t.data.act_end]:[]);case 6:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}(),submitForm:function(n){if("defaultForm"==n)this.defaultForm.first_banner&&this.defaultForm.unfirst_banner?this.putPayConfigSaveFn(this.defaultForm):this.$message({duration:1500,message:"请上传正确的banner图",type:"warning"});else if(this.activityForm.act_first_banner&&this.activityForm.act_unfirst_banner)if(this.time){var t=a()(this.time,2);this.activityForm.act_start=t[0],this.activityForm.act_end=t[1],this.putPayConfigSaveFn(this.activityForm,"putPayConfigSaveAct")}else this.$message({duration:1500,message:"请选择活动时间",type:"warning"});else this.$message({duration:1500,message:"请上传正确的banner图",type:"warning"})},deletePayConfigDelFn:function(){var n=l()(s.a.mark(function n(t){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("deletePayConfigDel",{id:t});case 2:200==n.sent.code&&(this.$message({duration:1500,message:"删除成功",type:"success"}),this.getPayConfigList());case 4:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}()}},v={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"app-container"},[e("el-tabs",{model:{value:n.activeName,callback:function(t){n.activeName=t},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"充值页默认配置",name:"1"}}),n._v(" "),e("el-tab-pane",{attrs:{label:"充值页活动配置",name:"2"}})],1),n._v(" "),e("div",{staticClass:"bar"},[e("el-form",{directives:[{name:"show",rawName:"v-show",value:1==n.activeName,expression:"activeName==1"}],ref:"defaultForm",staticClass:"demo-ruleForm",attrs:{model:n.defaultForm,"label-width":"120px"}},[e("div",{staticClass:"flex",staticStyle:{display:"flex"}},[e("el-form-item",{attrs:{label:"首充banner"}},[e("upload-img",{attrs:{picture:n.defaultForm.first_banner},on:{"update:picture":function(t){n.$set(n.defaultForm,"first_banner",t)}}},[n._v("支持JPG、BMP、PNG、尺寸 750*200PX")])],1),n._v(" "),e("el-form-item",{attrs:{label:"非首充banner"}},[e("upload-img",{attrs:{picture:n.defaultForm.unfirst_banner},on:{"update:picture":function(t){n.$set(n.defaultForm,"unfirst_banner",t)}}},[n._v("支持JPG、BMP、PNG、尺寸 750*200PX")])],1)],1),n._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(t){n.submitForm("defaultForm")}}},[n._v("保存")])],1)],1),n._v(" "),e("el-form",{directives:[{name:"show",rawName:"v-show",value:1!=n.activeName,expression:"activeName!=1"}],ref:"activityForm",staticClass:"demo-ruleForm",attrs:{model:n.activityForm,"label-width":"120px"}},[e("div",{staticClass:"flex",staticStyle:{display:"flex"}},[e("el-form-item",{attrs:{label:"首充banner"}},[e("upload-img",{attrs:{picture:n.activityForm.act_first_banner},on:{"update:picture":function(t){n.$set(n.activityForm,"act_first_banner",t)}}},[n._v("支持JPG、BMP、PNG、尺寸 750*200PX")])],1),n._v(" "),e("el-form-item",{attrs:{label:"非首充banner"}},[e("upload-img",{attrs:{picture:n.activityForm.act_unfirst_banner},on:{"update:picture":function(t){n.$set(n.activityForm,"act_unfirst_banner",t)}}},[n._v("支持JPG、BMP、PNG、尺寸 750*200PX")])],1)],1),n._v(" "),e("el-form-item",{attrs:{label:"活动时间"}},[e("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:n.time,callback:function(t){n.time=t},expression:"time"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"是否上线"}},[e("el-radio-group",{model:{value:n.activityForm.is_online,callback:function(t){n.$set(n.activityForm,"is_online",t)},expression:"activityForm.is_online"}},[e("el-radio",{attrs:{label:"1"}},[n._v("是")]),n._v(" "),e("el-radio",{attrs:{label:"2"}},[n._v("否")])],1)],1),n._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(t){n.submitForm("activityForm")}}},[n._v("保存")])],1)],1)],1),n._v(" "),e("div",{staticClass:"bar clearfix"},[e("div",{staticClass:"float-right"},[1==n.activeName?e("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:n.addFn}},[n._v("新增")]):n._e()],1)]),n._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticStyle:{width:"100%","text-align":"center"},attrs:{data:n.data,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"id",label:"序号","min-width":"80",fixed:""}}),n._v(" "),e("el-table-column",{attrs:{prop:"money",label:"充值金额","min-width":"150","show-overflow-tooltip":"",align:"center"}}),n._v(" "),e("el-table-column",{attrs:{prop:1==n.activeName?"first_give":"act_first_give",label:"首充赠送书券","min-width":"120",align:"center"},scopedSlots:n._u([{key:"default",fn:function(t){return[1==n.activeName?e("span",[n._v(n._s(t.row.first_give?t.row.first_give:"-"))]):e("span",[n._v(n._s(t.row.act_first_give?t.row.act_first_give:"-"))])]}}])}),n._v(" "),e("el-table-column",{attrs:{prop:1==n.activeName?"unfirst_give":"act_unfirst_give",label:"非首充赠送书券","min-width":"120","show-overflow-tooltip":"",align:"center"},scopedSlots:n._u([{key:"default",fn:function(t){return[1==n.activeName?e("span",[n._v(n._s(t.row.unfirst_give?t.row.unfirst_give:"-"))]):e("span",[n._v(n._s(t.row.act_unfirst_give?t.row.act_unfirst_give:"-"))])]}}])}),n._v(" "),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){n.editFn(t.row)}}},[n._v("编辑")]),n._v(" "),1==n.activeName?e("el-popover",{attrs:{placement:"top",width:"100"},model:{value:t.row.delete,callback:function(e){n.$set(t.row,"delete",e)},expression:"scope.row.delete"}},[e("p",[n._v("确认删除选择的充值方案？")]),n._v(" "),e("div",{staticStyle:{"text-align":"right",margin:"0"}},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){t.row.delete=!1}}},[n._v("取消")]),n._v(" "),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){n.deletePayConfigDelFn(t.row.id),t.row.delete=!1}}},[n._v("确定")])],1),n._v(" "),e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(n){t.row.delete=!0}},slot:"reference"},[n._v("删除")])],1):n._e()]}}])})],1),n._v(" "),e("dialog-form",{attrs:{visible:n.dialogVisible,title:n.dialogTitle,model:n.dialogForm},on:{"update:visible":function(t){n.dialogVisible=t},valid:n.submitFn}},[e("el-form-item",{attrs:{label:"充值金额",prop:"money",rules:[{required:!0,message:"充值金额不能为空"},{type:"number",message:"充值金额必须为数字值"}]}},[e("el-input",{attrs:{placeholder:"请输入充值金额",disabled:1!=n.activeName},model:{value:n.dialogForm.money,callback:function(t){n.$set(n.dialogForm,"money",n._n("string"==typeof t?t.trim():t))},expression:"dialogForm.money"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"首充赠送书券",prop:"first_give",rules:[{required:!0,message:"首充赠送书券不能为空"},{type:"number",message:"首充赠送书券必须为数字值"}]}},[e("el-input",{attrs:{placeholder:"请输入首充赠送书券"},model:{value:n.dialogForm.first_give,callback:function(t){n.$set(n.dialogForm,"first_give",n._n("string"==typeof t?t.trim():t))},expression:"dialogForm.first_give"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"非首充赠送书券",prop:"unfirst_give",rules:[{required:!0,message:"非首充赠送书券不能为空"},{type:"number",message:"非首充赠送书券必须为数字值"}]}},[e("el-input",{attrs:{placeholder:"请输入非首充赠送书券"},model:{value:n.dialogForm.unfirst_give,callback:function(t){n.$set(n.dialogForm,"unfirst_give",n._n("string"==typeof t?t.trim():t))},expression:"dialogForm.unfirst_give"}})],1)],1)],1)},staticRenderFns:[]};var g=e("VU/8")(p,v,!1,function(n){e("KA+o")},null,null);t.default=g.exports},bD8L:function(n,t,e){"use strict";var i=e("Dd8w"),a=e.n(i),r=e("NYxO"),s={computed:a()({},Object(r.b)({})),watch:{visible:function(n){this.dialogVisible=n}},props:{title:{type:String,default:""},model:{type:Object,default:function(){}},rules:{type:Object,default:function(){}},visible:{type:Boolean,default:!1}},data:function(){return{dialogVisible:!1}},created:function(){},methods:{goBackFn:function(){this.resetForm("ruleForm"),this.dialogVisible=!1,this.$emit("update:visible",!1)},submitForm:function(n){var t=this;t.$refs[n].validate(function(n){if(!n)return console.log("error submit!!"),!1;t.$emit("valid")})},resetForm:function(n){this.$refs[n].resetFields()}}},o={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("el-dialog",{staticClass:"sy-dialog",attrs:{title:n.title,visible:n.dialogVisible,"close-on-press-escape":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){n.dialogVisible=t},closed:n.goBackFn}},[e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:n.model,rules:n.rules,"label-width":"120px"}},[n._t("default")],2),n._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:n.goBackFn}},[n._v("取 消")]),n._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(t){n.submitForm("ruleForm")}}},[n._v("确 定")])],1)],1)},staticRenderFns:[]};var l=e("VU/8")(s,o,!1,function(n){e("UkJk")},null,null);t.a=l.exports},pcTr:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n.sy-dialog > .el-dialog {\r\n  width: 500px;\n}\r\n",""])}});