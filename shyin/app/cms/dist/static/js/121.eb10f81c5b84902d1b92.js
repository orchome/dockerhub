webpackJsonp([121],{"9XVd":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=t("Xxa5"),s=t.n(l),i=t("exGp"),o=t.n(i),n=t("Dd8w"),r=t.n(n),p=t("NYxO"),c={name:"userListBuyHistory",computed:r()({},Object(p.b)({buyList:"buyList"}),{getTotal:function(){return 1==this.params.type?"消费总书币:":"消费总书券:"}}),watch:{"params.type":function(){this.getTableData(this.params.type)}},data:function(){return{loading:!1,params:{name:"",book_id:"",is_promote:"",consume_type:"",time:"",page:1,type:"1"},labelType:"消费书币"}},created:function(){this.getTableData(this.params.type)},methods:{getTableData:function(e){var a=this;return o()(s.a.mark(function t(){var l;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:l={user_id:a.$route.params.id,name:a.params.name,book_id:a.params.book_id,is_promote:a.params.is_promote,consume_type:a.params.consume_type,page:a.params.page},a.params.time&&(l.start_time=a.params.time[0],l.end_time=a.params.time[1]),2==a.params.type&&delete l.consume_type,a.loading=!0,1==e&&a.$store.dispatch("bookCoinList",l).then(function(){a.loading=!1}),2==e&&a.$store.dispatch("bookVoucherList",l).then(function(){a.loading=!1});case 6:case"end":return t.stop()}},t,a)}))()},handleCurrentChange:function(e){this.params.page=e,this.getTableData(this.params.type)},getSearch:function(){this.params.page=1,this.getTableData(this.params.type)},changeRadio:function(){this.labelType=1==this.params.type?"消费书币":"消费书券"}}},d={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"bar flex"},[t("div",{staticClass:"float-left"},[t("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0"}},[e._v("消费类型:")]),e._v(" "),t("el-radio-group",{on:{change:e.changeRadio},model:{value:e.params.type,callback:function(a){e.$set(e.params,"type",a)},expression:"params.type"}},[t("el-radio",{attrs:{label:"1"}},[e._v("书币消费")]),e._v(" "),t("el-radio",{attrs:{label:"2"}},[e._v("书券")])],1)],1)]),e._v(" "),t("div",{staticClass:"bar flex"},[t("div",{staticClass:"flex-left"},[t("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0"}},[e._v("小说ID:")]),e._v(" "),t("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"请输入小说ID",size:"mini"},nativeOn:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key))return null;e.getSearch(a)}},model:{value:e.params.book_id,callback:function(a){e.$set(e.params,"book_id",a)},expression:"params.book_id"}}),e._v(" "),t("label",{staticClass:"radio-label"},[e._v("小说名称:")]),e._v(" "),t("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"请输入小说名称",size:"mini"},nativeOn:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key))return null;e.getSearch(a)}},model:{value:e.params.name,callback:function(a){e.$set(e.params,"name",a)},expression:"params.name"}}),e._v(" "),t("label",{staticClass:"radio-label"},[e._v("时间:")]),e._v(" "),t("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.params.time,callback:function(a){e.$set(e.params,"time",a)},expression:"params.time"}}),e._v(" "),t("label",{staticClass:"radio-label"},[e._v("消费类型:")]),e._v(" "),t("el-select",{model:{value:e.params.consume_type,callback:function(a){e.$set(e.params,"consume_type",a)},expression:"params.consume_type"}},[t("el-option",{attrs:{value:"",label:"请选择"}},[e._v("请选择")]),e._v(" "),t("el-option",{attrs:{value:"2",label:"订阅消费"}},[e._v("订阅消费")]),e._v(" "),t("el-option",{attrs:{value:"3",label:"打赏消费",disabled:2==e.params.type}},[e._v("打赏消费")])],1),e._v(" "),t("label",{staticClass:"radio-label"},[e._v("消费渠道:")]),e._v(" "),t("el-select",{model:{value:e.params.is_promote,callback:function(a){e.$set(e.params,"is_promote",a)},expression:"params.is_promote"}},[t("el-option",{attrs:{value:"",label:"请选择"}},[e._v("请选择")]),e._v(" "),t("el-option",{attrs:{value:"1",label:"十音平台"}},[e._v("十音平台")]),e._v(" "),t("el-option",{attrs:{value:"2",label:"分销平台"}},[e._v("分销平台")])],1)],1),e._v(" "),t("div",{staticClass:"flex-right"},[t("el-button",{staticClass:"search",attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.getSearch}},[e._v("搜索")])],1)]),e._v(" "),t("div",{staticClass:"bar flex"},[t("div",{staticClass:"float-left"},[t("div",{staticClass:"total-box"},[e._v(e._s(e.getTotal)),t("span",[e._v(e._s(e.buyList.buyTotal))])])])]),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.buyList.data,border:"",stripe:""}},[t("el-table-column",{attrs:{label:"序号","min-width":"80",type:"index",fixed:"",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"book_id",label:"书籍ID","min-width":"80",fixed:"",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"book.name",label:"书籍名称","min-width":"150","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(a.row.book?a.row.book.name:"-"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"chapter_id",label:"章节ID","min-width":"120",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"chapter.name",label:"章节名称","min-width":"150","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(a.row.chapter?a.row.chapter.name:"-"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"user.channel_id",label:"消费渠道","min-width":"120","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(0==a.row.user.channel_id?"十音":"分销平台"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"type",label:"消费类型","min-width":"120","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(3==a.row.type?"打赏消费":"订阅消费"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"amount",label:e.labelType,"min-width":"120","show-overflow-tooltip":"",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"created_at",label:"创建时间","min-width":"120","show-overflow-tooltip":"",align:"center"}})],1),e._v(" "),t("div",{staticClass:"pagination-container clearfix"},[t("div",{staticClass:"float-left"},[t("global-pagination",{attrs:{"current-page":e.params.page,"page-size":e.params.per_page,layout:"total, sizes, prev, pager, next, jumper",total:e.buyList.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)])],1)},staticRenderFns:[]};var u=t("VU/8")(c,d,!1,function(e){t("i205")},"data-v-543b2c9a",null);a.default=u.exports},i205:function(e,a,t){var l=t("j6no");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);t("rjj0")("24889f41",l,!0)},j6no:function(e,a,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n.total-box span[data-v-543b2c9a] {\r\n  color: red;\r\n  font-size: 18px;\n}\r\n",""])}});