webpackJsonp([111],{g4cs:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},vIkn:function(n,e,t){var a=t("g4cs");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("f4bc20a6",a,!0)},wlPF:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("Xxa5"),l=t.n(a),s=t("exGp"),r=t.n(s),o=t("Dd8w"),i=t.n(o),c=t("NYxO"),u=t("0xDb"),p={name:"channelManaNovelList",computed:i()({},Object(c.b)({novelList:"novelList",categorySelect:"categorySelect",cqms_arr:"cmCqmsList"})),watch:{},data:function(){return{selectedItem:[],params:{id:"",name:"",cat_id:"",cqms_user_id:"",serial_status:"",status:"",page:1},arr_params:{status_arr:[{value:0,label:"下架"},{value:1,label:"上架"},{value:2,label:"审核中"},{value:3,label:"审核未通过"}],serial_arr:[{value:1,label:"连载"},{value:2,label:"暂停"},{value:3,label:"完本"}]},select_arr:[],loading:!1}},created:function(){this.getTableData(),this.getCqmsArr(),this.getBookCategory()},methods:{getTableData:function(){var n=this;return r()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n._.cloneDeep(n.params),n.loading=!0,n.$store.dispatch("getNovelList",t).then(function(){n.loading=!1});case 3:case"end":return e.stop()}},e,n)}))()},getCqmsArr:function(){var n=this;return r()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.$store.dispatch("getCqmsList",{});case 2:case"end":return e.stop()}},e,n)}))()},getBookCategory:function(){var n=this;return r()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.$store.dispatch("getCateList",{});case 2:case"end":return e.stop()}},e,n)}))()},handleCurrentChange:function(n){this.params.page=n,this.getTableData()},tableSelectChange:function(n){this.select_arr=n},getSearch:function(){this.params.page=1,this.getTableData()},changeStatus:function(n,e){var t="",a={id:n.id},l=this;if(1==e)t="确定要修改书籍状态吗?",a.field="status",a.value=n.status;else if(2==e)t="确定要修改连载状态吗？",a.field="serial_status",a.value=n.serial_status;else if(3==e){if(!/(^[1-9]\d*$)/.test(n.sort))return void Object(u.c)("序号必须为正整数");t="确定要修改排序吗？",a.field="sort",a.value=n.sort}Object(u.d)(t).then(function(){l.$store.dispatch("changeStatus",a).then(function(n){200==n.code&&(Object(u.i)("修改成功!","success"),setTimeout(function(){l.getTableData()},1e3))})}).catch(function(){l.getTableData()})},changeCategory:function(n){this.params.cat_id=Number(n[n.length-1]),this.getTableData()},upDownStatus:function(n){var e="",t="",a=this,l=this.select_arr,s={};0==n?e="确定要批量下架吗？":1==n&&(e="确定要批量上架吗?");for(var r=0;r<l.length;r++)t+=l[r].id+",";t=t.substring(0,t.length-1),s.field="status",s.value=n,s.id=t,Object(u.d)(e).then(function(){a.$store.dispatch("changeStatus",s).then(function(n){200==n.code&&(Object(u.i)("修改成功!","success"),setTimeout(function(){a.getTableData()},1e3))})}).catch(function(){a.getTableData()})},sortChange:function(n,e){return n.sort-e.sort}}},d={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"bar flex"},[t("div",{staticClass:"flex-left"},[t("label",{staticClass:"radio-label"},[n._v("小说ID:")]),n._v(" "),t("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"请输入小说ID",size:"mini"},nativeOn:{keyup:function(e){if(!("button"in e)&&n._k(e.keyCode,"enter",13,e.key))return null;n.getSearch(e)}},model:{value:n.params.id,callback:function(e){n.$set(n.params,"id",e)},expression:"params.id"}}),n._v(" "),t("label",{staticClass:"radio-label"},[n._v("小说名称:")]),n._v(" "),t("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"请输入小说名称",size:"mini"},nativeOn:{keyup:function(e){if(!("button"in e)&&n._k(e.keyCode,"enter",13,e.key))return null;n.getSearch(e)}},model:{value:n.params.name,callback:function(e){n.$set(n.params,"name",e)},expression:"params.name"}}),n._v(" "),t("label",{staticClass:"radio-label"},[n._v("所属分类:")]),n._v(" "),t("el-cascader",{attrs:{placeholder:"选择书籍分类",options:n.categorySelect,filterable:"","show-all-levels":!1},on:{change:n.changeCategory},model:{value:n.selectedItem,callback:function(e){n.selectedItem=e},expression:"selectedItem"}}),n._v(" "),t("label",{staticClass:"radio-label"},[n._v("内容商:")]),n._v(" "),t("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择内容商"},on:{change:n.getTableData},model:{value:n.params.cqms_user_id,callback:function(e){n.$set(n.params,"cqms_user_id",e)},expression:"params.cqms_user_id"}},[t("el-option",{attrs:{value:"",label:"请选择"}},[n._v("请选择")]),n._v(" "),n._l(n.cqms_arr,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})})],2),n._v(" "),t("label",{staticClass:"radio-label"},[n._v("小说状态:")]),n._v(" "),t("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择小说状态"},on:{change:n.getTableData},model:{value:n.params.status,callback:function(e){n.$set(n.params,"status",e)},expression:"params.status"}},[t("el-option",{attrs:{label:"请选择",value:""}},[n._v("请选择")]),n._v(" "),n._l(n.arr_params.status_arr,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})})],2),n._v(" "),t("label",{staticClass:"radio-label"},[n._v("连载状态:")]),n._v(" "),t("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择连载状态"},on:{change:n.getTableData},model:{value:n.params.serial,callback:function(e){n.$set(n.params,"serial",e)},expression:"params.serial"}},[t("el-option",{attrs:{label:"请选择",value:""}},[n._v("请选择")]),n._v(" "),n._l(n.arr_params.serial_arr,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})})],2)],1),n._v(" "),t("div",{staticClass:"flex-right"},[t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:n.getSearch}},[n._v("查询")])],1)]),n._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticStyle:{width:"100%","text-align":"center"},attrs:{data:n.novelList.data,border:"",stripe:"","default-sort":{prop:"id",order:"ascending"}},on:{"selection-change":n.tableSelectChange}},[t("el-table-column",{attrs:{type:"selection",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"80",fixed:"",align:"center",sortable:""}}),n._v(" "),t("el-table-column",{attrs:{prop:"name",label:"小说名称","min-width":"150","show-overflow-tooltip":"",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{prop:"user.nickname",label:"作者笔名","min-width":"120",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("div",[n._v(n._s(e.row.user?e.row.user.nickname:"-"))])]}}])}),n._v(" "),t("el-table-column",{attrs:{prop:"word_count",label:"小说字数","min-width":"120","show-overflow-tooltip":"",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{prop:"category",label:"分类","min-width":"120","show-overflow-tooltip":"",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("div",[n._v(n._s(e.row.category?e.row.category.cat_name:"-"))])]}}])}),n._v(" "),t("el-table-column",{attrs:{prop:"contain_bus",label:"内容商","min-width":"120","show-overflow-tooltip":"",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("div",[n._v(n._s(e.row.cqms_user?e.row.cqms_user.name:"-"))])]}}])}),n._v(" "),t("el-table-column",{attrs:{prop:"status",label:"小说状态","min-width":"120",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("div",[t("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择小说状态"},on:{change:function(t){n.changeStatus(e.row,1)}},model:{value:e.row.status,callback:function(t){n.$set(e.row,"status",t)},expression:"scope.row.status"}},n._l(n.arr_params.status_arr,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1)]}}])}),n._v(" "),t("el-table-column",{attrs:{prop:"serial_status",label:"连载状态","min-width":"120",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("div",[t("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择小说状态"},on:{change:function(t){n.changeStatus(e.row,2)}},model:{value:e.row.serial_status,callback:function(t){n.$set(e.row,"serial_status",t)},expression:"scope.row.serial_status"}},[t("el-option",{attrs:{value:"0",label:"未知"}},[n._v("未知")]),n._v(" "),n._l(n.arr_params.serial_arr,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})})],2)],1)]}}])}),n._v(" "),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"120","show-overflow-tooltip":"",align:"center",sortable:""},on:{"sort-method":n.sortChange},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-input",{staticStyle:{width:"80px","text-align":"center"},nativeOn:{keyup:function(t){if(!("button"in t)&&n._k(t.keyCode,"enter",13,t.key))return null;n.changeStatus(e.row,3)}},model:{value:e.row.sort,callback:function(t){n.$set(e.row,"sort",t)},expression:"scope.row.sort"}})]}}])}),n._v(" "),t("el-table-column",{attrs:{prop:"created_at",label:"创建时间","min-width":"120","show-overflow-tooltip":"",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("router-link",{attrs:{to:"/channelMana/novelList/getMoney/"+e.row.id}},[t("el-button",{attrs:{size:"mini",type:"primary"}},[n._v("收入详情")])],1)]}}])})],1),n._v(" "),t("div",{staticClass:"btn-box clearfix",staticStyle:{"margin-top":"20px"}},[t("el-button",{attrs:{type:"primary",disabled:0==n.select_arr.length},on:{click:function(e){n.upDownStatus(1)}}},[n._v("批量上架")]),n._v(" "),t("el-button",{attrs:{type:"danger",disabled:0==n.select_arr.length},on:{click:function(e){n.upDownStatus(0)}}},[n._v("批量下架")])],1),n._v(" "),t("div",{staticClass:"pagination-container"},[t("div",{staticClass:"float-left"},[t("global-pagination",{attrs:{"page-size":n.params.per_page,"current-page":n.params.page,layout:"total, sizes, prev, pager, next, jumper",total:n.novelList.total},on:{"current-change":n.handleCurrentChange,"size-change":n.handleSizeChange}})],1)])],1)},staticRenderFns:[]};var v=t("VU/8")(p,d,!1,function(n){t("vIkn")},"data-v-61b3931a",null);e.default=v.exports}});