webpackJsonp([133],{PHp5:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.total-box span[data-v-45810e88] {\r\n  color: red;\r\n  font-size: 18px;\n}\r\n",""])},iDSx:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),s=a("exGp"),l=a.n(s),o=a("Dd8w"),r=a.n(o),c=a("NYxO"),p={name:"statisticsExpense",computed:r()({},Object(c.b)({statConsumeList:"statConsumeList"}),{multipleDeleteVisible:function(){return 0==this.multipleSelect.length&&(this.multipleDelete=!1),0===this.multipleSelect.length}}),watch:{},data:function(){return{data:[{id:1}],loading:!1,sendType:[{id:1,name:"十音"},{id:2,name:"CPS"}],params:{platform:2,page:1,start_time:"",end_time:""},size:20,multipleSelect:[],multipleDelete:!1,page:1,dateRange:"",quickTime:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}},created:function(){this.getList(this.params)},methods:{handleSelectionChange:function(t){var e=[];t.forEach(function(t){e.push(t.id)}),this.multipleSelect=e},changeSendTypeFn:function(){this.params.page=1,this.params.start_time="",this.params.end_time="",this.dateRange="",this.getList(this.params)},handleCurrentChange:function(t){this.params.page=t,this.getList(this.params)},getExcel:function(){var t="/admin/stat/consume/export?";t+="page="+this.params.page+"&platform="+this.params.platform,this.params.start_time&&this.params.end_time&&(t+="&start_time="+this.params.start_time+"&end_time="+this.params.end_time),0!=this.statConsumeList.total?window.open(t):this.$message({type:"warning",message:"没有要导出的数据"})},getList:function(){var t=l()(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$store.dispatch("statConsume",e);case 3:this.loading=!1;case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),dateChangeFn:function(t){t=t||["",""],this.params.start_time=t[0],this.params.end_time=t[1],this.params.page=1,this.getList(this.params)}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"bar flex"},[a("div",{staticClass:"flex-left"},[a("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0"}},[t._v("选择平台")]),t._v(" "),a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择平台"},on:{change:t.changeSendTypeFn},model:{value:t.params.platform,callback:function(e){t.$set(t.params,"platform",e)},expression:"params.platform"}},t._l(t.sendType,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-date-picker",{staticClass:"ml-30",attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.quickTime,"value-format":"yyyy-MM-dd"},on:{change:t.dateChangeFn},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v(" "),a("div",{staticClass:"flex-right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.getExcel}},[t._v("导出EXCEL")])],1)]),t._v(" "),a("div",{staticClass:"bar flex"},[a("div",{staticClass:"float-left"},[a("div",{staticClass:"float-left total-box mr-30"},[t._v("\n          充值总金额(元)：\n          "),a("span",[t._v(t._s(t.statConsumeList.consumeTotal.recharge_sum))])]),t._v(" "),a("div",{staticClass:"float-left total-box mr-30"},[t._v("\n          消费总金额(元)：\n          "),a("span",[t._v(t._s(t.statConsumeList.consumeTotal.consume_sum))])]),t._v(" "),a("div",{staticClass:"float-left total-box mr-30"},[t._v("\n          剩余总金额(元)：\n          "),a("span",[t._v(t._s(t.statConsumeList.consumeTotal.balance))])])])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","text-align":"center"},attrs:{data:t.statConsumeList.data,border:"",stripe:"",multipleTable:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"index",label:"序号","min-width":"80",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"stat_date",label:"日期","min-width":"150","show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"recharge_sum",label:"充值金额","min-width":"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"recharge_man",label:"充值人数","min-width":"120","show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"consume_sum",label:"消费金额","min-width":"120","show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"subscribe_consume_coin",label:"订阅消费书币","min-width":"120","show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"subscribe_reward_coin",label:"打赏消费书币","min-width":"120","show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"剩余金额","min-width":"120","show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"subscribe_consume_giving_coin",label:"订阅消费书券","min-width":"120","show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"consumer",label:"消费人数","min-width":"120","show-overflow-tooltip":"",align:"center"}})],1),t._v(" "),a("div",{staticClass:"pagination-container clearfix"},[a("div",{staticClass:"float-left"},[a("global-pagination",{attrs:{"current-page":t.params.page,"page-size":t.params.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.statConsumeList.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(p,m,!1,function(t){a("mabU")},"data-v-45810e88",null);e.default=u.exports},mabU:function(t,e,a){var n=a("PHp5");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("577c16b4",n,!0)}});