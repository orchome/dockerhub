webpackJsonp([52],{AVAA:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("Xxa5"),o=e.n(r),a=e("exGp"),i=e.n(a),s=e("Dd8w"),l=e.n(s),u=e("NYxO"),p=e("vU3h"),c={mixins:[e("msXN").a],components:{PonitTo:p.a},computed:l()({},Object(u.b)({}),{pointType:function(){var n=this.ruleForm.adhibition,t=[];return 1==n?t=[1,2,3,4,5,6,7,9]:2==n&&(t=[1,2,3,4,5,6,7]),t},isEdit:function(){return"edit"==this.$route.meta.type}}),watch:{},data:function(){return{ruleForm:{adhibition:"1",title:"",name:"",content:"",page:"",push_at:"",point:{to_type:"2",to_value:""}},rules:{adhibition:[{required:!0,message:"请选择类型",trigger:"change"}],name:[{required:!0,message:"请消息名称",trigger:"blur"}],title:[{required:!0,message:"请消息标题",trigger:"blur"}],content:[{required:!0,message:"请填写消息内容",trigger:"blur"}],push_at:[{required:!0,message:"请选择推送时间",trigger:"change"}]}}},created:function(){this.isEdit&&this.getDefaultData(this.$route.params.id)},methods:{submitForm:function(n){var t=this;this.$refs[n].validate(function(n){if(!n)return console.log("error submit!!"),!1;if(1!=t.ruleForm.point.to_type&&4!=t.ruleForm.point.to_type&&5!=t.ruleForm.point.to_type&&6!=t.ruleForm.point.to_type||""!=t.ruleForm.point.to_value){var e=t._.cloneDeep(t.ruleForm),r=e.adhibition,o=e.name,a=e.title,i=e.content,s=e.push_at,l=e.point,u={adhibition:r,name:o,title:a,content:i,push_at:s,to_type:l.to_type,to_value:l.to_value};2!=e.point.to_type&&3!=e.point.to_type&&7!=e.point.to_type||delete e.point.to_value,t.isEdit?t.editListFn(u):t.addListFn(u)}else t.$message({duration:1500,message:"请输入正确的指向目标",type:"warning"})})},resetForm:function(n){this.$refs[n].resetFields()},goBackFn:function(){this.resetForm("ruleForm"),this.$router.push("/operationManage/push")},addListFn:function(){var n=i()(o.a.mark(function n(t){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("postOperationPushList",t);case 2:200==n.sent.code&&(this.$message({duration:1500,message:"添加成功",type:"success"}),this.goBackFn());case 4:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}(),editListFn:function(){var n=i()(o.a.mark(function n(t){var e;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=this.$route.params.id,t.id=e,n.next=4,this.$store.dispatch("putOperationPushList",t);case 4:200==n.sent.code&&(this.$message({duration:1500,message:"编辑成功",type:"success"}),this.goBackFn());case 6:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}(),getDefaultData:function(){var n=i()(o.a.mark(function n(t){var e;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("getOperationPushDetail",{id:t});case 2:200==(e=n.sent).code&&(this.ruleForm={id:e.data.id,push_at:e.data.push_at,content:e.data.content,title:e.data.title,name:e.data.name,adhibition:e.data.adhibition+"",point:{to_type:e.data.to_type+"",to_value:null==e.data.to_value?"":e.data.to_value}});case 4:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}(),changeType:function(){this.ruleForm.point.to_type="2"}}},m={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"app-container"},[e("div",{staticStyle:{width:"600px"}},[e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:n.ruleForm,rules:n.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"选择类型",prop:"adhibition"}},[n.isEdit?e("el-select",{attrs:{placeholder:"选择应用",disabled:""},on:{change:n.changeType},model:{value:n.ruleForm.adhibition,callback:function(t){n.$set(n.ruleForm,"adhibition",t)},expression:"ruleForm.adhibition"}},[e("el-option",{attrs:{label:"十音文学",value:"1"}}),n._v(" "),e("el-option",{attrs:{label:"免费小说",value:"2"}})],1):e("el-select",{attrs:{placeholder:"选择应用"},on:{change:n.changeType},model:{value:n.ruleForm.adhibition,callback:function(t){n.$set(n.ruleForm,"adhibition",t)},expression:"ruleForm.adhibition"}},[e("el-option",{attrs:{label:"十音文学",value:"1"}}),n._v(" "),e("el-option",{attrs:{label:"免费小说",value:"2"}})],1)],1),n._v(" "),e("el-form-item",{attrs:{label:"消息名称",prop:"name"}},[e("el-input",{attrs:{placeholder:"消息名称"},model:{value:n.ruleForm.name,callback:function(t){n.$set(n.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"消息标题",prop:"title"}},[e("el-input",{attrs:{placeholder:"消息标题"},model:{value:n.ruleForm.title,callback:function(t){n.$set(n.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"消息内容",prop:"content"}},[e("el-input",{attrs:{type:"textarea",placeholder:"消息内容",rows:4},model:{value:n.ruleForm.content,callback:function(t){n.$set(n.ruleForm,"content",t)},expression:"ruleForm.content"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"推送时间",prop:"push_at"}},[e("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:n.ruleForm.push_at,callback:function(t){n.$set(n.ruleForm,"push_at",t)},expression:"ruleForm.push_at"}})],1),n._v(" "),e("ponit-to",{attrs:{"to-type":n.ruleForm.point.to_type,"to-value":n.ruleForm.point.to_value,type:n.pointType},on:{"update:toType":function(t){n.$set(n.ruleForm.point,"to_type",t)},"update:toValue":function(t){n.$set(n.ruleForm.point,"to_value",t)}}}),n._v(" "),e("el-form-item",[e("el-button",{on:{click:function(t){n.goBackFn()}}},[n._v("返回")]),n._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(t){n.submitForm("ruleForm")}}},[n._v("保存")])],1)],1)],1)])},staticRenderFns:[]};var d=e("VU/8")(c,m,!1,function(n){e("yAjq")},null,null);t.default=d.exports},D9mR:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},yAjq:function(n,t,e){var r=e("D9mR");"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);e("rjj0")("33355e78",r,!0)}});