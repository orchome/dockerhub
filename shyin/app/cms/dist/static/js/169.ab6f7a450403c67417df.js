webpackJsonp([169],{"7i21":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),l=a.n(i),n=a("exGp"),o=a.n(n),s=a("Dd8w"),r=a.n(s),c=a("NYxO"),d={computed:r()({},Object(c.b)({})),watch:{},data:function(){return{dialogVisible:!1,data:[],loading:!1,smartPushList:{data:[],total:0},params:{page:1},form:{}}},created:function(){this.getCPSSmartPush()},methods:{deleteCPSSmartPush:function(){var t=o()(l.a.mark(function t(e){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("deleteCPSSmartPush",{id:e});case 2:200===t.sent.code&&(this.successMsgFn("删除成功~"),this.getCPSSmartPush());case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getCPSSmartPush:function(){var t=o()(l.a.mark(function t(){var e,a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,e=this._.cloneDeep(this.params),t.next=4,this.$store.dispatch("getCPSSmartPush",e);case 4:(a=t.sent).data.forEach(function(t){t.delete=!1}),this.smartPushList={data:a.data,total:a.meta.total},this.loading=!1;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),handleCurrentChange:function(t){this.params.page=t,this.getCPSSmartPush()},fuzzyQueryFn:function(){this.params.page=1,this.getCPSSmartPush()}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"bar flex"},[a("div",{staticClass:"flex-left"}),t._v(" "),a("div",{staticClass:"flex-right"},[a("router-link",{attrs:{to:"/CPSManage/push/delegation/add"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"}},[t._v("新增")])],1)],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","text-align":"center"},attrs:{data:t.smartPushList.data,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"序号",width:"80",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"任务名称","min-width":"100","show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"product_type",label:"产品种类","min-width":"100","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(1==e.row.product_type?"小说":2==e.row.product_type?"美图":3==e.row.product_type?"小说+美图":"小说"))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"发送状态","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.status?a("el-tag",{attrs:{type:"success"}},[t._v("已发送")]):a("el-tag",{attrs:{type:"danger"}},[t._v("未发送")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"msg_type",label:"消息类型","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("img-text"==e.row.msg_type?"图文":"文字"))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"content_type",label:"绑定类型","min-width":"120","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.content_type?e.row.content_type.replace(/novel/,"小说").replace(/activity/,"活动").replace(/guide/,"引导").replace(/picture/,"美图"):"-"))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"accept_scope",label:"接受用户","min-width":"120","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("0"==e.row.accept_scope?"全部用户":"标签用户"))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"send_time",label:"发送时间","min-width":"120","show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间","min-width":"120","show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"!=e.row.status?a("router-link",{attrs:{to:"/CPSManage/push/delegation/edit/"+e.row.id}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("编辑")])],1):t._e(),t._v(" "),"1"==e.row.status?a("router-link",{attrs:{to:"/CPSManage/push/delegation/info/"+e.row.id}},[a("el-button",{attrs:{size:"mini",type:"success"}},[t._v("数据详情")])],1):t._e(),t._v(" "),"1"==e.row.status?a("router-link",{attrs:{to:"/CPSManage/push/delegation/detail/"+e.row.id}},[a("el-button",{attrs:{size:"mini",type:"info"}},[t._v("消息详情")])],1):t._e(),t._v(" "),a("el-popover",{attrs:{placement:"top",width:"100"},model:{value:e.row.delete,callback:function(a){t.$set(e.row,"delete",a)},expression:"scope.row.delete"}},[a("p",[t._v("确认删除选择的消息？")]),t._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.delete=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.row.delete=!1,t.deleteCPSSmartPush(e.row.id)}}},[t._v("确定")])],1),t._v(" "),a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(t){e.row.delete=!0}},slot:"reference"},[t._v("删除")])],1)]}}])})],1),t._v(" "),a("div",{staticClass:"pagination-container clearfix"},[a("div",{staticClass:"float-left"},[a("global-pagination",{attrs:{"current-page":t.params.page,"page-size":t.params.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.smartPushList.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)]),t._v(" "),a("el-dialog",{staticClass:"delegation-dialog",attrs:{title:"消息详情",visible:t.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"dialog-content"},[a("ul",{staticClass:"dialog-ul"},[a("li",{staticClass:"dialog-li"},[a("label",{staticClass:"dialog-li__label"},[t._v("任务名称")]),t._v(" "),a("div",{staticClass:"dialog-li__content"},[t._v("123")])]),t._v(" "),a("li",{staticClass:"dialog-li"},[a("label",{staticClass:"dialog-li__label"},[t._v("消息类型")]),t._v(" "),a("div",{staticClass:"dialog-li__content"},[a("p",[t._v("图文消息 / 文本消息")]),t._v(" "),a("div",[t._v("123213")])])]),t._v(" "),a("li",{staticClass:"dialog-li"},[a("label",{staticClass:"dialog-li__label"},[t._v("发送用户")]),t._v(" "),a("div",{staticClass:"dialog-li__content"},[t._v("全部用户")])]),t._v(" "),a("li",{staticClass:"dialog-li"},[a("label",{staticClass:"dialog-li__label"},[t._v("发送时间")]),t._v(" "),a("div",{staticClass:"dialog-li__content"},[t._v("\n                        2018-12-14 12:00:00\n                    ")])])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("关 闭")])],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(d,p,!1,function(t){a("PH/l")},null,null);e.default=u.exports},"PH/l":function(t,e,a){var i=a("yuW5");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("0f19dc52",i,!0)},yuW5:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,'\n.delegation-dialog .el-dialog {\n  width: 500px;\n}\n.dialog-content .dialog-li {\n  margin-bottom: 22px;\n}\n.dialog-content .dialog-li::before {\n  display: table;\n  content: "";\n}\n.dialog-content .dialog-li::after {\n  clear: both;\n  display: table;\n  content: "";\n}\n.dialog-content .dialog-li .dialog-li__label {\n  width: 80px;\n  text-align: right;\n  vertical-align: middle;\n  float: left;\n  font-size: 14px;\n  color: #606266;\n  line-height: 40px;\n  padding: 0 12px 0 0;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.dialog-content .dialog-li .dialog-li__content {\n  margin-left: 80px;\n  line-height: 40px;\n  position: relative;\n  font-size: 14px;\n}\n.dialog-content .dialog-li .dialog-li__content::after {\n  clear: both;\n  display: table;\n  content: "";\n}\n.dialog-content .dialog-li .dialog-li__content::before {\n  display: table;\n  content: "";\n}\n',""])}});