webpackJsonp([41],{"98Ml":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("Xxa5"),a=t.n(r),l=t("exGp"),o=t.n(l),i=t("RRo+"),u=t.n(i),s=t("Dd8w"),c=t.n(s),p=t("NYxO"),m=t("vU3h"),d=t("5Vl1"),v={components:{PonitTo:m.a,UploadImg:d.a},computed:c()({pointType:function(){return 5==this.ruleForm.client||8==this.ruleForm.client?[8,7]:[1,2,3,4,5,6,7,9]}},Object(p.b)({}),{isEdit:function(){return"edit"==this.$route.meta.type},webPage:function(){var n=[];switch(this.ruleForm.client){case"1":n=[{value:"1",label:"首页"},{value:"2",label:"男频"},{value:"3",label:"女频"}];break;case"2":n=[{value:"4",label:"男频"},{value:"5",label:"女频"},{value:"6",label:"完本"},{value:"7",label:"免费"}];break;case"3":n=[{value:"8",label:"精选"},{value:"9",label:"男生"},{value:"10",label:"女生"},{value:"11",label:"推荐"}];break;case"4":n=[{value:"22",label:"男频"},{value:"23",label:"女频"}];break;case"5":n=[{value:"16",label:"美图首页"}];break;case"6":n=[{value:"17",label:"男频"},{value:"18",label:"女频"},{value:"19",label:"完本"}];break;case"7":n=[{value:"20",label:"男频"},{value:"21",label:"女频"}];break;case"8":n=[{value:"16",label:"美图首页"}];break;default:n=[]}return console.log(this.ruleForm.client,"this.ruleForm.client"),console.log(n,"_pages"),n}}),watch:{},data:function(){return{ruleForm:{time:[],client:"",page:"",point:{to_type:"2",to_value:"",to_img:"",resolution:""},sort:"",adhibition:"1"},client_arr:[{label:"PC",value:"1"},{label:"APP",value:"2"},{label:"H5",value:"3"},{label:"小程序",value:"4"}],rules:{title:[{required:!0,message:"请输入图片标题",trigger:"blur"}],adhibition:[{required:!0,message:"请选择应用",trigger:"change"}],client:[{required:!0,message:"请选择客户端",trigger:"change"}],page:[{required:!0,message:"请选择页面",trigger:"change"}],time:[{type:"array",required:!0,message:"请选择有效期",trigger:"change"}],sort:[{validator:function(n,e,t){e||e+""=="0"||t(new Error("序号不能为空")),setTimeout(function(){u()(Number(e))?t():t(new Error("请输入数字值"))},1e3)},trigger:"blur"}]}}},created:function(){this.isEdit&&this.getBannerInfoFn(this.$route.params.id)},methods:{getResolutionFn:function(n){this.ruleForm.point.resolution=n},changeClientFn:function(n){5!=n&&8!=n||(this.ruleForm.point.to_type=""),this.ruleForm.page=""},submitForm:function(n){var e=this;this.$refs[n].validate(function(n){if(!n)return console.log("error submit!!"),!1;if(1!=e.ruleForm.point.to_type&&4!=e.ruleForm.point.to_type&&5!=e.ruleForm.point.to_type&&8!=e.ruleForm.point.to_type&&6!=e.ruleForm.point.to_type||""!=e.ruleForm.point.to_value)if(""==e.ruleForm.point.to_img)e.$message({duration:1500,message:"请上传图片",type:"warning"});else{var t=e._.cloneDeep(e.ruleForm);t.start_time=t.time[0],t.end_time=t.time[1],delete t.time,2!=t.point.to_type&&3!=t.point.to_type&&7!=t.point.to_type&&9!=t.point.to_type||delete t.point.to_value,5==t.client&&delete t.title,e.isEdit?e.putBannerUpdateFn(t):e.putBannerAddFn(t)}else e.$message({duration:1500,message:"请输入正确的指向目标",type:"warning"})})},resetForm:function(n){this.$refs[n].resetFields()},goBackFn:function(){this.resetForm("ruleForm"),this.$router.push({path:"/operationManage/banner",query:{edit:"1"}})},putBannerUpdateFn:function(){var n=o()(a.a.mark(function n(e){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("putBannerUpdate",e);case 2:200==n.sent.code&&(this.$message({duration:1500,message:"修改成功",type:"success"}),this.goBackFn());case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),putBannerAddFn:function(){var n=o()(a.a.mark(function n(e){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("putBannerAdd",e);case 2:200==n.sent.code&&(this.$message({duration:1500,message:"添加成功",type:"success"}),this.goBackFn());case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),getBannerInfoFn:function(){var n=o()(a.a.mark(function n(e){var t;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("getBannerInfo",{id:e});case 2:200==(t=n.sent).code&&(this.ruleForm={id:t.data.id,time:[t.data.start_time,t.data.end_time],client:t.data.client+"",adhibition:t.data.adhibition+"",page:t.data.page+"",sort:t.data.sort,title:t.data.title,point:{to_type:t.data.point[0].to_type+"",to_value:t.data.point[0].to_value,to_img:t.data.point[0].to_img,resolution:t.data.point[0].resolution||""}},this.client_arr=this.getClientArr());case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),changeType:function(){this.client_arr=this.getClientArr(),this.ruleForm.client="",this.ruleForm.page=""},getClientArr:function(){var n=this.ruleForm.adhibition,e=[];return 1==n?e=[{label:"PC",value:"1"},{label:"APP",value:"2"},{label:"H5",value:"3"},{label:"小程序",value:"4"}]:2==n&&(e=[{label:"客户端APP",value:"6"},{value:"7",label:"小程序"}]),e}}},b={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("div",{staticStyle:{width:"600px"}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:n.ruleForm,rules:n.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"选择应用",prop:"adhibition"}},[t("el-select",{attrs:{placeholder:"请选择应用"},on:{change:n.changeType},model:{value:n.ruleForm.adhibition,callback:function(e){n.$set(n.ruleForm,"adhibition",e)},expression:"ruleForm.adhibition"}},[t("el-option",{attrs:{label:"十音文学",value:"1"}}),n._v(" "),t("el-option",{attrs:{label:"免费小说",value:"2"}})],1)],1),n._v(" "),t("el-form-item",{attrs:{label:"选择客户端",prop:"client"}},[t("el-select",{attrs:{placeholder:"请选择客户端"},on:{change:n.changeClientFn},model:{value:n.ruleForm.client,callback:function(e){n.$set(n.ruleForm,"client",e)},expression:"ruleForm.client"}},n._l(n.client_arr,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{attrs:{label:"选择页面",prop:"page"}},[t("el-select",{attrs:{placeholder:"请选择页面"},model:{value:n.ruleForm.page,callback:function(e){n.$set(n.ruleForm,"page",e)},expression:"ruleForm.page"}},n._l(n.webPage,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),5!=n.ruleForm.client&&8!=n.ruleForm.client?t("el-form-item",{attrs:{label:"图片标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"请输入图片标题"},model:{value:n.ruleForm.title,callback:function(e){n.$set(n.ruleForm,"title",e)},expression:"ruleForm.title"}})],1):n._e(),n._v(" "),t("el-form-item",{attrs:{label:"上传图片",required:""}},[t("upload-img",{attrs:{picture:n.ruleForm.point.to_img},on:{"update:picture":function(e){n.$set(n.ruleForm.point,"to_img",e)},getResolution:n.getResolutionFn}},[n._v("支持JPG、BMP、PNG、建议尺寸 750*299PX")])],1),n._v(" "),t("el-form-item",{attrs:{label:"有效期",prop:5!=n.ruleForm.client?"time":""}},[t("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:n.ruleForm.time,callback:function(e){n.$set(n.ruleForm,"time",e)},expression:"ruleForm.time"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"排序",prop:"sort",required:""}},[t("el-input",{model:{value:n.ruleForm.sort,callback:function(e){n.$set(n.ruleForm,"sort",e)},expression:"ruleForm.sort"}})],1),n._v(" "),t("ponit-to",{attrs:{type:n.pointType,"to-type":n.ruleForm.point.to_type,"to-value":n.ruleForm.point.to_value,client:n.ruleForm.client},on:{"update:toType":function(e){n.$set(n.ruleForm.point,"to_type",e)},"update:toValue":function(e){n.$set(n.ruleForm.point,"to_value",e)}}}),n._v(" "),t("el-form-item",[t("el-button",{on:{click:function(e){n.goBackFn()}}},[n._v("返回")]),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(e){n.submitForm("ruleForm")}}},[n._v("保存")])],1)],1)],1)])},staticRenderFns:[]};var h=t("VU/8")(v,b,!1,function(n){t("ZOx+")},null,null);e.default=h.exports},"ZOx+":function(n,e,t){var r=t("krF1");"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);t("rjj0")("6eacaa30",r,!0)},krF1:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});