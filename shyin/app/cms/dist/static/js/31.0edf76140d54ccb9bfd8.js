webpackJsonp([31],{"+nqX":function(n,t,e){var r=e("cwJr");"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);e("rjj0")("9a0871f2",r,!0)},b3wX:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("Xxa5"),s=e.n(r),a=e("exGp"),i=e.n(a),o=e("Dd8w"),c=e.n(o),u=e("NYxO"),l={watch:{isFinish:function(){this.selectOpt.reverse().pop(),this.selectedOptions=this.selectOpt}},computed:c()({},Object(u.b)({categorySelect:"categorySelect",categoryList:"categoryList"})),data:function(){return{selectedOptions:[0],ruleForm:{id:"",cat_name:"",parent_id:""},rules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}]},selectOpt:[],isFinish:!1,loading:!1}},methods:{resetForm:function(n){this.$refs[n].resetFields()},submitForm:function(){var n=i()(s.a.mark(function n(t){var e=this;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:this.$refs[t].validate(function(n){if(!n)return!1;e.postCateFn()});case 1:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}(),getCategoryInfoFn:function(){var n=i()(s.a.mark(function n(){var t;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("getCateInfo",{id:this.$route.params.id});case 2:200==(t=n.sent).code&&(this.ruleForm.cat_name=t.data.cat_name,this.ruleForm.id=t.data.id);case 4:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}(),getCateListFn:function(){var n=i()(s.a.mark(function n(){var t,e,r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("getCateList");case 2:200==(t=n.sent).code&&"编辑小说分类"==this.$route.name&&(e=Number(this.$route.params.id),r=t.data.find(function(n){return n.id==e}),this.selectOpt.push(e),r&&this.setCategoryOptFn(t.data,r));case 4:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}(),setCategoryOptFn:function(n,t){if("0"!=t.parent_id){var e=n.find(function(n){return n.id==t.parent_id});e&&(this.selectOpt.push(e.id),this.setCategoryOptFn(n,e))}else this.selectOpt.push(0),this.isFinish=!0},postCateFn:function(){var n=i()(s.a.mark(function n(){var t;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.loading=!0,t=this.selectedOptions[this.selectedOptions.length-1],"编辑小说分类"!=this.$route.name){n.next=10;break}return n.next=5,this.$store.dispatch("postCateUpdate",{id:this.ruleForm.id,cat_name:this.ruleForm.cat_name,parent_id:t});case 5:200==n.sent.code&&(this.$message({duration:1500,message:"编辑分类成功",type:"success"}),this.ruleForm.cat_name="",this.$router.push("/novelManage/category")),this.loading=!1,n.next=16;break;case 10:if("添加小说分类"!=this.$route.name){n.next=16;break}return n.next=13,this.$store.dispatch("postCateCreate",{cat_name:this.ruleForm.cat_name,parent_id:t});case 13:200==n.sent.code&&(this.$message({duration:1500,message:"添加分类成功",type:"success"}),this.ruleForm.cat_name="",this.$router.push("/novelManage/category")),this.loading=!1;case 16:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}()},created:function(){this.$route.params.id&&this.getCategoryInfoFn(),this.getCateListFn()},mounted:function(){}},p={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"app-container"},[e("div",{staticStyle:{width:"350px"}},[e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:n.ruleForm,rules:n.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[e("el-input",{attrs:{placeholder:"请输入分类名称"},model:{value:n.ruleForm.cat_name,callback:function(t){n.$set(n.ruleForm,"cat_name",t)},expression:"ruleForm.cat_name"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"上级分类",prop:"parent_id"}},[e("el-cascader",{attrs:{placeholder:"选择上级分类",options:n.categorySelect,filterable:"","show-all-levels":!1},model:{value:n.selectedOptions,callback:function(t){n.selectedOptions=t},expression:"selectedOptions"}})],1),n._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary",loading:n.loading},on:{click:function(t){n.submitForm("ruleForm")}}},[n._v("保存")]),n._v(" "),e("router-link",{attrs:{to:"/novelManage/category"}},[e("el-button",{on:{click:function(t){n.resetForm("ruleForm")}}},[n._v("返回")])],1)],1)],1)],1)])},staticRenderFns:[]};var d=e("VU/8")(l,p,!1,function(n){e("+nqX")},null,null);t.default=d.exports},cwJr:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});