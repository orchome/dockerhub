webpackJsonp([190],{"2Msb":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Xxa5"),i=e.n(s),l=e("exGp"),n=e.n(l),o=e("0xDb"),r=e("E4LH"),d={data:function(){return{id:this.$route.params.id,book:{},author:{},data:[],loading:!1,detail:{},signType:"0",page:1,total:0,params:{page:1}}},methods:{getAuthorRoyaltyDetailFn:function(){var t=n()(i.a.mark(function t(a){var e,s,l,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.id=a,e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),(s=this._.cloneDeep(this.params)).id=a,t.next=6,this.$store.dispatch("getAuthorRoyaltyDetail",s);case 6:200==(l=t.sent).code&&(n=l.data.detail,this.signType=n.sign,this.book={book_id:n.book_id,book_name:n.book_detail?n.book_detail.name:"-",user_id:n.book_detail?n.book_detail.user_id:"-",pen_name:n.book_detail&&n.book_detail.user?n.book_detail.user.pen_name:"-",cat_name:n.book_detail&&n.book_detail.category?n.book_detail.category.cat_name:"-",status:n.book_detail?0==n.book_detail.status?"下架":1==n.book_detail.status?"上架":2==n.book_detail.status?"审核中":3==n.book_detail.status?"审核未通过":"-":"-",sign:1==n.sign?"全勤签约":2==n.sign?"保底签约":3==n.sign?"买断签约":"-",min_words:n.min_words,word_count:n.word_count,grate:1==n.grate?"S":2==n.grate?"A":3==n.grate?"B":4==n.grate?"C":"-",price:n.price,break:n.break},this.detail=n,l.data.list.data.forEach(function(t){t.sign=1==t.sign?"全勤签约":2==t.sign?"保底签约":3==t.sign?"买断签约":"-"}),this.data=l.data.list.data,this.total=l.data.list.total),e.close();case 9:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}(),handleCurrentChange:function(t){this.params.page=t,this.getAuthorRoyaltyDetailFn(this.id)},editBrokenDay:function(){var t=this,a=this,e={id:this.id,break:this.book.break};a.$store.dispatch("postAuthorRoyalEditDay",e).then(function(){Object(o.i)("修改成功","success")}).catch(function(){a.getAuthorRoyaltyDetailFn(t.id)})},editBrokenWords:function(){var t=this,a=this,e={id:this.id,word_count:this.book.word_count};a.$store.dispatch("postAuthorRoyalEditWords",e).then(function(){Object(o.i)("修改成功","success")}).catch(function(){a.getAuthorRoyaltyDetailFn(t.id)})},editRankReward:function(){var t=this,a=this,e={id:this.id,thirdparty_sale_award:this.detail.thirdparty_sale_award};Object(r.b)(this.detail.thirdparty_sale_award)?a.$store.dispatch("postAuthorRoyalEditRankReward",e).then(function(){Object(o.i)("修改成功","success")}).catch(function(){a.getAuthorRoyaltyDetailFn(t.id)}):Object(o.c)("金额格式不对")},editPushCost:function(t){var a=t.push_cost,e={id:t.id,push_cost:a};Object(r.b)(a)?(this.$store.dispatch("postAuthorRoyalPushCost",e).then(function(){Object(o.i)("修改成功","success")}),this.getAuthorRoyaltyDetailFn(this.id)):Object(o.c)("金额格式不对")},editDerivativeFree:function(){var t=this,a=this,e={id:this.id,royalty_fee:this.detail.royalty_fee};Object(r.b)(this.detail.royalty_fee)?a.$store.dispatch("postAuthorRoyalDerivativeFree",e).then(function(){Object(o.i)("修改成功","success")}).catch(function(){a.getAuthorRoyaltyDetailFn(t.id)}):Object(o.c)("金额格式不对")},editThirdFree:function(){var t=this,a=this,e={id:this.id,thirdparty_price:this.detail.thirdparty_price};Object(r.b)(this.detail.thirdparty_price)?a.$store.dispatch("postAuthorRoyalThirdMoney",e).then(function(){Object(o.i)("修改成功","success")}).catch(function(){a.getAuthorRoyaltyDetailFn(t.id)}):Object(o.c)("金额格式不对")}},created:function(){this.getAuthorRoyaltyDetailFn(this.id)}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"bar"},[e("h3",{directives:[{name:"show",rawName:"v-show",value:t.detail.year&&t.detail.month,expression:"detail.year&&detail.month"}]},[t._v(t._s(t.detail.year+"年"+t.detail.month)+"月稿费详情")]),t._v(" "),e("div",{staticClass:"remuneration-container-wrapper"},[e("p",[t._v("小说基本信息")]),t._v(" "),e("div",{staticClass:"table-info"},[e("ul",{staticClass:"table-info-wrapper"},[e("li",[e("div",{staticClass:"cell"},[e("span",[t._v("小说ID")]),t._v(" "),e("span",[t._v(t._s(t.book.book_id))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("小说名称")]),t._v(" "),e("span",[t._v(t._s(t.book.book_name))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("作者ID")]),t._v(" "),e("span",[t._v(t._s(t.book.user_id))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("作者笔名")]),t._v(" "),e("span",[t._v(t._s(t.book.pen_name))])])]),t._v(" "),e("li",[e("div",{staticClass:"cell"},[e("span",[t._v("所属分类")]),t._v(" "),e("span",[t._v(t._s(t.book.cat_name))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("小说状态")]),t._v(" "),e("span",[t._v(t._s(t.book.status))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("签约类型")]),t._v(" "),e("span",[t._v(t._s(t.book.sign))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("月更新字数")]),t._v(" "),e("span",[t._v("\n                  "+t._s(t.book.word_count)+"\n                  ")])])]),t._v(" "),e("li",[e("div",{staticClass:"cell"},[e("span",[t._v("签约等级")]),t._v(" "),e("span",[t._v(t._s(t.book.grate))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("千字价格")]),t._v(" "),e("span",[t._v(t._s(t.book.price))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("保底字数")]),t._v(" "),e("span",[t._v(t._s(t.book.min_words))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("断更天数 (天)")]),t._v(" "),e("span",[e("el-input",{staticClass:"input-wrapper",attrs:{disabled:1==t.detail.status},on:{change:t.editBrokenDay},model:{value:t.book.break,callback:function(a){t.$set(t.book,"break",a)},expression:"book.break"}})],1)])])])])]),t._v(" "),e("div",{staticClass:"remuneration-container-wrapper"},[e("p",[t._v("稿费具体明细")]),t._v(" "),e("div",{staticClass:"table-info"},[1==t.signType?e("ul",{staticClass:"table-info-wrapper"},[e("li",[e("div",{staticClass:"cell"},[e("span",[t._v("千字稿费")]),t._v(" "),e("span",[t._v(t._s(t.detail.royalties||"0.00"))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("自有渠道订阅分成")]),t._v(" "),e("span",[t._v(t._s(t.detail.own_dingyue||"0.00"))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("自有渠道打赏分成")]),t._v(" "),e("span",[t._v(t._s(t.detail.own_dashang||"0.00"))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("三方渠道分成")]),t._v(" "),e("span",[e("el-input",{staticClass:"input-wrapper",attrs:{disabled:1==t.detail.status},on:{change:t.editThirdFree},model:{value:t.detail.thirdparty_price,callback:function(a){t.$set(t.detail,"thirdparty_price",a)},expression:"detail.thirdparty_price"}})],1)])]),t._v(" "),e("li",[e("div",{staticClass:"cell"},[e("span",[t._v("三方销售排行奖励金")]),t._v(" "),e("span",[e("el-input",{staticClass:"input-wrapper",attrs:{disabled:1==t.detail.status},on:{change:t.editRankReward},model:{value:t.detail.thirdparty_sale_award,callback:function(a){t.$set(t.detail,"thirdparty_sale_award",a)},expression:"detail.thirdparty_sale_award"}})],1)]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("完本续签奖励金")]),t._v(" "),e("span",[t._v(t._s(t.detail.finish_award_price||"0.00"))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("版权衍生费")]),t._v(" "),e("span",[e("el-input",{staticClass:"input-wrapper",attrs:{disabled:1==t.detail.status},on:{change:t.editDerivativeFree},model:{value:t.detail.royalty_fee,callback:function(a){t.$set(t.detail,"royalty_fee",a)},expression:"detail.royalty_fee"}})],1)]),t._v(" "),e("div",{staticClass:"cell"})])]):t._e(),t._v(" "),2==t.signType?e("ul",{staticClass:"table-info-wrapper"},[e("li",[e("div",{staticClass:"cell"},[e("span",[t._v("全勤奖励金")]),t._v(" "),e("span",[t._v(t._s(t.detail.creation_award_price))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("千字稿费")]),t._v(" "),e("span",[t._v(t._s(t.detail.royalties||"0.00"))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("自有渠道订阅分成")]),t._v(" "),e("span",[t._v(t._s(t.detail.own_dingyue||"0.00"))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("自有渠道打赏分成")]),t._v(" "),e("span",[t._v(t._s(t.detail.own_dashang||"0.00"))])])]),t._v(" "),e("li",[e("div",{staticClass:"cell"},[e("span",[t._v("三方渠道分成")]),t._v(" "),e("span",[e("el-input",{staticClass:"input-wrapper",attrs:{disabled:1==t.detail.status},on:{change:t.editThirdFree},model:{value:t.detail.thirdparty_price,callback:function(a){t.$set(t.detail,"thirdparty_price",a)},expression:"detail.thirdparty_price"}})],1)]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("三方销售排行奖励金")]),t._v(" "),e("span",[e("el-input",{staticClass:"input-wrapper",attrs:{disabled:1==t.detail.status},on:{change:t.editRankReward},model:{value:t.detail.thirdparty_sale_award,callback:function(a){t.$set(t.detail,"thirdparty_sale_award",a)},expression:"detail.thirdparty_sale_award"}})],1)]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("完本续签奖励金")]),t._v(" "),e("span",[t._v(t._s(t.detail.finish_award_price||"0.00"))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("版权衍生费")]),t._v(" "),e("span",[e("el-input",{staticClass:"input-wrapper",attrs:{disabled:1==t.detail.status},on:{change:t.editDerivativeFree},model:{value:t.detail.royalty_fee,callback:function(a){t.$set(t.detail,"royalty_fee",a)},expression:"detail.royalty_fee"}})],1)])])]):t._e(),t._v(" "),3==t.signType?e("ul",{staticClass:"table-info-wrapper"},[e("li",[e("div",{staticClass:"cell"},[e("span",[t._v("千字稿费")]),t._v(" "),e("span",[t._v(t._s(t.detail.royalties||"0.00"))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("自有渠道打赏分成")]),t._v(" "),e("span",[t._v(t._s(t.detail.own_dashang||"0.00"))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("完本续签奖励金")]),t._v(" "),e("span",[t._v(t._s(t.detail.finish_award_price||"0.00"))])]),t._v(" "),e("div",{staticClass:"cell"})])]):t._e()])]),t._v(" "),e("div",{staticClass:"remuneration-container-wrapper"},[e("p",[t._v("稿费总列表")]),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","text-align":"center"},attrs:{data:t.data,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"year_month",label:"年月",width:"100",fixed:""}}),t._v(" "),e("el-table-column",{attrs:{prop:"word_count",label:"月更新字数","min-width":"100","show-overflow-tooltip":"",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"break",label:"断更天数",width:"80",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"sign",label:"签约类型","min-width":"120","show-overflow-tooltip":"",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"price",label:"千字价格","min-width":"80","show-overflow-tooltip":"",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"sum",label:"总稿费","min-width":"120","show-overflow-tooltip":"",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"tax",label:"税费","min-width":"120","show-overflow-tooltip":"",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"push_cost",label:"推送成本","min-width":"120","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{attrs:{disabled:1==a.row.status},on:{change:function(e){t.editPushCost(a.row)}},model:{value:a.row.push_cost,callback:function(e){t.$set(a.row,"push_cost",e)},expression:"scope.row.push_cost"}})]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"settlement",label:"实际稿费","min-width":"120","show-overflow-tooltip":"",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"status",label:"稿费状态","min-width":"120","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==a.row.status?e("el-tag",{attrs:{type:"danger"}},[t._v("未打款")]):1==a.row.status?e("el-tag",[t._v("已打款")]):2==a.row.status?e("el-tag",{attrs:{type:"danger"}},[t._v("打款出错")]):3==a.row.status?e("el-tag",{attrs:{type:"warning"}},[t._v("核算中")]):4==a.row.status?e("el-tag",{attrs:{type:"danger"}},[t._v("核算出错")]):e("span",[t._v("-")])]}}])}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.getAuthorRoyaltyDetailFn(a.row.id)}}},[t._v("当月稿费详情")])]}}])})],1),t._v(" "),e("div",{staticClass:"pagination-container clearfix"},[e("div",{staticClass:"float-left"},[e("global-pagination",{attrs:{"current-page":t.params.page,"page-size":t.params.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)])],1)])])},staticRenderFns:[]};var _=e("VU/8")(d,c,!1,function(t){e("Kar0")},null,null);a.default=_.exports},"97y5":function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.remuneration-container-wrapper {\r\n  padding: 15px;\r\n  border: 1px solid rgb(121, 121, 121);\r\n  margin-bottom: 20px;\n}\n.input-wrapper {\r\n  width: 60%;\n}\r\n",""])},Kar0:function(t,a,e){var s=e("97y5");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("rjj0")("ecfed688",s,!0)}});