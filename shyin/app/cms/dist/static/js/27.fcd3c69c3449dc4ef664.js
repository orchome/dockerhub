webpackJsonp([27],{"7zbp":function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},CvXk:function(n,e,t){var r=t("7zbp");"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);t("rjj0")("30de789a",r,!0)},yOxM:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("Xxa5"),o=t.n(r),s=t("exGp"),a=t.n(s),i=t("RRo+"),u=t.n(i),l=t("Dd8w"),c=t.n(l),m=t("NYxO"),p={components:{UploadImg:t("5Vl1").a},computed:c()({},Object(m.b)({}),{pageType:function(){return this.$route.meta.type},isEdit:function(){return this.$route.path.indexOf("edit")>-1}}),watch:{},data:function(){return{ruleForm:{id:"",title:"",img:"",sex:"1",look_num:0,sort:0,content:""},rules:{title:[{required:!0,message:"请输入书单标题",trigger:"blur"}],content:[{required:!0,message:"请选择书单简介",trigger:"blur"}],look_num:[{validator:function(n,e,t){e||e+""=="0"||t(new Error("查看数不能为空")),setTimeout(function(){u()(Number(e))?t():t(new Error("请输入数字值"))},1e3)},trigger:"blur"}],sort:[{validator:function(n,e,t){e||e+""=="0"||t(new Error("序号不能为空")),setTimeout(function(){u()(Number(e))?t():t(new Error("请输入数字值"))},1e3)},trigger:"blur"}]}}},created:function(){this.isEdit&&this.getBookbarInfoFn(this.$route.params.id)},methods:{getBookbarInfoFn:function(){var n=a()(o.a.mark(function n(e){var t;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("getBookbarInfo",{id:e});case 2:200==(t=n.sent).code&&(this.ruleForm=this._.cloneDeep(t.data));case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),putBookbarCreateFn:function(){var n=a()(o.a.mark(function n(e){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("putBookbarCreate",e);case 2:200==n.sent.code&&(this.$message({duration:1500,message:"添加成功",type:"success"}),this.goBackFn());case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),putBookbarUpdateFn:function(){var n=a()(o.a.mark(function n(e){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("putBookbarUpdate",e);case 2:200==n.sent.code&&(this.$message({duration:1500,message:"修改成功",type:"success"}),this.goBackFn());case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),goBackFn:function(){this.resetForm("ruleForm"),this.$router.push("/operationManage/booklist")},submitForm:function(n){var e=this;this.$refs[n].validate(function(n){if(!n)return console.log("error submit!!"),!1;if(""==e.ruleForm.img)e.$message({duration:1500,message:"请选择封面图",type:"warning"});else{var t=e._.clone(e.ruleForm);e.isEdit?e.putBookbarUpdateFn(t):e.putBookbarCreateFn(t)}})},resetForm:function(n){this.$refs[n].resetFields()}}},f={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:n.ruleForm,rules:n.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"书单资源",prop:"sex"}},[t("el-radio-group",{model:{value:n.ruleForm.sex,callback:function(e){n.$set(n.ruleForm,"sex",e)},expression:"ruleForm.sex"}},[t("el-radio",{attrs:{label:"1"}},[n._v("男频书单")]),n._v(" "),t("el-radio",{attrs:{label:"2"}},[n._v("女频书单")])],1)],1),n._v(" "),t("el-form-item",{attrs:{label:"书单标题",prop:"title"}},[t("el-input",{model:{value:n.ruleForm.title,callback:function(e){n.$set(n.ruleForm,"title",e)},expression:"ruleForm.title"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"书单简介",prop:"content"}},[t("el-input",{attrs:{type:"textarea"},model:{value:n.ruleForm.content,callback:function(e){n.$set(n.ruleForm,"content",e)},expression:"ruleForm.content"}})],1),n._v(" "),n.isEdit?n._e():t("el-form-item",{attrs:{label:"查看数",prop:"look_num",required:""}},[t("el-input",{model:{value:n.ruleForm.look_num,callback:function(e){n.$set(n.ruleForm,"look_num",e)},expression:"ruleForm.look_num"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"排序",prop:"sort",required:""}},[t("el-input",{model:{value:n.ruleForm.sort,callback:function(e){n.$set(n.ruleForm,"sort",e)},expression:"ruleForm.sort"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"封面",prop:"img",required:""}},[t("upload-img",{attrs:{picture:n.ruleForm.img},on:{"update:picture":function(e){n.$set(n.ruleForm,"img",e)}}},[n._v("支持JPG、BMP、PNG、图片尺寸 150*216 像素、建议尺寸 300*432 像素")])],1),n._v(" "),t("el-form-item",[t("el-button",{on:{click:n.goBackFn}},[n._v("返回")]),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(e){n.submitForm("ruleForm")}}},[n._v("提交")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=t("VU/8")(p,f,!1,function(n){t("CvXk")},null,null);e.default=d.exports}});