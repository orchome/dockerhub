webpackJsonp([128],{"/hkm":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("fZjL"),a=r.n(n),i=r("Xxa5"),o=r.n(i),s=r("exGp"),l=r.n(s),u=r("Dd8w"),p=r.n(u),c=r("NYxO"),m=r("5Vl1"),d=r("pQT1"),f=r("msXN"),h={components:{UploadImg:m.a,MnqUploadImg:d.a},name:"",mixins:[f.a],computed:p()({isEdit:function(){return this.$route.meta.edit}},Object(c.b)({})),props:{},data:function(){return{app_type_list:[{name:"华丽图片app",label:"app",id:1},{name:"CPS分销",label:"cps",id:2},{name:"趣撸小程序",label:"qulu",id:3},{name:"小优圈小程序",label:"xiaoyouquan",id:4}],rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],type:[{type:"array",required:!0,message:"请选择平台类型",trigger:"blur"}],amount:[{required:!0,message:"请输入正确的商品价格",trigger:"blur"}]},ruleForm:{name:"",cover:"",amount:"",sort:1,banner_pic:"",details_pic:"",type:[]}}},watch:{},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;""!==e.ruleForm.cover?""!==e.ruleForm.banner_pic?""!==e.ruleForm.details_pic?e.isEdit?e.putPornGoodsUpdateFn(e.ruleForm):e.postPornGoodsCreateFn(e.ruleForm):e.warningMsgFn("请上传商品详情图!"):e.warningMsgFn("请上传banner图!"):e.warningMsgFn("请上传缩略图!")})},postPornGoodsCreateFn:function(){var t=l()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.type=this.ruleForm.type.join(","),t.next=3,this.triggerActionsFn("postPornGoodsCreate",e);case 3:t.sent&&(this.successMsgFn("添加商品成功"),this.resetForm("ruleForm"));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),putPornGoodsUpdateFn:function(){var t=l()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.triggerActionsFn("putPornGoodsUpdate",e);case 2:t.sent&&this.successMsgFn("编辑商品成功");case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),goBack:function(){this.$router.go(-1)},resetForm:function(t){this.$refs[t].resetFields(),setTimeout(function(){location.reload()},2e3)},getInfoFn:function(){var t=l()(o.a.mark(function t(e){var r,n,i,s=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.triggerActionsFn("getPornGoodsInfo",{id:e});case 2:(r=t.sent)&&(a()(this.ruleForm).forEach(function(t){s.ruleForm[t]=r.data[t]||""}),n=[],i=[],r.data.photo.forEach(function(t){1==t.type?n.push(t.pic):i.push(t.pic)}),this.ruleForm.banner_pic=n.toString(),this.ruleForm.details_pic=i.toString(),this.ruleForm.id=r.data.id);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},created:function(){var t=l()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.isEdit&&this.getInfoFn(this.$route.params.id);case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),mounted:function(){}},b={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"lookpic-edit-tab"},[r("el-form",{ref:"ruleForm",attrs:{"label-position":"right","label-width":"140px",model:t.ruleForm,rules:t.rules,size:"small"}},[r("el-form-item",{attrs:{label:"平台类型",prop:"type"}},[r("el-checkbox-group",{model:{value:t.ruleForm.type,callback:function(e){t.$set(t.ruleForm,"type",e)},expression:"ruleForm.type"}},[r("el-checkbox",{key:"1",attrs:{label:"app",name:"type"}},[t._v("华丽图片app")]),t._v(" "),r("el-checkbox",{key:"2",attrs:{label:"cps",name:"type"}},[t._v("cps")]),t._v(" "),r("el-checkbox",{key:"3",attrs:{label:"qulu",name:"type"}},[t._v("趣撸小程序")]),t._v(" "),r("el-checkbox",{key:"4",attrs:{label:"xiaoyouquan",name:"type"}},[t._v("小优圈小程序")])],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"上传列表缩略图",required:""}},[r("upload-img",{attrs:{picture:t.ruleForm.cover,mnq:""},on:{"update:picture":function(e){t.$set(t.ruleForm,"cover",e)}}})],1),t._v(" "),r("el-form-item",{attrs:{label:"上传banner图",required:""}},[r("MnqUploadImg",{staticClass:"checkmnq",attrs:{limit:5,picture:t.ruleForm.banner_pic,"list-type":"picture-card-drag","class-name":"list",mnq:"",multiple:"","edit-visible":!1},on:{"update:picture":function(e){t.$set(t.ruleForm,"banner_pic",e)}}})],1),t._v(" "),r("el-form-item",{attrs:{label:"上传商品详情图",required:""}},[r("MnqUploadImg",{staticClass:"checkmnq",attrs:{picture:t.ruleForm.details_pic,"list-type":"picture-card-drag","class-name":"list",mnq:"",multiple:"","edit-visible":!1},on:{"update:picture":function(e){t.$set(t.ruleForm,"details_pic",e)}}})],1),t._v(" "),r("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"商品名称",prop:"name"}},[r("el-input",{model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),r("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"商品单价",prop:"amount"}},[r("el-input-number",{staticClass:"input-number-wrapper",attrs:{min:0,label:"商品单价",step:1,precision:2},model:{value:t.ruleForm.amount,callback:function(e){t.$set(t.ruleForm,"amount",e)},expression:"ruleForm.amount"}})],1),t._v(" "),r("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"排 序"}},[r("div",{staticClass:"picture-mark-wrap"},[r("el-input-number",{staticClass:"inputNumber",attrs:{min:1,placeholder:"选填",step:1,precision:0},model:{value:t.ruleForm.sort,callback:function(e){t.$set(t.ruleForm,"sort",e)},expression:"ruleForm.sort"}}),t._v(" "),r("span",{staticClass:"mark"},[t._v("请选择整数，最小为1，数字越小越排在后面")])],1)]),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),r("el-button",{attrs:{size:"small"},on:{click:t.goBack}},[t._v("取消")])],1)],1)],1)])},staticRenderFns:[]};var F=r("VU/8")(h,b,!1,function(t){r("PL9g")},null,null);e.default=F.exports},PL9g:function(t,e,r){var n=r("xhsO");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);r("rjj0")("4d09d231",n,!0)},xhsO:function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,'\n.el-upload-list--picture-card .el-upload-list__item-status-label {\n  display: block !important;\n  right: -30px;\n  top: -12px;\n  width: 80px;\n  height: 48px;\n}\n.el-upload-list--picture-card .el-upload-list__item-status-label i {\n    font-size: 24px;\n    margin-top: 22px;\n}\n.el-upload-list--picture-card .el-upload-list__item-status-label .pay-icon {\n    top: 18px;\n    left: -2px;\n    font-size: 16px;\n    font-style: inherit;\n    position: relative;\n    color: red;\n}\n.el-upload-list--picture-card .el-upload-list__item-status-label .pay-icon.first {\n      color: #ff9900;\n}\n.picture-mark-wrap {\n  position: relative;\n}\n.picture-mark-wrap .mark {\n    position: absolute;\n    right: -10px;\n    z-index: 1000;\n    display: block;\n    width: 300px;\n    -webkit-transform: translate(100%, -100%);\n            transform: translate(100%, -100%);\n    font-size: 12px;\n    color: #606266;\n}\n.input-number-wrapper span[role="button"] {\n  display: none;\n}\n.input-number-wrapper input {\n  padding-left: 10px !important;\n  padding-right: 10px !important;\n}\n',""])}});