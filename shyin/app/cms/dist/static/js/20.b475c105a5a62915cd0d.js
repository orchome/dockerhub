webpackJsonp([20],{IW6T:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("Xxa5"),i=t.n(r),a=t("exGp"),s=t.n(a),o=t("Dd8w"),l=t.n(o),u=t("NYxO"),p={computed:l()({},Object(u.b)({}),{routerType:function(){return this.$route.meta.type}}),watch:{},data:function(){return{ruleForm:{level:"",id:"",expire_time:""},rules:{expire_time:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}]},pickerOptions:{disabledDate:function(e){return e<new Date}}}},created:function(){this.getInfoFn(this.$route.params.id)},methods:{changeLevelFn:function(e){1==e&&(this.ruleForm.expire_time="")},submitForm:function(){if("shop"===this.routerType){if(1==this.ruleForm.level&&(this.ruleForm.expire_time="2000-01-01 00:00:00"),2==this.ruleForm.level&&(""==this.ruleForm.expire_time||null==this.ruleForm.expire_time))return void this.errorMsgFn("请选择到期时间")}else if(0==this.ruleForm.level&&(this.ruleForm.expire_time="2000-01-01 00:00:00"),0!=this.ruleForm.level&&(""==this.ruleForm.expire_time||null==this.ruleForm.expire_time))return void this.errorMsgFn("请选择到期时间");this.putPornUserUpdateFn()},resetForm:function(){"shop"===this.routerType?this.closeSelectedTag("/pictureShop/user/shop"):(1==this.$route.meta.status_type&&this.closeSelectedTag("/pictureShop/boring_lu/user_management"),2==this.$route.meta.status_type&&this.closeSelectedTag("/pictureShop/xiaoyouquan/user_management"),this.$route.meta.status_type||this.closeSelectedTag("/pictureShop/user/miniapp"))},getInfoFn:function(){var e=s()(i.a.mark(function e(n){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",r=void 0,t="miniapp"===this.routerType?"getMtMiniprogramUserInfo":"getPornUserInfo",1!=this.$route.meta.status_type){e.next=7;break}return e.next=6,this.triggerActionsFn(t,{id:n,client:1});case 6:r=e.sent;case 7:if(2!=this.$route.meta.status_type){e.next=11;break}return e.next=10,this.triggerActionsFn(t,{id:n,client:2});case 10:r=e.sent;case 11:if(this.$route.meta.status_type){e.next=15;break}return e.next=14,this.triggerActionsFn(t,{id:n});case 14:r=e.sent;case 15:r&&("miniapp"===this.routerType?this.ruleForm={level:r.data.vip,id:r.data.id,expire_time:r.data.due_at,nickname:r.data.nickname,avatar:r.data.avatar}:("0000-00-00 00:00:00"===r.data.expire_time&&(r.data.expire_time=""),this.ruleForm=r.data));case 16:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}(),putPornUserUpdateFn:function(){var e=s()(i.a.mark(function e(){var n,t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._.cloneDeep(this.ruleForm),t="","shop"!==this.routerType){e.next=8;break}return e.next=5,this.triggerActionsFn("putPornUserUpdate",{id:n.id,level:n.level,expire_time:n.expire_time});case 5:t=e.sent,e.next=20;break;case 8:if(1!=this.$route.meta.status_type){e.next=12;break}return e.next=11,this.triggerActionsFn("putMtMiniprogramUser",{id:n.id,vip:n.level,due_at:n.expire_time,client:1});case 11:t=e.sent;case 12:if(2!=this.$route.meta.status_type){e.next=16;break}return e.next=15,this.triggerActionsFn("putMtMiniprogramUser",{id:n.id,vip:n.level,due_at:n.expire_time,client:2});case 15:t=e.sent;case 16:if(this.$route.meta.status_type){e.next=20;break}return e.next=19,this.triggerActionsFn("putMtMiniprogramUser",{id:n.id,vip:n.level,due_at:n.expire_time});case 19:t=e.sent;case 20:t&&(this.successMsgFn("修改成功！"),this.resetForm());case 21:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},m={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"app-container"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户ID"}},[e._v("\n          "+e._s(e.ruleForm.id)+"\n        ")]),e._v(" "),t("el-form-item",{attrs:{label:"用户昵称"}},[e._v("\n          "+e._s(e.ruleForm.nickname)+"\n        ")]),e._v(" "),t("el-form-item",{attrs:{label:"头  像"}},[t("img",{staticStyle:{width:"100px",height:"100px","border-radius":"50%"},attrs:{src:e.ruleForm.avatar,alt:""}})]),e._v(" "),t("el-form-item",{attrs:{label:"用户等级"}},[t("el-radio-group",{on:{change:e.changeLevelFn},model:{value:e.ruleForm.level,callback:function(n){e.$set(e.ruleForm,"level",n)},expression:"ruleForm.level"}},["shop"==e.routerType?t("el-radio",{attrs:{label:1}},[e._v("普通用户")]):e._e(),e._v(" "),"shop"==e.routerType?t("el-radio",{attrs:{label:2}},[e._v("VIP")]):e._e(),e._v(" "),"miniapp"==e.routerType?t("el-radio",{attrs:{label:0}},[e._v("普通用户")]):e._e(),e._v(" "),"miniapp"==e.routerType?t("el-radio",{attrs:{label:1}},[e._v("月卡")]):e._e(),e._v(" "),"miniapp"==e.routerType?t("el-radio",{attrs:{label:2}},[e._v("季卡")]):e._e(),e._v(" "),"miniapp"==e.routerType?t("el-radio",{attrs:{label:3}},[e._v("半年卡")]):e._e(),e._v(" "),"miniapp"==e.routerType?t("el-radio",{attrs:{label:4}},[e._v("年卡")]):e._e()],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"到期时间"}},[t("el-date-picker",{attrs:{"picker-options":e.pickerOptions,type:"datetime",disabled:"shop"===e.routerType?1==e.ruleForm.level:0==e.ruleForm.level,"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择到期时间"},model:{value:e.ruleForm.expire_time,callback:function(n){e.$set(e.ruleForm,"expire_time",n)},expression:"ruleForm.expire_time"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")]),e._v(" "),t("el-button",{on:{click:e.resetForm}},[e._v("取消")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var c=t("VU/8")(p,m,!1,function(e){t("aRwA")},null,null);n.default=c.exports},WB6H:function(e,n,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},aRwA:function(e,n,t){var r=t("WB6H");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t("rjj0")("990c5ab4",r,!0)}});