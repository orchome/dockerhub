webpackJsonp([137],{"5TCX":function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n.el-upload-list--picture-card .el-upload-list__item-status-label {\n  display: block !important;\n  right: -30px;\n  top: -12px;\n  width: 80px;\n  height: 48px;\n}\n.el-upload-list--picture-card .el-upload-list__item-status-label i {\n    font-size: 24px;\n    margin-top: 22px;\n}\n.el-upload-list--picture-card .el-upload-list__item-status-label .pay-icon {\n    top: 18px;\n    left: -2px;\n    font-size: 16px;\n    font-style: inherit;\n    position: relative;\n    color: red;\n}\n.el-upload-list--picture-card .el-upload-list__item-status-label .pay-icon.first {\n      color: #ff9900;\n}\n.picture-mark-wrap {\n  position: relative;\n}\n.picture-mark-wrap .mark {\n    position: absolute;\n    right: -10px;\n    z-index: 1000;\n    display: block;\n    width: 300px;\n    -webkit-transform: translate(100%, -100%);\n            transform: translate(100%, -100%);\n    font-size: 12px;\n    color: #606266;\n}\n",""])},Hd8I:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("fZjL"),n=r.n(o),i=r("Xxa5"),a=r.n(i),l=r("exGp"),s=r.n(l),u=r("Dd8w"),c=r.n(u),p=r("NYxO"),m=r("5Vl1"),d=r("pQT1"),f=r("msXN"),v=r("qwJR"),h={components:{UploadImg:m.a,MnqUploadImg:d.a,InputNumber:v.a},name:"",mixins:[f.a],computed:c()({isEdit:function(){return this.$route.meta.edit}},Object(p.b)({})),props:{},data:function(){return{ruleForm:{title:"",cover_url:"",type:"1",sort:1,video_url:"",platform:[]},rules:{title:[{required:!0,message:"请输入名字",trigger:"blur"}],platform:[{type:"array",required:!0,message:"请至少选择一个平台",trigger:"change"}]}}},watch:{},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;if(""!==t.ruleForm.cover_url)if(""!==t.ruleForm.video_url){var r=t._.cloneDeep(t.ruleForm);t.isEdit?t.putPornVideoUpdate(r):r.platform.forEach(function(e){var o=t._.cloneDeep(r);1==e&&(o.is_cps=1),delete o.platform,t.postPornVideoCreate(o)})}else t.warningMsgFn("请上传视频");else t.warningMsgFn("请上传封面")})},postPornVideoCreate:function(){var e=s()(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("params",t),e.next=3,this.triggerActionsFn("postPornVideoCreate",t);case 3:(r=e.sent)&&200==r.code&&(this.successMsgFn("上传视频成功"),this.resetForm("ruleForm"));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),putPornVideoUpdate:function(){var e=s()(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.triggerActionsFn("putPornVideoUpdate",t);case 2:(r=e.sent)&&200==r.code&&(this.successMsgFn("编辑视频成功"),this.resetForm("ruleForm"));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),resetForm:function(e){this.$refs[e].resetFields(),setTimeout(function(){location.reload()},1e3)},getPornPicVideoInfo:function(){var e=s()(a.a.mark(function e(t){var r,o=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.triggerActionsFn("getPornPicVideoInfo",{id:t});case 2:(r=e.sent)&&200==r.code&&(n()(this.ruleForm).forEach(function(e){o.ruleForm[e]=r.data[e]}),this.ruleForm.id=r.data.id);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},created:function(){var e=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.isEdit&&this.getPornPicVideoInfo(this.$route.params.id);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){}},F={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"lookpic-edit-tab"},[r("el-form",{ref:"ruleForm",attrs:{"label-position":"right","label-width":"100px",model:e.ruleForm,size:"small",rules:e.rules}},[r("el-form-item",{attrs:{label:"平台类别",prop:"platform"}},[r("el-checkbox-group",{model:{value:e.ruleForm.platform,callback:function(t){e.$set(e.ruleForm,"platform",t)},expression:"ruleForm.platform"}},[r("el-checkbox",{attrs:{label:"1",name:"platform"}},[e._v("CPS")]),e._v(" "),r("el-checkbox",{attrs:{label:"2",name:"platform"}},[e._v("华丽图片")])],1)],1),e._v(" "),r("el-form-item",{staticStyle:{width:"300px"},attrs:{prop:"title",label:"名称"}},[r("el-input",{attrs:{placeholder:"视频标题"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"上传封面",required:""}},[r("upload-img",{attrs:{picture:e.ruleForm.cover_url,mnq:""},on:{"update:picture":function(t){e.$set(e.ruleForm,"cover_url",t)}}})],1),e._v(" "),r("el-form-item",{attrs:{label:"上传视频",required:""}},[r("upload-img",{attrs:{picture:e.ruleForm.video_url,accept:"audio/mp4, video/mp4",video:"",mnq:""},on:{"update:picture":function(t){e.$set(e.ruleForm,"video_url",t)}}})],1),e._v(" "),r("el-form-item",{attrs:{label:"视频类型"}},[r("el-radio-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[r("el-radio",{attrs:{label:"1"}},[e._v("2D")]),e._v(" "),r("el-radio",{attrs:{label:"2"}},[e._v("VR")])],1)],1),e._v(" "),r("el-form-item",{staticStyle:{width:"250px"},attrs:{label:"排 序"}},[r("input-number",{attrs:{sort:e.ruleForm.sort,min:1,text:"请选择整数，最小为1，数字越小越排在后面"},on:{"update:sort":function(t){e.$set(e.ruleForm,"sort",t)}}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),r("el-button",{attrs:{size:"small"},on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("取消")])],1)],1)],1)])},staticRenderFns:[]};var b=r("VU/8")(h,F,!1,function(e){r("RcrF")},null,null);t.default=b.exports},RcrF:function(e,t,r){var o=r("5TCX");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);r("rjj0")("2ce79318",o,!0)}});