webpackJsonp([7],{"3IBp":function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,"\n.el-upload-list--picture-card .el-upload-list__item-status-label {\n  display: block !important;\n  right: -30px;\n  top: -12px;\n  width: 80px;\n  height: 48px;\n}\n.el-upload-list--picture-card .el-upload-list__item-status-label i {\n    font-size: 24px;\n    margin-top: 22px;\n}\n.el-upload-list--picture-card .el-upload-list__item-status-label .pay-icon {\n    top: 18px;\n    left: -2px;\n    font-size: 16px;\n    font-style: inherit;\n    position: relative;\n    color: red;\n}\n.el-upload-list--picture-card .el-upload-list__item-status-label .pay-icon.first {\n      color: #ff9900;\n}\n",""])},LTXy:function(t,e,r){var s=r("3IBp");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);r("rjj0")("213e9168",s,!0)},"g4m/":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("Xxa5"),i=r.n(s),n=r("exGp"),a=r.n(n),o=r("Dd8w"),u=r.n(o),l=r("NYxO"),c=r("5Vl1"),p=r("msXN"),m=r("qwJR"),h={components:{UploadImg:c.a,InputNumber:m.a},name:"",mixins:[p.a],computed:u()({isEdit:function(){return this.$route.meta.edit},type:function(){return this.$route.query.type}},Object(l.b)({})),props:{},data:function(){return{status_type_text:"",applicationTypeShow:!1,ruleForm:{name:"",cover_url:"",sort:1,sort_cps:1,type:["1"]},rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{min:1,max:4,message:"长度在 1 到 4 个字符",trigger:"blur"}]}}},watch:{},methods:{postPornPicCatCreateFn:function(){var t=a()(i.a.mark(function t(){var e,r,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.unlockParams(this.ruleForm),r=e.cps,s=e.shop,void 0,void 0,""==r){t.next=10;break}return 1==this.$route.meta.status_type&&(r.client=1,r.is_miniprogram=1),2==this.$route.meta.status_type&&(r.client=2,r.is_miniprogram=1),t.next=8,this.triggerActionsFn("postMnqCreateCategory",r);case 8:t.sent&&this.successMsgFn("CPS平台添加分类成功");case 10:if(""==s){t.next=15;break}return t.next=13,this.triggerActionsFn("postPornPicCatCreate",s);case 13:t.sent&&this.successMsgFn("华丽图片添加分类成功");case 15:this.resetForm("ruleForm");case 16:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),putPornPicCatUpdate:function(){var t=a()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={},1==this.type?(1==this.$route.meta.status_type&&(e={id:this.ruleForm.id,name:this.ruleForm.name,sort:this.ruleForm.sort_cps,client:1,is_miniprogram:1}),2==this.$route.meta.status_type&&(e={id:this.ruleForm.id,name:this.ruleForm.name,sort:this.ruleForm.sort_cps,client:2,is_miniprogram:1}),this.$route.meta.status_type||(e={id:this.ruleForm.id,name:this.ruleForm.name,sort:this.ruleForm.sort_cps})):e={id:this.ruleForm.id,name:this.ruleForm.name,sort:this.ruleForm.sort,cover_url:this.ruleForm.cover_url},t.next=4,this.triggerActionsFn(1==this.type?"postMnqEditCategory":"putPornPicCatUpdate",e);case 4:t.sent&&(this.successMsgFn("编辑分类成功"),this.resetForm("ruleForm"));case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;""!=e.ruleForm.cover_url||2!=e.ruleForm.type?e.$nextTick(function(){e.isEdit?e.putPornPicCatUpdate():e.postPornPicCatCreateFn()}):e.warningMsgFn("请上传封面")})},resetForm:function(t){var e="";1==this.$route.meta.status_type&&(e="/pictureShop/boring_lu/classification_management",this.closeSelectedTag("/pictureShop/boring_lu/classification_management")),2==this.$route.meta.status_type&&(e="/pictureShop/xiaoyouquan/classification_management",this.closeSelectedTag("/pictureShop/xiaoyouquan/classification_management")),this.$route.meta.status_type||(e=1==this.type?"/pictureShop/picCategory/cps":"/pictureShop/picCategory/shop",this.closeSelectedTag(e)),this.$refs[t].resetFields()},getPornPicCatInfo:function(){var t=a()(i.a.mark(function t(e){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r="",1!=this.type){t.next=16;break}if(1!=this.$route.meta.status_type){t.next=6;break}return t.next=5,this.triggerActionsFn("getMnqCategoryDetail",{id:e,client:1,is_miniprogram:1});case 5:r=t.sent;case 6:if(2!=this.$route.meta.status_type){t.next=10;break}return t.next=9,this.triggerActionsFn("getMnqCategoryDetail",{id:e,client:2,is_miniprogram:1});case 9:r=t.sent;case 10:if(this.$route.meta.status_type){t.next=14;break}return t.next=13,this.triggerActionsFn("getMnqCategoryDetail",{id:e});case 13:r=t.sent;case 14:t.next=20;break;case 16:if(2!=this.type){t.next=20;break}return t.next=19,this.triggerActionsFn("getPornPicCatInfo",{id:e});case 19:r=t.sent;case 20:r&&(this.ruleForm.name=r.data.name,this.ruleForm.cover_url=r.data.cover_url||"",this.ruleForm.id=r.data.id,this.ruleForm.type=[this.type],1==this.type?this.ruleForm.sort_cps=Number(r.data.sort):2==this.type&&(this.ruleForm.sort=Number(r.data.sort)));case 21:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),unlockParams:function(t){var e=this._.cloneDeep(t),r="",s="";return e.type.indexOf("1")>-1&&(r={name:e.name,sort:e.sort_cps}),e.type.indexOf("2")>-1&&(s={name:e.name,sort:e.sort,cover_url:e.cover_url}),{cps:r,shop:s}}},created:function(){var t=a()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:1==this.$route.meta.status_type&&(this.status_type_text="趣撸小程序排序"),2==this.$route.meta.status_type&&(this.status_type_text="小优圈小程序排序"),this.$route.meta.status_type||(this.status_type_text="CPS排序"),this.isEdit&&this.getPornPicCatInfo(this.$route.params.id);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),mounted:function(){}},d={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"lookpic-edit-tab"},[r("el-form",{ref:"ruleForm",attrs:{"label-position":"right","label-width":"150px",model:t.ruleForm,size:"small",rules:t.rules}},[r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.isEdit&&t.applicationTypeShow,expression:"!isEdit && applicationTypeShow"}],attrs:{label:"平台类别",prop:"type"}},[r("el-checkbox-group",{model:{value:t.ruleForm.type,callback:function(e){t.$set(t.ruleForm,"type",e)},expression:"ruleForm.type"}},[r("el-checkbox",{attrs:{label:"1",name:"type"}},[t._v("CPS")]),t._v(" "),r("el-checkbox",{attrs:{label:"2",name:"type"}},[t._v("华丽图片")])],1)],1),t._v(" "),r("el-form-item",{staticStyle:{width:"300px"},attrs:{prop:"name",label:"分类名称"}},[r("el-input",{attrs:{placeholder:"输入分类名称"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),t.ruleForm.type.indexOf("2")>-1?r("el-form-item",{attrs:{label:"上传封面",required:""}},[r("upload-img",{attrs:{picture:t.ruleForm.cover_url,mnq:""},on:{"update:picture":function(e){t.$set(t.ruleForm,"cover_url",e)}}})],1):t._e(),t._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.ruleForm.type.indexOf("1")>-1,expression:"ruleForm.type.indexOf('1')>-1"}],staticStyle:{width:"250px"},attrs:{label:t.status_type_text}},[r("input-number",{attrs:{sort:t.ruleForm.sort_cps,min:1,max:6,text:"数值1-6整数，数字越小越排在前面"},on:{"update:sort":function(e){t.$set(t.ruleForm,"sort_cps",e)}}})],1),t._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.ruleForm.type.indexOf("2")>-1,expression:"ruleForm.type.indexOf('2')>-1"}],staticStyle:{width:"250px"},attrs:{label:"华丽图片排序"}},[r("input-number",{attrs:{sort:t.ruleForm.sort,min:1,text:"请选择整数，最小为1，数字越小越排在后面"},on:{"update:sort":function(e){t.$set(t.ruleForm,"sort",e)}}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),r("el-button",{attrs:{size:"small"},on:{click:function(e){t.resetForm("ruleForm")}}},[t._v("取消")])],1)],1)],1)])},staticRenderFns:[]};var f=r("VU/8")(h,d,!1,function(t){r("LTXy")},null,null);e.default=f.exports}});