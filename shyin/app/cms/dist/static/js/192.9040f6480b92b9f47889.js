webpackJsonp([192],{"0B9E":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("Xxa5"),s=t.n(a),i=t("exGp"),r=t.n(i),o=t("Dd8w"),l=t.n(o),p=t("NYxO"),c={name:"notifList",computed:l()({},Object(p.b)({messageList:"messageList"})),watch:{},data:function(){return{loading:!1,pushObj:[{id:0,name:"全部"},{id:1,name:"作者"},{id:2,name:"读者"},{id:3,name:"CPS账号"},{id:4,name:"内容商"}],params:{push_obj:0,page:1,title:""},delLoading:!1}},created:function(){this.getMessageList(this.params)},methods:{getMessageList:function(){var n=r()(s.a.mark(function n(e){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.loading=!0,n.next=3,this.$store.dispatch("getMessageList",e);case 3:this.loading=!1;case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),changeSendTypeFn:function(n){this.params.page=1,this.params.push_obj=n,this.getMessageList(this.params)},handleCurrentChange:function(n){this.params.page=n,this.getMessageList(this.params)},fuzzyQueryFn:function(){this.params.page=1,this.getMessageList(this.params)},deleteMessageDelFn:function(){var n=r()(s.a.mark(function n(e){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$store.dispatch("deleteMessageDel",{id:e});case 2:200==n.sent.code&&(this.$message({duration:1500,message:"删除消息成功！",type:"success"}),this.getMessageList());case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()}},u={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"bar flex"},[t("div",{staticClass:"flex-left"},[t("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0"}},[n._v("推送对象")]),n._v(" "),t("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择推送对象"},on:{change:n.changeSendTypeFn},model:{value:n.params.push_obj,callback:function(e){n.$set(n.params,"push_obj",e)},expression:"params.push_obj"}},n._l(n.pushObj,function(n){return t("el-option",{key:n.id,attrs:{label:n.name,value:n.id}})}))],1),n._v(" "),t("div",{staticClass:"flex-right"},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"输入通知标题",size:"mini","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(e){if(!("button"in e)&&n._k(e.keyCode,"enter",13,e.key))return null;n.fuzzyQueryFn(e)}},model:{value:n.params.title,callback:function(e){n.$set(n.params,"title",e)},expression:"params.title"}}),n._v(" "),t("el-button",{staticClass:"search",attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:n.fuzzyQueryFn}},[n._v("搜索")]),n._v(" "),t("router-link",{attrs:{to:"/notifyManage/notify/add"}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"}},[n._v("新增")])],1)],1)]),n._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:n.messageList.data,border:"",stripe:""}},[t("el-table-column",{attrs:{prop:"id",label:"序号","min-width":"80",fixed:""}}),n._v(" "),t("el-table-column",{attrs:{prop:"title",label:"通知标题","min-width":"150","show-overflow-tooltip":""}}),n._v(" "),t("el-table-column",{attrs:{prop:"push_obj",label:"推送对象","min-width":"120"},scopedSlots:n._u([{key:"default",fn:function(e){return[1==e.row.push_obj?t("el-tag",{attrs:{type:"success"}},[n._v("作者")]):2==e.row.push_obj?t("el-tag",[n._v("读者")]):3==e.row.push_obj?t("el-tag",{attrs:{type:"warning"}},[n._v("CPS代理")]):4==e.row.push_obj?t("el-tag",{attrs:{type:"info"}},[n._v("内容商")]):"0"==e.row.push_obj?t("el-tag",{attrs:{type:"danger"}},[n._v("无效对象")]):n._e()]}}])}),n._v(" "),t("el-table-column",{attrs:{prop:"_push_time",label:"推送时间","min-width":"120","show-overflow-tooltip":""},scopedSlots:n._u([{key:"default",fn:function(e){return[t("div",[n._v(n._s(e.row._push_time))])]}}])}),n._v(" "),t("el-table-column",{attrs:{prop:"created_at",label:"创建时间","min-width":"120","show-overflow-tooltip":""}}),n._v(" "),t("el-table-column",{attrs:{prop:"updated_at",label:"消息状态","min-width":"50"},scopedSlots:n._u([{key:"default",fn:function(e){return["1"==e.row.is_send?t("el-tag",{attrs:{type:"success"}},[n._v("已发送")]):t("el-tag",{attrs:{type:"danger"}},[n._v("未发送")])]}}])}),n._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("div",{attrs:{center:""}},[t("router-link",{attrs:{to:"/notifyManage/notify/info/"+e.row.id}},["1"==e.row.is_send?t("el-button",{attrs:{size:"mini",type:"success"}},[n._v("查看")]):n._e()],1),n._v(" "),t("router-link",{attrs:{to:"/notifyManage/notify/edit/"+e.row.id}},["0"==e.row.is_send?t("el-button",{attrs:{size:"mini",type:"primary"}},[n._v("编辑")]):n._e()],1),n._v(" "),"0"==e.row.is_send?t("el-popover",{attrs:{placement:"top",width:"100"},model:{value:e.row.delete,callback:function(t){n.$set(e.row,"delete",t)},expression:"scope.row.delete"}},[t("p",[n._v("确认删除选择的消息？")]),n._v(" "),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){e.row.delete=!1}}},[n._v("取消")]),n._v(" "),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){n.deleteMessageDelFn(e.row.id),e.row.delete=!1}}},[n._v("确定")])],1),n._v(" "),t("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(n){e.row.delete=!0}},slot:"reference"},[n._v("删除")])],1):n._e()],1)]}}])})],1),n._v(" "),t("div",{staticClass:"pagination-container clearfix"},[t("div",{staticClass:"float-left"},[t("global-pagination",{attrs:{"current-page":n.params.page,"page-size":n.params.per_page,layout:"total, sizes, prev, pager, next, jumper",total:n.messageList.total},on:{"current-change":n.handleCurrentChange,"size-change":n.handleSizeChange}})],1)])],1)},staticRenderFns:[]};var d=t("VU/8")(c,u,!1,function(n){t("azPf")},null,null);e.default=d.exports},TKPI:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},azPf:function(n,e,t){var a=t("TKPI");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("1236ab41",a,!0)}});